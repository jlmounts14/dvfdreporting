<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Delbarton Volunteer Fire Department - Incident Report (BETA v8)</title>
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
    <style>
        body {
            background: linear-gradient(135deg, #fff5f0 0%, #fff8e1 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #3a1a1a;
        }
        header {
            background: #b71c1c;
            color: #fff;
            padding: 1em 0;
            text-align: center;
            border-bottom: 4px solid #7f1010;
            box-shadow: 0 2px 8px rgba(183,28,28,0.08);
        }
        main {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(183,28,28,0.10);
            margin: 2em auto;
            max-width: 900px;
            padding: 2em 2em 1em 2em;
        }
        fieldset {
            border: 2px solid #b71c1c;
            border-radius: 8px;
            background: #fff7f3;
            margin-bottom: 1.5em;
            padding: 1em;
        }
        legend {
            color: #b71c1c;
            font-weight: bold;
            font-size: 1.1em;
            letter-spacing: 0.5px;
        }
        .subsection-fieldset {
            background: #ffe5e0;
            border: 2px solid #b71c1c;
        }
        .vehicle-fieldset {
            background: #fff3e0;
            border: 2px solid #444444;
        }
        .vehicle-fieldset.vehicle-1 {
            background: #ffebee;
            border: 2px solid #d32f2f;
        }
        .vehicle-fieldset.vehicle-2 {
            background: #e3f2fd;
            border: 2px solid #1976d2;
        }
        .vehicle-fieldset.vehicle-3 {
            background: #e8f5e8;
            border: 2px solid #388e3c;
        }
        .vehicle-fieldset.vehicle-4 {
            background: #fff3e0;
            border: 2px solid #f57c00;
        }
        .vehicle-fieldset.vehicle-5 {
            background: #f3e5f5;
            border: 2px solid #7b1fa2;
        }
        .vehicle-fieldset.vehicle-6 {
            background: #fce4ec;
            border: 2px solid #c2185b;
        }
        .driver-fieldset, .insurance-fieldset, .owner-fieldset {
            background: #fff0e0;
            border: 1.5px solid #b71c1c;
        }
        .owner-fieldset {
            background: #fffbe6;
            border: 1.5px solid #444444;
        }
        label, .form-row, textarea, input, select {
            display: block;
            margin-bottom: 0.2em;
            font-weight: bold;
        }
        input[type="text"], input[type="number"], input[type="date"], input[type="time"], input[type="tel"], select, textarea {
            border: 1.5px solid #ffccbc;
            border-radius: 4px;
            padding: 0.3em 0.5em;
            background: #fff8f6;
            transition: border 0.2s;
        }
        input:focus, select:focus, textarea:focus {
            border: 2px solid #b71c1c;
            outline: none;
            background: #ffe5e0;
        }
        button, .photo-upload-section input[type="file"] {
            background: #b71c1c;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 0.4em 1.2em;
            margin: 0.2em 0.2em 0.2em 0;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(183,28,28,0.08);
            transition: background 0.2s, box-shadow 0.2s;
        }
        button:hover, .photo-upload-section input[type="file"]:hover {
            background: #7f1010;
            box-shadow: 0 4px 12px rgba(183,28,28,0.15);
        }
        #personnel-bank, #apparatus-bank {
            background: #ffe5e0;
            border: 1.5px solid #ffccbc;
            border-radius: 6px;
            padding: 0.7em 1em;
            margin-bottom: 1em;
            width: 350px;
            min-width: 220px;
            max-width: 550px;
        }
        #personnel-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3em 0.7em;
            padding-left: 0;
            margin: 0.5em 0 0 0;
            list-style: none;
            justify-items: left;
        }
        #personnel {
            min-width: 240px;
            width: 240px;
        }
        #personnel-list li {
            flex: 1 1 240px;
            min-width: 240px;
            max-width: 240px;
            box-sizing: border-box;
            margin: 0.2em 0;
            padding: 0.2em 0.5em;
            background: #fff8f6;
            border: 1px solid #ffd6c8;
            border-radius: 4px;
            color: #b71c1c;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-wrap: wrap;
        }
        .assignment-span {
            color: #444444 !important;
        }

        #apparatus-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3em 0.7em;
            padding-left: 0;
            margin: 0.5em 0 0 0;
            list-style: none;
            justify-items: center;
        }

        #apparatus-list li {
            width: 240px;
            min-width: 240px;
            max-width: 240px;;
            box-sizing: border-box;
            margin: 0.2em 0;
            padding: 0.2em 0.5em;
            background: #fff8f6;
            border: 1px solid #ffd6c8;
            border-radius: 4px;
            color: #b71c1c;
            display: flex;
            flex-direction: column;
            align-items: center; 
            text-align: center;
            flex-wrap: wrap;
        }
        .photo-upload-section {
            background: #fff7f3;
            border: 1.5px dashed #ffccbc;
            border-radius: 8px;
            padding: 1em;
        }
        .photo-preview img {
            border: 2px solid #b71c1c;
            border-radius: 6px;
            margin: 0.2em;
            background: #fff;
        }
        @media (max-width: 600px) {
            main {
                padding: 1em 0.2em;
            }
            fieldset {
                padding: 0.5em;
            }
        }
        #personnel-list button,
        #apparatus-list button {
            margin-left: 1em;
        }
    </style>
</head>
<body>
    <header>
        <h1 style="margin-bottom:0.2em;">Delbarton Volunteer Fire Department</h1>
        <h2 style="font-size:1.3em; font-weight:normal; margin-top:0;">Incident Report (BETA v8)</h2>
    </header>
    <main>
        <div id="report-form">
            <form>
                <fieldset>
                    <legend>Run Details</legend>
                    <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap;">
                        <label style="margin-bottom:0;">
                            Run Number:
                            <span id="run-number-prefix"></span>
                            <input
                                type="number"
                                name="run-number-suffix"
                                id="run-number-suffix"
                                min="0"
                                max="999999"
                                maxlength="6"
                                pattern="\d{1,6}"
                                inputmode="numeric"
                            >
                        </label>
                        <label style="margin-bottom:0;">
                            Date:
                            <input type="date" name="date" >
                        </label>
                    </div>
                    <!-- The rest of your Run Details fields go here -->
                    <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap; margin-top:0.5em;">
                        <label style="margin-bottom:0;">
                            Alarm:
                            <input type="text" name="alarm" placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" inputmode="numeric" >
                        </label>
                        <label style="margin-bottom:0;">
                            Responding:
                            <input type="text" name="responding" placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" inputmode="numeric" >
                        </label>
                        <label style="margin-bottom:0;">
                            On Scene:
                            <input type="text" name="on-scene" placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" inputmode="numeric" >
                        </label>
                        <label style="margin-bottom:0;">
                            In Service:
                            <input type="text" name="in-service" placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" inputmode="numeric" >
                        </label>
                    </div>
                    <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap; margin-top:0.5em;">
                        <label style="margin-bottom:0;">
                            Method of Alarm:
                            <select name="method-of-alarm" id="method-of-alarm" >
                                <option value="">Select...</option>
                                <option value="911 Dispatch (Tones)">911 Dispatch (Tones)</option>
                                <option value="Radio (No-Tones)">Radio (No-Tones)</option>
                                <option value="Still Alarm (Walk-Up)">Still Alarm (Walk-Up)</option>
                                <option value="Self-Dispatched">Self-Dispatched</option>
                            </select>
                        </label>
                    </div>
                    <div style="margin-top:0.5em;">
                        <label style="width:100%;">
                            Mutual Aid:<br>
                            <textarea name="mutual-aid" rows="2" cols="40" placeholder="List agencies, departments, or resources provided"></textarea>
                        </label>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Incident Location</legend>
                    <div>
                    <label style="min-width: 180px;">
                            Name (Business/Location):
                            <input type="text" name="location-name" style="width: 160px;">
                        </label>
                    </div>
                    <div class="driver-inline-row" style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end;">
                        <label style="min-width: 180px;">
                            Address:
                            <input type="text" name="address" style="width: 160px;">
                        </label>
                        <label style="min-width: 120px;">
                            Apt./Suite/Room #:
                            <input type="text" name="apt-suite-room" style="width: 80px;">
                        </label>
                    </div>
                    <div class="driver-inline-row" style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end;">
                        <label style="min-width: 120px;">
                            City:
                            <input type="text" name="city" style="width: 100px;">
                        </label>
                        <label style="min-width: 80px;">
                            State:
                            <input type="text" name="state" maxlength="2" style="width: 40px;">
                        </label>
                        <label style="min-width: 100px;">
                            Zip Code:
                            <input type="text" name="zip" maxlength="10" style="width: 70px;" inputmode="numeric">
                        </label>
                    </div>
                        <label style="min-width: 180px;">
                            Cross Street:
                            <input type="text" name="cross-street" style="width: 160px;">
                        </label>
                    <div class="driver-inline-row" style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end; margin-top: 0.5em;">
                        <label style="min-width: 120px;">
                            GPS Latitude:
                            <input type="text" name="gps-latitude" placeholder="40.123456" style="width: 100px;">
                        </label>
                        <label style="min-width: 120px;">
                            GPS Longitude:
                            <input type="text" name="gps-longitude" placeholder="-82.123456" style="width: 100px;">
                        </label>
                        <button type="button" id="get-current-location" style="margin-bottom: 0.2em;">Get Current Location</button>
                    </div>
                        <label style="margin-top:0.5em; width: 100%;">
                        Description/Other:<br>
                        <textarea name="location-description" rows="2" cols="40"></textarea>
                        </label>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Personnel Response</legend>
                    <div style="display: flex; gap: 2em; align-items: flex-start; flex-wrap: wrap;">
                        <div>
                            <label for="personnel">Select Personnel<br>
                                <span style="font-weight:normal; font-size:0.95em;">(hold Cmd or Ctrl to select multiple)</span>
                            </label>    
                            <select name="personnel" id="personnel" multiple size="10" style="min-width:240px; width:240px;">
                                <option value="211 Steven Cicchetti">211 Steven Cicchetti</option>
                                <option value="212 Andy Fouch">212 Andy Fouch</option>
                                <option value="220 Nicole Hunt">220 Nicole Hunt</option>
                                <option value="221 Robert Hunt Jr.">221 Robert Hunt Jr.</option>
                                <option value="222 Mike Chapman">222 Mike Chapman</option>
                                <option value="227 Ervin Slone">227 Ervin Slone</option>
                                <option value="228 Megan Collins">228 Megan Collins</option>
                                <option value="229 Jacquelin Blankenship">229 Jacquelin Blankenship</option>
                                <option value="230 Chad Adkins">230 Chad Adkins</option>
                                <option value="231 Harmon Adkins">231 Harmon Adkins</option>
                                <option value="234 Ray Slone">234 Ray Slone</option>
                                <option value="235 Hunter Slack">235 Hunter Slack</option>
                                <option value="236 Sarah White">236 Sarah White</option>
                                <option value="238 Clifford Adkins">238 Clifford Adkins</option>
                                <option value="239 Kenny Smith Sr.">239 Kenny Smith Sr.</option>
                                <option value="240 Zack Browning">240 Zack Browning</option>
                                <option value="241 Thomas Muncy">241 Thomas Muncy</option>
                                <option value="242 James Blackburn">242 James Blackburn</option>
                                <option value="242.5 Eva Blackburn">242.5 Eva Blackburn</option>
                                <option value="243 Alex Chapman">243 Alex Chapman</option>
                                <option value="244 KJ Smith">244 KJ Smith</option>
                                <option value="245 Nick Adkins">245 Nick Adkins</option>
                                <option value="246 Gavin Adkins">246 Gavin Adkins</option>
                                <option value="247 Jordon Mounts">247 Jordon Mounts</option>
                                <option value="250 Chad Adkins Jr.">250 Chad Adkins Jr.</option>
                                <option value="252 Glen Runyon">252 Glen Runyon</option>
                                <option value="255 Shane Justice">255 Shane Justice</option>
                                <option value="261 Heather Hatfield">261 Heather Hatfield</option>
                                <option value="262 Derek Copley">262 Derek Copley</option>
                            </select>
                            <button type="button" id="insert-personnel" style="margin-top:1em;">Insert</button>
                        </div>
                        <div id="personnel-bank" style="width:max-content; min-width:0; align-self:flex-start;">
                            <strong>Responding Personnel (<span id="personnel-count">0</span>):</strong>
                            <ul id="personnel-list" style="margin:0.5em 0 0 0; padding-left:1.2em;"></ul>
                        </div>
                    </div>
                        <div id="personnel-roles" style="margin-top:1em; display: flex; gap: 2em; flex-wrap: wrap;">
                            <label>
                                Incident Commander:
                                <select id="incident-commander" name="incident-commander">
                                    <option value="">Select...</option>
                                </select>
                            </label>
                            <label>
                                Safety Officer:
                                <select id="safety-officer" name="safety-officer">
                                    <option value="">Select...</option>
                                </select>
                            </label>
                            <label>
                                First Unit On Scene:
                                <select id="first-unit" name="first-unit">
                                    <option value="">Select...</option>
                                </select>
                            </label>
                        </div>
                    </fieldset>
                <fieldset>
                    <legend>Apparatus Response</legend>
                    <div style="display: flex; gap: 2em; align-items: flex-start; flex-wrap: wrap;">
                        <div>
                            <label for="apparatus">Select Apparatus<br>
                                <span style="font-weight:normal; font-size:0.95em;">(hold Cmd or Ctrl to select multiple)</span>
                            </label>
                            <select name="apparatus" id="apparatus" multiple size="8" style="min-width:180px;">
                                <option value="Engine 201">Engine 201</option>
                                <option value="Tanker 202">Tanker 202</option>
                                <option value="Rescue 203">Rescue 203</option>
                                <option value="Rescue 204">Rescue 204</option>
                                <option value="Engine 205">Engine 205</option>
                                <option value="ATV 206">ATV 206</option>
                                <option value="ATV 207">ATV 207</option>
                                <option value="POV">POV</option>
                            </select>
                            <button type="button" id="insert-apparatus" style="margin-top:1em;">Insert</button>
                        </div>
                        <div id="apparatus-bank" style="width:max-content; min-width:0; align-self:flex-start;">
                            <strong>Responding Apparatus:</strong>
                            <ul id="apparatus-list" style="margin:0.5em 0 0 0; padding-left:1.2em;"></ul>
                            <div>
                                <span>Engines: <span id="engine-count">0</span></span> |
                                <span>Tankers: <span id="tanker-count">0</span></span> |
                                <span>Rescues: <span id="rescue-count">0</span></span> |
                                <span>ATVs: <span id="atv-count">0</span></span>
                            </div>
                        </div>
                    </div>
                    <div id="apparatus-roles"></div>
                </fieldset>
                <div id="apparatus-assign-section" style="display:none;">
                    <h4>Assign Personnel to <span id="assign-apparatus-name"></span></h4>
                    <label id="driver-label">Driver:
                        <select id="assign-driver"></select>
                    </label>
                    <label id="crew-label">Crew:
                        <select id="assign-crew" multiple size="5"></select>
                        <button type="button" id="add-crew-member">Insert Selected</button>
                    </label>
                    <ul id="crew-list"></ul>
                    <button type="button" id="save-assignment">Save Assignment</button>
                    <button type="button" id="cancel-assignment">Cancel</button>
                </div>
                <!-- Call Type Section -->
                <fieldset>
                    <legend>Call Type</legend>
                    <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap;">
                        <label for="call-type" style="min-width: 140px;">
                            Select Call Type:
                        </label>
                        <select id="call-type" name="call-type" style="min-width: 260px;">
                            <option value="">Select...</option>
                            <option value="ATV Accident/Trail Rescue">ATV Accident/Trail Rescue</option>
                            <option value="Brush Fire">Brush Fire</option>
                            <option value="Electrical Fire">Electrical Fire</option>
                            <option value="EMS Assist/1st Response">EMS Assist/1st Response</option>
                            <option value="Fire Alarm">Fire Alarm</option>
                            <option value="Fire Investigation">Fire Investigation</option>
                            <option value="HazMat">HazMat</option>
                            <option value="Illegal Burn">Illegal Burn</option>
                            <option value="Landing Zone">Landing Zone</option>
                            <option value="Motor Vehicle Collision">Motor Vehicle Collision</option>
                            <option value="Motorist Assist/Traffic Control">Motorist Assist/Traffic Control</option>
                            <option value="Power Line Down">Power Line Down</option>
                            <option value="Search and Rescue">Search and Rescue</option>
                            <option value="Structure Fire">Structure Fire</option>
                            <option value="Swift Water Rescue">Swift Water Rescue</option>
                            <option value="Tree Down">Tree Down</option>
                            <option value="Utility Pole Fire">Utility Pole Fire</option>
                            <option value="Utility Problem (Gas/Water Leak)">Utility Problem (Gas/Water Leak)</option>
                            <option value="Vehicle Fire">Vehicle Fire</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </fieldset>

                <!-- Structure Fire Details (hidden by default) -->
                <fieldset id="structure-fire-section" style="display:none;">
                    <legend>Structure Fire Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            ðŸ”¥ Structure Fire Safety Reminder
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Maintain situational awareness. Monitor for structural collapse indicators, backdraft conditions, and rapid fire spread. Ensure proper ventilation and water supply.
                        </div>
                    </div>
                    
                    <!-- Building Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Building Information</strong>
                    </div>
                    <!-- Type and Incident Checkboxes -->
                    <div style="display:flex; gap:1em; flex-wrap:wrap; margin-bottom:0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="structure-use" value="Residential"> Residential
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="structure-use" value="Commercial"> Commercial
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="structure-use" value="Industrial"> Industrial
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="structure-use" value="Agricultural"> Agricultural
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Construction Type:
                            <select name="construction-type" style="width: 200px;">
                                <option value="">Select Construction Type</option>
                                <option value="Type 1 - Fire Resistive">Type 1 - Fire Resistive</option>
                                <option value="Type 2 - Non-Combustible">Type 2 - Non-Combustible</option>
                                <option value="Type 3 - Ordinary">Type 3 - Ordinary (Masonry/Wood)</option>
                                <option value="Type 4 - Heavy Timber">Type 4 - Heavy Timber</option>
                                <option value="Type 5 - Wood Frame">Type 5 - Wood Frame</option>
                            </select>
                        </label>
                        <label>
                            Number of Stories:
                            <select name="structure-stories" style="width: 120px;">
                                <option value="">Select</option>
                                <option value="1">1 Story</option>
                                <option value="2">2 Stories</option>
                                <option value="3">3 Stories</option>
                                <option value="4+">4+ Stories</option>
                            </select>
                        </label>
                        <label>
                            Size/Sq Ft:
                            <input type="text" name="size-square-footage" style="width: 100px;" placeholder="approx.">
                        </label>
                    </div>
                    
                    <!-- Occupant Info -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Occupancy Information</strong>
                    </div>
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                        <label>
                            Occupant Name:
                            <input type="text" name="occupant-name">
                        </label>
                        <label>
                            Phone:
                            <input type="tel" name="occupant-phone">
                        </label>
                        <label>
                            Number of Occupants:
                            <input type="number" name="total-occupants" min="0" style="width: 80px;" inputmode="numeric">
                        </label>
                    </div>
                    <!-- Rents Checkbox moved here -->
                    <div style="margin-top:0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="occupant-rents" id="occupant-rents"> Rents
                        </label>
                    </div>
                    <!-- Owner Info (hidden by default) -->
                    <fieldset id="owner-info-section" class="subsection-fieldset" style="display:none; margin-top:0.5em;">
                        <legend>Owner Information</legend>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Name:
                                <input type="text" name="owner-name">
                            </label>
                            <label>
                                Phone:
                                <input type="tel" name="owner-phone">
                            </label>
                        </div>
                        <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Address:
                                <input type="text" name="owner-address" style="width:140px;">
                            </label>
                            <label>
                                City:
                                <input type="text" name="owner-city" style="width:100px;">
                            </label>
                            <label>
                                State:
                                <input type="text" name="owner-state" maxlength="2" style="width:40px;">
                            </label>
                            <label>
                                Zip:
                                <input type="text" name="owner-zip" maxlength="10" style="width:70px;" inputmode="numeric">
                            </label>
                        </div>
                    </fieldset>
                    <!-- Insurance Info (hidden by default) -->
                    <div style="margin-top:0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="insurance" id="insurance-checkbox"> Insurance
                        </label>
                    </div>
                    <fieldset id="insurance-info-section" class="subsection-fieldset" style="display:none; margin-top:0.5em;">
                        <legend>Insurance Information</legend>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Company:
                                <input type="text" name="insurance-company">
                            </label>
                            <label>
                                Phone:
                                <input type="tel" name="insurance-phone">
                            </label>
                        </div>
                        <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Address:
                                <input type="text" name="insurance-address" style="width:140px;">
                            </label>
                            <label>
                                City:
                                <input type="text" name="insurance-city" style="width:100px;">
                            </label>
                            <label>
                                State:
                                <input type="text" name="insurance-state" maxlength="2" style="width:40px;">
                            </label>
                            <label>
                                Zip:
                                <input type="text" name="insurance-zip" maxlength="10" style="width:70px;" inputmode="numeric">
                            </label>
                        </div>
                        <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Policy #:
                                <input type="text" name="policy-number">
                            </label>
                            <label>
                                NAIC #:
                                <input type="text" name="naic-number">
                            </label>
                        </div>
                    </fieldset>
                    
                    <!-- Fire Origin & Extension -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Origin & Extension</strong>
                    </div>
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Room of Origin:
                            <input type="text" name="room-of-origin" style="width: 140px;" placeholder="Kitchen, bedroom, etc.">
                        </label>
                        <label>
                            Level of Origin:
                            <select name="level-of-origin" id="level-of-origin" style="width: 120px;" onchange="toggleLevelOfOriginOther()">
                                <option value="">Select Level</option>
                                <option value="Basement">Basement</option>
                                <option value="1st Floor">1st Floor</option>
                                <option value="2nd Floor">2nd Floor</option>
                                <option value="3rd Floor">3rd Floor</option>
                                <option value="Attic">Attic</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <input type="text" name="level-of-origin-other" id="level-of-origin-other" placeholder="Please specify" style="display:none; margin-left:1em; width: 120px;">
                    </div>
                    
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Fire Cause:
                            <select name="structure-fire-cause" style="width: 160px;">
                                <option value="">Select Cause</option>
                                <option value="Electrical">Electrical</option>
                                <option value="Heating System">Heating System</option>
                                <option value="Cooking">Cooking</option>
                                <option value="Smoking Materials">Smoking Materials</option>
                                <option value="Intentional">Intentional</option>
                                <option value="Lightning">Lightning</option>
                                <option value="Appliance">Appliance</option>
                                <option value="Candles">Candles</option>
                                <option value="Mechanical">Mechanical</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Under Investigation">Under Investigation</option>
                            </select>
                        </label>
                        <label>
                            Extent of Fire Damage:
                            <select name="fire-extent" style="width: 160px;">
                                <option value="">Select Extent</option>
                                <option value="Confined to Object">Confined to Object</option>
                                <option value="Confined to Room">Confined to Room</option>
                                <option value="Confined to Floor">Confined to Floor</option>
                                <option value="Confined to Building">Confined to Building</option>
                                <option value="Extended Beyond Building">Extended Beyond Building</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Life Safety & Evacuation -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Life Safety & Evacuation</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-injuries"> Injuries
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-fatalities"> Fatalities
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-evacuation"> Evacuation Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-rescue"> Rescue Performed
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-search"> Search Conducted
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-all-accounted"> All Occupants Accounted For
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-pets-rescued"> Pets Rescued
                        </label>
                    </div>
                    
                    <!-- Fire Protection Systems -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Protection Systems</strong>
                    </div>
                    <div style="display:flex; gap:1em; flex-wrap:wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="smoke-detector-present"> Smoke Detector Present
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="smoke-detector-working"> Smoke Detector Working
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="smoke-detector-activated"> Smoke Detector Activated
                        </label>
                    </div>
                    
                    <div style="display:flex; gap:1em; flex-wrap:wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="sprinkler-system-present"> Sprinkler System Present
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="sprinkler-system-activated"> Sprinkler System Activated
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="sprinkler-system-effective"> Sprinkler System Effective
                        </label>
                    </div>
                    
                    <!-- Suppression Activities -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Suppression Activities</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-fire-extinguished">
                            Fire Extinguished
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-fire-controlled">
                            Fire Controlled
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-ventilation">
                            Ventilation Performed
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-overhaul">
                            Overhaul Performed
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-defensive">
                            Defensive Operations
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-offensive">
                            Offensive Operations
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-exposure-protection">
                            Exposure Protection
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Water Used (gallons):
                            <input type="number" name="water-used" min="0" step="any" style="width: 100px;" inputmode="numeric">
                        </label>
                        <label>
                            Foam Used:
                            <select name="foam-used" style="width: 120px;">
                                <option value="">Select</option>
                                <option value="Class A">Class A</option>
                                <option value="Class B">Class B</option>
                                <option value="AFFF">AFFF</option>
                                <option value="None">None</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Damage Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Damage Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Structure Damage ($):
                            <input type="number" name="structure-damage-value" min="0" step="any" style="width: 120px;" inputmode="numeric">
                        </label>
                        <label>
                            Contents Damage ($):
                            <input type="number" name="contents-damage-value" min="0" step="any" style="width: 120px;" inputmode="numeric">
                        </label>
                        <label>
                            Total Loss ($):
                            <input type="number" name="total-loss-value" min="0" step="any" style="width: 120px;" inputmode="numeric">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-total-loss">
                            Total Loss
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-habitable">
                            Structure Habitable
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-utilities-secured">
                            Utilities Secured
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-boarded">
                            Structure Secured/Boarded
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-fire-marshal-notified">
                            Fire Marshal
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="structure-police-notified">
                            Law Enforcement
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-utility-notified">
                            Utility Companies
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-red-cross">
                            Red Cross
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-insurance-notified">
                            Insurance Company
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-ema-notified">
                            County EMA
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="structure-building-inspector">
                            Building Inspector
                        </label>
                    </div>
                    
                    <!-- Vehicle Involvement -->
                    <div style="margin: 0.5em 0;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" id="structure-fire-vehicle-involved" name="structure-fire-vehicle-involved">
                            Vehicle Involved
                        </label>
                    </div>
                    <!-- Container for dynamic vehicle fields -->
                    <div id="structure-fire-vehicles-container"></div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Suppression Tactics/Strategy:<br>
                        <textarea name="structure-fire-tactics" rows="3" style="width: 100%; max-width: 600px;" placeholder="Attack methods, ventilation strategy, water supply, crew assignments..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="structure-fire-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, challenges encountered, follow-up needed, lessons learned..."></textarea>
                    </label>
                </fieldset>

                <!-- Motor Vehicle Collision Details (hidden by default) -->
                <fieldset id="mvc-section" style="display:none;">
                    <legend>Motor Vehicle Collision Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #e65100; font-weight: bold; margin-bottom: 0.5em;">
                            ðŸš— Traffic Safety Reminder
                        </div>
                        <div style="font-size: 0.9em; color: #e65100;">
                            Establish traffic control and scene safety first. Be aware of ongoing traffic hazards, fluid spills, and potential secondary collisions. Use proper PPE and high-visibility gear.
                        </div>
                    </div>
                    
                    <!-- Incident Classification -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Classification</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="mvc-type" value="Property Damage Only"> Property Damage Only
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="mvc-type" value="Personal Injury"> Personal Injury
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="mvc-type" value="Fatality"> Fatality
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="mvc-type" value="Unknown"> Unknown
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-hit-run"> Hit and Run
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-fire"> Vehicle Fire
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-entrapment"> Entrapment
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-ejection"> Ejection
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-airbags-deployed"> Airbags Deployed
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-seatbelts"> Seatbelts in Use
                        </label>
                    </div>
                    
                    <!-- Environmental Conditions -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Environmental Conditions</strong>
                    </div>
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Weather:
                            <select name="mvc-weather" style="width: 140px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Cloudy">Cloudy</option>
                                <option value="Rain">Rain</option>
                                <option value="Heavy Rain">Heavy Rain</option>
                                <option value="Snow">Snow</option>
                                <option value="Heavy Snow">Heavy Snow</option>
                                <option value="Fog">Fog</option>
                                <option value="Sleet">Sleet</option>
                                <option value="Wind">High Wind</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Road Conditions:
                            <select name="mvc-road-conditions" style="width: 140px;">
                                <option value="">Select Conditions</option>
                                <option value="Dry">Dry</option>
                                <option value="Wet">Wet</option>
                                <option value="Snow Covered">Snow Covered</option>
                                <option value="Icy">Icy</option>
                                <option value="Muddy">Muddy</option>
                                <option value="Gravel">Gravel</option>
                                <option value="Construction Zone">Construction Zone</option>
                                <option value="Debris">Debris on Road</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Light Conditions:
                            <select name="mvc-light" style="width: 140px;">
                                <option value="">Select Light</option>
                                <option value="Daylight">Daylight</option>
                                <option value="Dawn">Dawn</option>
                                <option value="Dusk">Dusk</option>
                                <option value="Dark - Street Lights">Dark - Street Lights</option>
                                <option value="Dark - No Street Lights">Dark - No Street Lights</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Vehicle Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Vehicle Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Number of Vehicles:
                            <input type="number" name="mvc-num-vehicles" id="mvc-num-vehicles" min="1" max="10" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Type of Collision:
                            <select name="mvc-collision-type" style="width: 160px;">
                                <option value="">Select Type</option>
                                <option value="Head-On">Head-On</option>
                                <option value="Rear-End">Rear-End</option>
                                <option value="Side Impact">Side Impact</option>
                                <option value="Sideswipe">Sideswipe</option>
                                <option value="Rollover">Rollover</option>
                                <option value="Fixed Object">Fixed Object</option>
                                <option value="Pedestrian">Pedestrian</option>
                                <option value="Bicycle">Bicycle</option>
                                <option value="Animal">Animal</option>
                                <option value="Multi-Vehicle">Multi-Vehicle</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Dynamic vehicle fields container -->
                    <div id="mvc-vehicles-container"></div>
                    
                    <!-- Injuries and Medical -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Injuries & Medical Response</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-injuries"> Injuries Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-fatalities"> Fatalities
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-ems-transport"> EMS Transport
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-refusal"> Medical Refusal
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Number Injured:
                            <input type="number" name="mvc-injured-count" min="0" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Number Transported:
                            <input type="number" name="mvc-transported-count" min="0" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Treating Hospital:
                            <input type="text" name="mvc-hospital" style="width: 160px;" placeholder="Hospital name">
                        </label>
                    </div>
                    
                    <!-- Extrication and Rescue -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Extrication & Rescue Operations</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-extrication" id="mvc-extrication-checkbox"> Extrication Required
                        </label>
                    </div>
                    
                    <!-- Extrication Technique Dropdown (hidden by default) -->
                    <div id="mvc-extrication-technique-section" style="display: none; margin-bottom: 1em;">
                        <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Extrication Technique:
                                <select name="mvc-extrication-technique" id="mvc-extrication-technique" style="width: 250px;" onchange="toggleMVCExtricationOther()">
                                    <option value="">Select Technique</option>
                                    <option value="Door Pop">Door Pop</option>
                                    <option value="B-Post Blowout (Side Removal)">B-Post Blowout (Side Removal)</option>
                                    <option value="3rd Door (2-door coupe)">3rd Door (2-door coupe)</option>
                                    <option value="Roof Removal">Roof Removal</option>
                                    <option value="Roof Flap (Partial Roof Removal)">Roof Flap (Partial Roof Removal)</option>
                                    <option value="Dash Lift">Dash Lift</option>
                                    <option value="Steering Column Displacement">Steering Column Displacement</option>
                                    <option value="Glass Removal">Glass Removal</option>
                                    <option value="Floor Pan Cut">Floor Pan Cut</option>
                                    <option value="Seat Removal/Displacement">Seat Removal/Displacement</option>
                                    <option value="Heavy Extrication Required (See Notes)">Heavy Extrication Required (See Notes)</option>
                                    <option value="Other">Other</option>
                                </select>
                            </label>
                            <input type="text" name="mvc-extrication-other" id="mvc-extrication-other" placeholder="Please specify technique" style="display:none; width: 200px;">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-stabilization"> Vehicle Stabilization
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-battery-disconnect"> Battery Disconnect
                        </label>
                    </div>
                    
                    <!-- Hazards and Scene Safety -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Hazards & Scene Safety</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-hazmat"> HazMat Involved
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-fluid-cleanup"> Fluid Cleanup
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-debris-removal"> Debris Removal
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-traffic-control"> Traffic Control
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-road-closure"> Road Closure
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-lane-restriction"> Lane Restriction
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-detour"> Detour Established
                        </label>
                    </div>
                    
                    <!-- Towing and Recovery -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Towing & Recovery</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-towing-required"> Towing Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-heavy-duty-tow"> Heavy Duty Tow
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Tow Company:
                            <select name="mvc-tow-company" style="width: 160px;">
                                <option value="">Select Company</option>
                                <option value="Goodwill">Goodwill</option>
                                <option value="Fletcher's">Fletcher's</option>
                                <option value="Hanover">Hanover</option>
                                <option value="Smith's">Smith's</option>
                                <option value="Gaylock's">Gaylock's</option>
                                <option value="Duba's">Duba's</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-police-notified"> Law Enforcement
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="mvc-ems-notified"> EMS/Ambulance
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-dot-notified"> DOT/Highway Dept
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-coroner"> Coroner
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="mvc-utility-notified"> Utility Companies
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Response Actions Taken:<br>
                        <textarea name="mvc-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Traffic control, extrication methods, medical care provided, scene stabilization..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="mvc-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, contributing factors, equipment used, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- ATV Accident/Trail Rescue Details (hidden by default) -->
                <fieldset id="atv-section" style="display:none;">
                    <legend>ATV Accident/Trail Rescue Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #e65100; font-weight: bold; margin-bottom: 0.5em;">
                            ðŸžï¸ðŸš‘ Trail Rescue Safety Reminder
                        </div>
                        <div style="font-size: 0.9em; color: #e65100;">
                            Assess terrain stability and weather conditions. Consider access routes for rescue vehicles. Be aware of potential for additional falls or rollovers. Ensure proper PPE for rough terrain.
                        </div>
                    </div>
                    
                    <!-- Incident Classification -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Type</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="atv-incident-type" value="ATV Accident"> ATV Accident
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="atv-incident-type" value="Trail Rescue"> Trail Rescue
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="atv-incident-type" value="Lost Person"> Lost Person
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="atv-incident-type" value="Medical Emergency"> Medical Emergency
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-multiple-victims"> Multiple Victims
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-entrapment"> Entrapment/Pinned
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-fire"> Vehicle Fire
                        </label>
                    </div>
                    
                    <!-- Location Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Location Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.4em;">
                            <input type="checkbox" id="atv-hmt-checkbox" name="atv-hmt-trails">
                            <span style="font-weight:bold;">HMT Trails</span>
                        </label>
                        <label>
                            GPS Coordinates:
                            <input type="text" name="atv-gps-coords" id="atv-gps-coords" style="width: 200px;" placeholder="Lat, Long or GPS reading">
                        </label>
                        <button type="button" id="get-atv-gps" style="margin-bottom: 0.2em;">Get GPS Location</button>
                    </div>
                    
                    <fieldset id="atv-hmt-section" class="subsection-fieldset" style="display:none;">
                        <legend>HMT Trail System Details</legend>
                        <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                            <label>
                                Trail System:
                                <select name="atv-hmt-trail-system" style="width: 150px;">
                                    <option value="">Select System</option>
                                    <option value="Buffalo Mountain">Buffalo Mountain</option>
                                    <option value="Devil Anse">Devil Anse</option>
                                    <option value="Rockhouse">Rockhouse</option>
                                    <option value="Other">Other</option>
                                </select>
                            </label>
                            <label>
                                Trail Number:
                                <input type="number" name="atv-hmt-trail-number" min="10" max="999" style="width: 80px;" inputmode="numeric" placeholder="Trail #">
                            </label>
                            <label>
                                Nearest Marker/Landmark:
                                <input type="text" name="atv-hmt-landmark" style="width: 200px;" placeholder="Mile marker, landmark, etc.">
                            </label>
                        </div>
                    </fieldset>
                    
                    <!-- Vehicle Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Vehicle Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Number of Vehicles:
                            <input type="number" name="atv-num-vehicles" id="atv-num-vehicles" min="1" max="10" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Vehicle Type:
                            <select name="atv-vehicle-type" style="width: 140px;">
                                <option value="">Select Type</option>
                                <option value="ATV/Quad">ATV/Quad</option>
                                <option value="UTV/Side-by-Side">UTV/Side-by-Side</option>
                                <option value="Dirt Bike">Dirt Bike</option>
                                <option value="Motorcycle">Motorcycle</option>
                                <option value="Mountain Bike">Mountain Bike</option>
                                <option value="Hiking">Hiking (No Vehicle)</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Dynamic vehicle fields container -->
                    <div id="atv-vehicles-container"></div>
                    
                    <!-- Rescue Operations -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Rescue Operations</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-rope-rescue"> Rope Rescue
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-vehicle-extrication"> Vehicle Extrication
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-atv-access"> ATV Access Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-hiking-access"> Hiking Access Only
                        </label>
                    </div>
                    
                    <!-- Environmental Conditions -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Environmental Conditions</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Weather:
                            <select name="atv-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Rainy">Rainy</option>
                                <option value="Foggy">Foggy</option>
                                <option value="Snowy">Snowy</option>
                                <option value="Windy">Windy</option>
                                <option value="Hot">Hot</option>
                                <option value="Cold">Cold</option>
                            </select>
                        </label>
                        <label>
                            Visibility:
                            <select name="atv-visibility" style="width: 120px;">
                                <option value="">Select</option>
                                <option value="Good">Good</option>
                                <option value="Limited">Limited</option>
                                <option value="Poor">Poor</option>
                                <option value="Dark">Dark</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Response Resources -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Response Resources</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="atv-ems-transport"> EMS Transport
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="atv-air-medical"> Air Medical
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-law-enforcement"> Law Enforcement
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-dnr-contacted"> DNR/Game Warden
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="atv-tow-service"> Tow/Recovery Service
                        </label>
                    </div>
                    
                    <!-- Response Times -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Time to Reach Scene:
                            <input type="text" name="atv-response-time" style="width: 80px;" placeholder="HH:MM">
                        </label>
                        <label>
                            Transport Time:
                            <input type="text" name="atv-transport-time" style="width: 80px;" placeholder="HH:MM">
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Rescue Actions/Methods Used:<br>
                        <textarea name="atv-rescue-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Describe rescue methods, equipment used, patient care provided, access route..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="atv-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, lessons learned, equipment recommendations, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Brush Fire Details (hidden by default) -->
                <fieldset id="brush-fire-section" style="display:none;">
                    <legend>Brush Fire Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #856404; font-weight: bold; margin-bottom: 0.5em;">
                            ðŸ”¥ Wildfire Safety Reminder
                        </div>
                        <div style="font-size: 0.9em; color: #856404;">
                            Monitor wind conditions and escape routes. Be aware of spot fires and changing conditions. Consider air quality and smoke inhalation hazards.
                        </div>
                    </div>
                    
                    <!-- Fire Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Fire Size (Acres):
                            <input type="number" name="acres-burned" min="0" step="0.01" style="width: 100px;" inputmode="numeric" placeholder="0.00">
                        </label>
                        <label>
                            Fire Type:
                            <select name="brush-fire-type" style="width: 140px;">
                                <option value="">Select Type</option>
                                <option value="Grass Fire">Grass Fire</option>
                                <option value="Brush Fire">Brush Fire</option>
                                <option value="Forest Fire">Forest Fire</option>
                                <option value="Wildland Fire">Wildland Fire</option>
                                <option value="Trash/Debris">Trash/Debris</option>
                                <option value="Agricultural">Agricultural</option>
                            </select>
                        </label>
                        <label>
                            Fuel Type:
                            <select name="brush-fire-fuel-type" style="width: 140px;">
                                <option value="">Select Fuel</option>
                                <option value="Light Grass">Light Grass</option>
                                <option value="Heavy Grass">Heavy Grass</option>
                                <option value="Brush/Shrub">Brush/Shrub</option>
                                <option value="Timber/Trees">Timber/Trees</option>
                                <option value="Mixed">Mixed</option>
                                <option value="Slash/Debris">Slash/Debris</option>
                            </select>
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Rate of Spread:
                            <select name="brush-fire-spread-rate" style="width: 120px;">
                                <option value="">Select Rate</option>
                                <option value="Slow">Slow</option>
                                <option value="Moderate">Moderate</option>
                                <option value="Fast">Fast</option>
                                <option value="Extreme">Extreme</option>
                                <option value="Contained">Contained</option>
                            </select>
                        </label>
                        <label>
                            Wind Conditions:
                            <select name="brush-fire-wind" style="width: 120px;">
                                <option value="">Select Wind</option>
                                <option value="Calm (0-5 mph)">Calm (0-5 mph)</option>
                                <option value="Light (6-15 mph)">Light (6-15 mph)</option>
                                <option value="Moderate (16-25 mph)">Moderate (16-25 mph)</option>
                                <option value="Strong (26+ mph)">Strong (26+ mph)</option>
                                <option value="Variable">Variable</option>
                            </select>
                        </label>
                        <label>
                            Weather:
                            <select name="brush-fire-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear/Dry">Clear/Dry</option>
                                <option value="Humid">Humid</option>
                                <option value="Rain">Rain</option>
                                <option value="Drought">Drought</option>
                                <option value="High Temperature">High Temperature</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Cause and Origin -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Cause & Origin</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Suspected Cause:
                            <select name="brush-fire-cause" style="width: 180px;">
                                <option value="">Select Cause</option>
                                <option value="Lightning">Lightning</option>
                                <option value="Campfire">Campfire</option>
                                <option value="Controlled Burn">Controlled Burn</option>
                                <option value="Arson">Arson</option>
                                <option value="Vehicle">Vehicle</option>
                                <option value="Power Line">Power Line</option>
                                <option value="Equipment">Equipment</option>
                                <option value="Cigarette">Cigarette</option>
                                <option value="Debris Burning">Debris Burning</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Under Investigation">Under Investigation</option>
                            </select>
                        </label>
                        <label>
                            Point of Origin:
                            <input type="text" name="brush-fire-origin" style="width: 200px;" placeholder="Specific location/landmark">
                        </label>
                    </div>
                    
                    <!-- Threats and Hazards -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Threats & Hazards</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-structure-threat">
                            Structure Threatened
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-evacuation">
                            Evacuation Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-road-closure">
                            Road Closure
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-power-lines">
                            Power Lines Involved
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-spot-fires">
                            Spot Fires
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-smoke-hazard">
                            Smoke Hazard
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-vehicle-access">
                            Poor Vehicle Access
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-water-supply">
                            Limited Water Supply
                        </label>
                    </div>
                    
                    <!-- Suppression Activities -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Suppression Activities</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-extinguished" id="brush-fire-extinguished">
                            Fire Extinguished
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-contained">
                            Fire Contained
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-water-shuttle">
                            Water Shuttle Operations
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-foam-used">
                            Foam Application
                        </label>
                    </div>
                    
                    <div id="brush-fire-gallons-section" style="display: none; margin-top: 0.5em;">
                        <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap;">
                            <label>
                                Extinguishment Method:
                                <select name="brush-fire-extinguishment-method" id="brush-fire-extinguishment-method" style="width: 140px;">
                                    <option value="">Select Method</option>
                                    <option value="Water">Water</option>
                                    <option value="Foam">Foam</option>
                                    <option value="Dirt/Sand">Dirt/Sand</option>
                                    <option value="Hand Tools">Hand Tools</option>
                                    <option value="Combination">Combination</option>
                                </select>
                            </label>
                            <div id="brush-fire-gallons-input" style="display: none;">
                                <label>
                                    Water Used (Gallons):
                                    <input type="number" name="brush-fire-gallons-used" min="0" step="50" style="width: 120px;" inputmode="numeric">
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-forestry-notified">
                            WV Forestry Division
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="brush-fire-law-notified">
                            Law Enforcement
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-county-ema">
                            County EMA
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-state-fire">
                            State Fire Marshal
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-doh-notified">
                            DOH (Road Closure)
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="brush-fire-utility-notified">
                            Utility Companies
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Suppression Tactics Used:<br>
                        <textarea name="brush-fire-tactics" rows="3" style="width: 100%; max-width: 600px;" placeholder="Direct attack, indirect attack, backburning, firebreaks, aircraft support..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="brush-fire-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, weather changes, damage assessment, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- EMS Assist/1st Response Details (hidden by default) -->
                <fieldset id="ems-section" style="display:none;">
                    <legend>EMS Assist/1st Response Details</legend>
                    
                    <!-- Information Note -->
                    <div style="background-color: #e3f2fd; border: 1px solid #1976d2; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <p style="margin: 0; color: #1976d2; font-weight: bold; font-size: 14px;">
                            <strong>Note:</strong> Complete as much information as possible. Fields marked with checkboxes will show additional options when selected. 
                            For medical emergencies, focus on patient condition and actions taken until EMS arrival.
                        </p>
                    </div>
                    
                    <!-- Patient Demographics -->
                    <div style="margin-bottom: 1em;">
                        <h4 style="margin-bottom: 0.5em; color: #d32f2f; font-weight: bold;">Patient Information</h4>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Patient Name:
                                <input type="text" name="ems-patient-name">
                            </label>
                            <label>
                                Patient Age:
                                <input type="number" name="ems-patient-age" min="0" max="120" inputmode="numeric">
                            </label>
                            <label>
                                Gender:
                                <select name="ems-patient-gender">
                                    <option value="">Select...</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Unknown">Unknown</option>
                                </select>
                            </label>
                        </div>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-top: 0.5em;">
                            <label>
                                Patient Phone:
                                <input type="tel" name="ems-patient-phone" placeholder="(xxx) xxx-xxxx">
                            </label>
                            <label>
                                Emergency Contact Name:
                                <input type="text" name="ems-emergency-contact" placeholder="Contact name">
                            </label>
                            <label>
                                Emergency Contact Phone:
                                <input type="tel" name="ems-emergency-contact-phone" placeholder="(xxx) xxx-xxxx">
                            </label>
                        </div>
                    </div>

                    <!-- Incident Details -->
                    <div style="margin-bottom: 1em;">
                        <h4 style="margin-bottom: 0.5em; color: #d32f2f; font-weight: bold;">Incident Details</h4>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Nature of Call:
                                <select name="ems-nature-dropdown" onchange="toggleEMSNatureOther()">
                                    <option value="">Select...</option>
                                    <option value="Chest Pain">Chest Pain</option>
                                    <option value="Difficulty Breathing">Difficulty Breathing</option>
                                    <option value="Fall">Fall</option>
                                    <option value="Unconscious/Unresponsive">Unconscious/Unresponsive</option>
                                    <option value="Cardiac Arrest">Cardiac Arrest</option>
                                    <option value="Stroke">Stroke</option>
                                    <option value="Seizure">Seizure</option>
                                    <option value="Allergic Reaction">Allergic Reaction</option>
                                    <option value="Diabetic Emergency">Diabetic Emergency</option>
                                    <option value="Overdose">Overdose</option>
                                    <option value="Trauma">Trauma</option>
                                    <option value="Other">Other</option>
                                </select>
                            </label>
                            <label id="ems-nature-other-label" style="display: none;">
                                Specify Other:
                                <input type="text" name="ems-nature-other">
                            </label>
                            <label id="ems-fall-height-label" style="display: none;">
                                Fall Height (feet):
                                <input type="number" name="ems-fall-height" min="0" max="999" step="1" style="width: 80px;" inputmode="numeric">
                            </label>
                            <label>
                                Severity Level:
                                <select name="ems-severity">
                                    <option value="">Select...</option>
                                    <option value="Minor">Minor</option>
                                    <option value="Moderate">Moderate</option>
                                    <option value="Serious">Serious</option>
                                    <option value="Critical">Critical</option>
                                </select>
                            </label>
                        </div>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-top: 0.5em;">
                            <label>
                                Mechanism of Injury:
                                <input type="text" name="ems-mechanism" placeholder="e.g., Fall from height, MVA">
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                                <input type="checkbox" name="ems-conscious">
                                Patient Conscious/Alert
                            </label>
                        </div>
                    </div>

                    <!-- Actions Performed -->
                    <div style="margin-bottom: 1em;">
                        <h4 style="margin-bottom: 0.5em; color: #d32f2f; font-weight: bold;">Actions Performed</h4>
                        <div style="display: flex; flex-direction: column; gap: 0.3em; align-items: flex-start;">
                            <div style="display: flex; flex-wrap: wrap; gap: 1.5em;">
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-cpr">
                                    CPR Performed
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-aed">
                                    AED Used
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-bleeding">
                                    Bleeding Control
                                </label>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 1.5em; margin-top: 0.3em;">
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-immobilization">
                                    Spinal Immobilization
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-vitals">
                                    Vital Signs Taken
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.3em;">
                                    <input type="checkbox" name="ems-action-comfort">
                                    Patient Comfort/Reassurance
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- EMS Agency Information -->
                    <div style="margin-bottom: 1em;">
                        <h4 style="margin-bottom: 0.5em; color: #d32f2f; font-weight: bold;">EMS Agency Information</h4>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                EMS Agency:
                                <select name="ems-agency" onchange="toggleEMSAgencyOther()">
                                    <option value="">Select...</option>
                                    <option value="STAT">STAT</option>
                                    <option value="Patriot">Patriot</option>
                                    <option value="Appalachain First Response">Appalachain First Response</option>
                                    <option value="LEASA">LEASA</option>
                                    <option value="Other">Other</option>
                                </select>
                            </label>
                            <label id="ems-agency-other-label" style="display: none;">
                                Specify Other EMS Agency:
                                <input type="text" name="ems-agency-other" placeholder="Enter agency name">
                            </label>
                            <label>
                                EMS Unit Number:
                                <input type="number" name="ems-unit-number" min="0" max="9999" maxlength="4" style="width: 80px;" inputmode="numeric">
                            </label>
                            <label>
                                EMS Arrival Time:
                                <input type="text" name="ems-arrival-time" placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" inputmode="numeric">
                            </label>
                        </div>
                    </div>

                    <!-- Patient Disposition -->
                    <div style="margin-bottom: 1em;">
                        <h4 style="margin-bottom: 0.5em; color: #d32f2f; font-weight: bold;">Patient Disposition</h4>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end;">
                            <label>
                                Patient Status:
                                <select name="ems-disposition" onchange="toggleEMSTransport()">
                                    <option value="">Select...</option>
                                    <option value="Transported by EMS">Transported by EMS</option>
                                    <option value="Refused Transport">Refused Transport</option>
                                    <option value="Treated and Released">Treated and Released</option>
                                    <option value="Released to Family">Released to Family</option>
                                    <option value="DOA">DOA (Dead on Arrival)</option>
                                    <option value="No Patient Found">No Patient Found</option>
                                </select>
                            </label>
                            <label id="ems-transport-destination-label" style="display: none;">
                                Transport Destination:
                                <input type="text" name="ems-transport-destination" placeholder="Hospital name">
                            </label>
                        </div>
                    </div>

                    <!-- Additional Action Taken -->
                    <label style="margin-bottom: 0.5em;">
                        Additional Action Taken:<br>
                        <textarea name="ems-action-taken" rows="3" cols="50" style="width: 100%; max-width: 600px;"></textarea>
                    </label>

                    <!-- Notes -->
                    <label style="margin-top: 0.5em;">
                        Notes:<br>
                        <textarea name="ems-notes" rows="3" cols="50" style="width: 100%; max-width: 600px;"></textarea>
                    </label>
                </fieldset>

                <!-- Electrical Fire Details (hidden by default) -->
                <fieldset id="electrical-fire-section" style="display:none;">
                    <legend>Electrical Fire Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            âš¡ Electrical Safety Warning
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Assume all electrical equipment is energized until power is confirmed off. Use proper lockout/tagout procedures. Be aware of potential arc flash hazards.
                        </div>
                    </div>
                    
                    <!-- Critical Warning -->
                    <div style="font-weight:bold; text-decoration:underline; text-decoration-style:double; color:red; margin-bottom:1em; padding: 8px; border: 2px solid #ff0000; background-color: #fff5f5;">
                        âš ï¸ USE STRUCTURE FIRE CALL TYPE IF DAMAGE IS SEVERE OR FIRE HAS EXTENDED TO STRUCTURE! âš ï¸
                    </div>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Equipment Type:
                            <select name="electrical-fire-equipment-type" style="width: 160px;" onchange="toggleElectricalFireOther()">
                                <option value="">Select Equipment</option>
                                <option value="Panel/Breaker Box">Panel/Breaker Box</option>
                                <option value="Outlet/Receptacle">Outlet/Receptacle</option>
                                <option value="Wiring">Wiring</option>
                                <option value="Appliance">Appliance</option>
                                <option value="Light Fixture">Light Fixture</option>
                                <option value="Extension Cord">Extension Cord</option>
                                <option value="Generator">Generator</option>
                                <option value="HVAC System">HVAC System</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label id="electrical-fire-equipment-other-label" style="display: none;">
                            Specify Other Equipment:
                            <input type="text" name="electrical-fire-equipment-other" style="width: 160px;" placeholder="Enter equipment type">
                        </label>
                        <label>
                            Location in Building:
                            <input type="text" name="electrical-fire-location" style="width: 160px;" placeholder="Room, area, etc.">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Fire Cause:
                            <select name="electrical-fire-cause" style="width: 160px;">
                                <option value="">Select Cause</option>
                                <option value="Overload">Overload</option>
                                <option value="Short Circuit">Short Circuit</option>
                                <option value="Arc Fault">Arc Fault</option>
                                <option value="Ground Fault">Ground Fault</option>
                                <option value="Poor Connection">Poor Connection</option>
                                <option value="Insulation Failure">Insulation Failure</option>
                                <option value="Equipment Failure">Equipment Failure</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Voltage Level:
                            <select name="electrical-fire-voltage" style="width: 140px;">
                                <option value="">Select Voltage</option>
                                <option value="120V">120V (Household)</option>
                                <option value="240V">240V (Household)</option>
                                <option value="480V">480V (Commercial)</option>
                                <option value="High Voltage">High Voltage (>600V)</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Safety Actions Taken -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Safety Actions Taken</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-breaker-panel">
                            Shut Off Main Breaker
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-meter-pulled">
                            Pulled Meter
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-generator-disabled">
                            Disabled Generator
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-area-secured">
                            Area Secured
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-utility-contacted">
                            Utility Company Contacted
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-electrician-recommended">
                            Electrician Recommended
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-co2-used">
                            Type C Extinguisher Used
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-water-used">
                            Water Used (Power Shut-Off)
                        </label>
                    </div>
                    
                    <!-- Hazard Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Hazard Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-active-fire">
                            Active Fire Present
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-smoke">
                            Smoke/Burning Smell
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-sparking">
                            Sparking/Arcing
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-heat">
                            Excessive Heat
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-structure-threat">
                            Structure Threatened
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-power-outage">
                            Power Outage
                        </label>
                    </div>
                    
                    <!-- Equipment Information -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Equipment Age (if known):
                            <select name="electrical-fire-equipment-age" style="width: 140px;">
                                <option value="">Select Age</option>
                                <option value="New (0-5 years)">New (0-5 years)</option>
                                <option value="Moderate (6-15 years)">Moderate (6-15 years)</option>
                                <option value="Older (16-30 years)">Older (16-30 years)</option>
                                <option value="Very Old (30+ years)">Very Old (30+ years)</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Equipment Manufacturer:
                            <input type="text" name="electrical-fire-manufacturer" style="width: 160px;" placeholder="Brand/manufacturer">
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="electrical-fire-utility-notified">
                            Utility Company
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-inspector-notified">
                            Electrical Inspector
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-code-enforcement">
                            Code Enforcement
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-insurance-notified">
                            Property Owner/Insurance
                        </label>
                    </div>
                    
                    <!-- Recommendations -->
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-electrician-required">
                            Licensed Electrician Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-inspection-required">
                            Electrical Inspection Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="electrical-fire-no-power-restore">
                            Do Not Restore Power
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Actions Taken:<br>
                        <textarea name="electrical-fire-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Power isolation, suppression methods, safety measures taken..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="electrical-fire-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Equipment condition, damage assessment, follow-up recommendations..."></textarea>
                    </label>
                </fieldset>

                <!-- Fire Alarm Details (hidden by default) -->
                <fieldset id="fire-alarm-section" style="display:none;">
                    <legend>Fire Alarm Details</legend>
                    
                    <!-- Alarm Use Type -->
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="fire-alarm-use" value="Residential Alarm">
                            Residential Alarm
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="fire-alarm-use" value="Commercial Alarm">
                            Commercial Alarm
                        </label>
                    </div>

                    <!-- Alarm Details -->
                    <div style="display: flex; gap: 2em; align-items: flex-end; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label>
                            Alarm Type:
                            <select name="fire-alarm-type" onchange="toggleFireAlarmOther()">
                                <option value="">Select...</option>
                                <option value="Automatic">Automatic</option>
                                <option value="False Alarm">False Alarm</option>
                                <option value="Manual Pull">Manual Pull</option>
                                <option value="Nuisance Alarm">Nuisance Alarm</option>
                                <option value="Sprinkler Activation">Sprinkler Activation</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label id="fire-alarm-type-other-label" style="display: none;">
                            Specify Other Alarm Type:
                            <input type="text" name="fire-alarm-type-other" placeholder="Enter alarm type">
                        </label>
                        <label>
                            System Type:
                            <select name="fire-alarm-system-type">
                                <option value="">Select...</option>
                                <option value="Smoke Detection">Smoke Detection</option>
                                <option value="Heat Detection">Heat Detection</option>
                                <option value="CO Detection">CO Detection</option>
                                <option value="Combination">Combination</option>
                                <option value="Sprinkler System">Sprinkler System</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>

                    <!-- Additional Information -->
                    <div style="display: flex; gap: 2em; align-items: flex-end; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label>
                            Zone/Location:
                            <input type="text" name="fire-alarm-zone" placeholder="e.g., Zone 3, Kitchen">
                        </label>
                        <label>
                            Monitoring Company:
                            <input type="text" name="fire-alarm-monitoring-company" placeholder="Company name">
                        </label>
                        <label>
                            Cause (if known):
                            <input type="text" name="fire-alarm-cause">
                        </label>
                    </div>

                    <!-- Action Checkboxes -->
                    <div style="display: flex; flex-direction: column; gap: 0.5em; align-items: flex-start; margin-bottom: 0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-alarm-nothing-found">
                            Nothing Found
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-alarm-panel-reset">
                            Alarm Panel Reset
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-alarm-fd-contact">
                            Fire Department Contact Made
                        </label>
                    </div>

                    <!-- Action Taken and Notes -->
                    <label>
                        Action Taken:<br>
                        <textarea name="fire-alarm-action-taken" rows="2" cols="40"></textarea>
                    </label>
                    <label style="margin-top: 0.5em;">
                        Notes:<br>
                        <textarea name="fire-alarm-notes" rows="2" cols="40"></textarea>
                    </label>
                </fieldset>

                <!-- Fire Investigation Details (hidden by default) -->
                <fieldset id="fire-investigation-section" style="display:none;">
                    <legend>Fire Investigation Details</legend>
                    
                    <!-- Investigation Status -->
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-nothing-found">
                            Nothing Found
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-suspicious">
                            Suspicious Origin
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-arson">
                            Arson Suspected
                        </label>
                    </div>

                    <!-- Investigation Details -->
                    <div style="display: flex; gap: 2em; align-items: flex-end; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label>
                            Point of Origin:
                            <input type="text" name="fire-investigation-origin" placeholder="Location where fire started">
                        </label>
                        <label>
                            Cause Classification:
                            <select name="fire-investigation-classification">
                                <option value="">Select...</option>
                                <option value="Accidental">Accidental</option>
                                <option value="Natural">Natural</option>
                                <option value="Intentional">Intentional</option>
                                <option value="Undetermined">Undetermined</option>
                                <option value="Under Investigation">Under Investigation</option>
                            </select>
                        </label>
                        <label>
                            Heat Source:
                            <select name="fire-investigation-heat-source">
                                <option value="">Select...</option>
                                <option value="Electrical">Electrical</option>
                                <option value="Smoking Materials">Smoking Materials</option>
                                <option value="Cooking Equipment">Cooking Equipment</option>
                                <option value="Heating Equipment">Heating Equipment</option>
                                <option value="Lightning">Lightning</option>
                                <option value="Open Flame">Open Flame</option>
                                <option value="Chemical">Chemical</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>

                    <!-- Investigation Findings -->
                    <div style="display: flex; gap: 2em; align-items: flex-end; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label>
                            Cause Determined:
                            <input type="text" name="fire-investigation-cause" placeholder="Specific cause if known">
                        </label>
                        <label>
                            Responsible Party:
                            <input type="text" name="fire-investigation-responsible" placeholder="Name if applicable">
                        </label>
                        <label>
                            Ignition Factor:
                            <input type="text" name="fire-investigation-ignition" placeholder="What ignited the fire">
                        </label>
                    </div>

                    <!-- Investigation Actions -->
                    <div style="display: flex; flex-direction: column; gap: 0.5em; align-items: flex-start; margin-bottom: 0.5em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-photos-taken">
                            Photos Taken
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-evidence-collected">
                            Evidence Collected
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-law-enforcement">
                            Law Enforcement Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="fire-investigation-state-fire-marshal">
                            State Fire Marshal Contacted
                        </label>
                    </div>

                    <!-- Additional Information -->
                    <div style="display: flex; gap: 2em; align-items: flex-end; flex-wrap: wrap; margin-bottom: 0.5em;">
                        <label>
                            Investigator Name:
                            <input type="text" name="fire-investigation-investigator" placeholder="Lead investigator">
                        </label>
                        <label>
                            Investigation Status:
                            <select name="fire-investigation-status">
                                <option value="">Select...</option>
                                <option value="Ongoing">Ongoing</option>
                                <option value="Completed">Completed</option>
                                <option value="Referred">Referred to Other Agency</option>
                                <option value="Closed">Closed</option>
                            </select>
                        </label>
                    </div>

                    <!-- Action Taken and Notes -->
                    <label>
                        Action Taken:<br>
                        <textarea name="fire-investigation-action-taken" rows="3" cols="50" style="width: 100%; max-width: 600px;"></textarea>
                    </label>
                    <label style="margin-top: 0.5em;">
                        Investigation Notes:<br>
                        <textarea name="fire-investigation-notes" rows="3" cols="50" style="width: 100%; max-width: 600px;"></textarea>
                    </label>
                </fieldset>

                <!-- Illegal Burn Details (hidden by default) -->
                <fieldset id="illegal-burn-section" style="display:none;">
                    <legend>Illegal Burn Details</legend>
                    
                    <!-- Warning Notice -->
                    <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #856404; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Burn Ban Information
                        </div>
                        <div style="font-size: 0.9em; color: #856404; margin-bottom: 0.5em;">
                            Check current burn ban status and local ordinances. Document all violations and ensure proper notifications are made.
                        </div>
                        <div style="font-size: 0.85em; color: #856404; background-color: #f8f9fa; border: 1px solid #d1ecf1; border-radius: 3px; padding: 8px; margin-top: 0.5em;">
                            <strong>Burning Season Restrictions:</strong><br>
                            â€¢ <strong>Burning Season:</strong> March 1 - May 31 and October 1 - December 31<br>
                            â€¢ <strong>Time Restriction:</strong> Burning prohibited from 7:00 AM to 5:00 PM during burning season
                        </div>
                    </div>
                    
                    <!-- Burn Details -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Burn Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Burn Status:
                            <select name="illegal-burn-status" style="width: 150px;">
                                <option value="">Select Status</option>
                                <option value="Active Fire">Active Fire</option>
                                <option value="Smoldering">Smoldering</option>
                                <option value="Recently Extinguished">Recently Extinguished</option>
                                <option value="Cold Ashes">Cold Ashes</option>
                                <option value="Preparing to Burn">Preparing to Burn</option>
                            </select>
                        </label>
                        <label>
                            Burn Type:
                            <select name="illegal-burn-type" style="width: 150px;">
                                <option value="">Select Type</option>
                                <option value="Open Burning">Open Burning</option>
                                <option value="Barrel Burning">Barrel Burning</option>
                                <option value="Pile Burning">Pile Burning</option>
                                <option value="Brush/Debris">Brush/Debris</option>
                                <option value="Trash Burning">Trash Burning</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Material Being Burned:
                            <input type="text" name="illegal-burn-material" style="width: 200px;" placeholder="Describe materials burned">
                        </label>
                        <label>
                            Estimated Size:
                            <input type="text" name="illegal-burn-size" style="width: 100px;" placeholder="ft x ft or area">
                        </label>
                        <label>
                            Burn Duration:
                            <select name="illegal-burn-duration" style="width: 120px;">
                                <option value="">Select Duration</option>
                                <option value="Just Started">Just Started</option>
                                <option value="< 1 Hour">< 1 Hour</option>
                                <option value="1-4 Hours">1-4 Hours</option>
                                <option value="4+ Hours">4+ Hours</option>
                                <option value="Multiple Days">Multiple Days</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Violation Details -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Violation Information</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-burn-ban">
                            Burn Ban in Effect
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-no-permit">
                            No Burn Permit
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-prohibited-materials">
                            Prohibited Materials
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-unsafe-conditions">
                            Unsafe Conditions
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-too-close-structures">
                            Too Close to Structures
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-windy-conditions">
                            Windy Conditions
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-unattended">
                            Unattended Fire
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-nuisance-complaint">
                            Nuisance/Complaint
                        </label>
                    </div>
                    
                    <!-- Responsible Party Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Responsible Party</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Name:
                            <input type="text" name="illegal-burn-responsible-name" style="width: 180px;">
                        </label>
                        <label>
                            Phone:
                            <input type="tel" name="illegal-burn-responsible-phone" style="width: 120px;" placeholder="(000) 000-0000">
                        </label>
                        <label>
                            Relationship to Property:
                            <select name="illegal-burn-responsible-relation" style="width: 150px;">
                                <option value="">Select Relation</option>
                                <option value="Property Owner">Property Owner</option>
                                <option value="Tenant/Renter">Tenant/Renter</option>
                                <option value="Family Member">Family Member</option>
                                <option value="Contractor">Contractor</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Actions Taken -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Actions Taken</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-fire-extinguished">
                            Fire Extinguished
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-education-provided">
                            Education Provided
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-verbal-warning">
                            Verbal Warning Given
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-written-citation">
                            Written Citation Issued
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-forestry-notified">
                            Division of Forestry Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="illegal-burn-law-enforcement-notified">
                            Law Enforcement Notified
                        </label>
                    </div>
                    
                    <!-- Weather and Environmental Conditions -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Environmental Conditions</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Wind Conditions:
                            <select name="illegal-burn-wind" style="width: 120px;">
                                <option value="">Select Wind</option>
                                <option value="Calm">Calm</option>
                                <option value="Light Breeze">Light Breeze</option>
                                <option value="Moderate">Moderate</option>
                                <option value="Strong">Strong</option>
                                <option value="Very Windy">Very Windy</option>
                            </select>
                        </label>
                        <label>
                            Weather:
                            <select name="illegal-burn-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear/Dry">Clear/Dry</option>
                                <option value="Humid">Humid</option>
                                <option value="Partly Cloudy">Partly Cloudy</option>
                                <option value="Overcast">Overcast</option>
                                <option value="Recent Rain">Recent Rain</option>
                                <option value="Dry Conditions">Dry Conditions</option>
                            </select>
                        </label>
                        <label>
                            Fire Danger Level:
                            <select name="illegal-burn-fire-danger" style="width: 120px;">
                                <option value="">Select Level</option>
                                <option value="Low">Low</option>
                                <option value="Moderate">Moderate</option>
                                <option value="High">High</option>
                                <option value="Very High">Very High</option>
                                <option value="Extreme">Extreme</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Follow-up Required -->
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-follow-up-required">
                            Follow-up Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-repeat-offender">
                            Repeat Offender
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="illegal-burn-cooperative">
                            Cooperative Individual
                        </label>
                    </div>
                    
                    <!-- Additional Information -->
                    <label>
                        Action Taken:<br>
                        <textarea name="illegal-burn-action-taken" rows="3" cols="50" style="width: 100%; max-width: 600px;" placeholder="Describe specific actions taken, enforcement measures, education provided..."></textarea>
                    </label>
                    <label style="margin-top: 0.5em;">
                        Notes:<br>
                        <textarea name="illegal-burn-notes" rows="3" cols="50" style="width: 100%; max-width: 600px;" placeholder="Additional details, witness information, follow-up requirements..."></textarea>
                    </label>
                </fieldset>

                <!-- HazMat Details (hidden by default) -->
                <fieldset id="hazmat-section" style="display:none;">
                    <legend>HazMat Details</legend>
                    <div style="color: #cc0000; font-weight: bold; margin-bottom: 1em; padding: 10px; border: 2px solid #cc0000; background-color: #ffeeee;">
                        âš ï¸ WARNING: Follow all hazmat protocols and notification requirements for this incident type
                    </div>
                    
                    <!-- Material Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Material Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Material Type:
                            <select name="hazmat-material-type" id="hazmat-material-type" onchange="updateERGData()" style="width: 150px;">
                                <option value="">Select Type</option>
                                <option value="UN1203" data-un="1203" data-guide="128">Gasoline (UN1203)</option>
                                <option value="UN1202" data-un="1202" data-guide="128">Diesel Fuel (UN1202)</option>
                                <option value="UN1978" data-un="1978" data-guide="115">Propane (UN1978)</option>
                                <option value="UN1005" data-un="1005" data-guide="125">Ammonia, Anhydrous (UN1005)</option>
                                <option value="UN1017" data-un="1017" data-guide="117">Chlorine (UN1017)</option>
                                <option value="UN1075" data-un="1075" data-guide="115">Petroleum Gases, Liquefied (UN1075)</option>
                                <option value="UN1170" data-un="1170" data-guide="127">Ethanol (UN1170)</option>
                                <option value="UN1090" data-un="1090" data-guide="127">Acetone (UN1090)</option>
                                <option value="UN1993" data-un="1993" data-guide="128">Flammable Liquid, N.O.S. (UN1993)</option>
                                <option value="UN1760" data-un="1760" data-guide="154">Corrosive Liquid, N.O.S. (UN1760)</option>
                                <option value="UN2790" data-un="2790" data-guide="154">Acetic Acid Solution (UN2790)</option>
                                <option value="UN1824" data-un="1824" data-guide="154">Sodium Hydroxide Solution (UN1824)</option>
                                <option value="UN1830" data-un="1830" data-guide="154">Sulfuric Acid (UN1830)</option>
                                <option value="UN3082" data-un="3082" data-guide="171">Environmentally Hazardous Substance, Liquid (UN3082)</option>
                                <option value="Fuel Spill">Fuel Spill (General)</option>
                                <option value="Chemical Spill">Chemical Spill (General)</option>
                                <option value="Oil Spill">Oil Spill (General)</option>
                                <option value="Hydraulic Fluid">Hydraulic Fluid</option>
                                <option value="Antifreeze">Antifreeze/Coolant</option>
                                <option value="Paint/Solvents">Paint/Solvents</option>
                                <option value="Household Chemicals">Household Chemicals</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label id="hazmat-material-other-container" style="display: none;">
                            Specify Other:
                            <input type="text" name="hazmat-material-other" style="width: 120px;">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Material Name/Brand:
                            <input type="text" name="hazmat-material-name" id="hazmat-material-name" style="width: 150px;">
                        </label>
                        <label>
                            UN Number:
                            <div style="position: relative; display: inline-block;">
                                <input type="text" name="hazmat-un-number" id="hazmat-un-number" 
                                       oninput="handleUNSearch()" onchange="lookupUNNumber()" 
                                       onfocus="showUNSuggestions()" onblur="hideUNSuggestions()" 
                                       style="width: 150px;" placeholder="UN#### or chemical name">
                                <div id="un-suggestions" style="display: none; position: absolute; top: 100%; left: 0; 
                                     background: white; border: 1px solid #ccc; border-radius: 4px; 
                                     max-height: 200px; overflow-y: auto; z-index: 1000; width: 300px; 
                                     box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                </div>
                            </div>
                        </label>
                        <label>
                            ERG Guide Number:
                            <input type="text" name="hazmat-guide-number" id="hazmat-guide-number" readonly style="width: 80px; background-color: #f0f0f0;" placeholder="Auto-filled">
                        </label>
                        <label>
                            Estimated Quantity:
                            <input type="text" name="hazmat-quantity" style="width: 100px;" placeholder="Amount & Unit">
                        </label>
                    </div>

                    <!-- Quick Placard Reference -->
                    <div style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="margin-bottom: 0.5em;">
                            <strong style="color: #495057;">Quick Placard Reference</strong>
                        </div>
                        <div style="display: flex; gap: 1em; flex-wrap: wrap; font-size: 0.85em;">
                            <div style="color: #28a745;"><strong>Class 2 (Green):</strong> Non-flammable gas</div>
                            <div style="color: #dc3545;"><strong>Class 3 (Red):</strong> Flammable liquid</div>
                            <div style="color: #fd7e14;"><strong>Class 8 (White):</strong> Corrosive</div>
                            <div style="color: #6f42c1;"><strong>Class 6 (White):</strong> Toxic</div>
                            <div style="color: #ffc107;"><strong>Class 5.1 (Yellow):</strong> Oxidizer</div>
                            <div style="color: #6c757d;"><strong>Class 9 (Striped):</strong> Miscellaneous</div>
                        </div>
                    </div>

                    <!-- ERG Safety Information (Auto-populated) -->
                    <div id="erg-safety-info" style="display: none; background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="margin-bottom: 0.5em;">
                            <strong style="color: #856404;">ERG Safety Information</strong>
                        </div>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap; margin-bottom: 0.5em;">
                            <div style="flex: 1; min-width: 200px;">
                                <strong>Fire Hazards:</strong>
                                <div id="erg-fire-hazards" style="font-size: 0.9em; margin-top: 0.2em;"></div>
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <strong>Health Hazards:</strong>
                                <div id="erg-health-hazards" style="font-size: 0.9em; margin-top: 0.2em;"></div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 2em; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 200px;">
                                <strong>Initial Isolation:</strong>
                                <div id="erg-isolation" style="font-size: 0.9em; margin-top: 0.2em;"></div>
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <strong>Protective Actions:</strong>
                                <div id="erg-protective-actions" style="font-size: 0.9em; margin-top: 0.2em;"></div>
                            </div>
                        </div>
                        <div style="margin-top: 0.5em;">
                            <strong>Response Guidance:</strong>
                            <div id="erg-response-guidance" style="font-size: 0.9em; margin-top: 0.2em;"></div>
                        </div>
                        <div id="erg-large-spill-section" style="display: none; margin-top: 0.5em; padding: 8px; background-color: #ffe6e6; border: 1px solid #ff9999; border-radius: 4px;">
                            <strong style="color: #cc0000;">âš ï¸ Large Spill Evacuation (Transportation Incidents):</strong>
                            <div id="erg-large-spill-evacuation" style="font-size: 0.9em; margin-top: 0.2em; font-weight: bold;"></div>
                        </div>
                    </div>
                    
                    <!-- Incident Details -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Source of Release:
                            <select name="hazmat-release-source" style="width: 150px;">
                                <option value="">Select Source</option>
                                <option value="Vehicle Accident">Vehicle Accident</option>
                                <option value="Tank/Container Leak">Tank/Container Leak</option>
                                <option value="Equipment Failure">Equipment Failure</option>
                                <option value="Human Error">Human Error</option>
                                <option value="Vandalism">Vandalism</option>
                                <option value="Natural Cause">Natural Cause</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label id="hazmat-source-other-container" style="display: none;">
                            Specify Other:
                            <input type="text" name="hazmat-source-other" style="width: 120px;">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Area Affected:
                            <select name="hazmat-area-affected" style="width: 120px;">
                                <option value="">Select Area</option>
                                <option value="Roadway">Roadway</option>
                                <option value="Driveway">Driveway</option>
                                <option value="Parking Lot">Parking Lot</option>
                                <option value="Waterway">Waterway</option>
                                <option value="Storm Drain">Storm Drain</option>
                                <option value="Soil/Ground">Soil/Ground</option>
                                <option value="Building Interior">Building Interior</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Weather Conditions:
                            <select name="hazmat-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear/Dry">Clear/Dry</option>
                                <option value="Raining">Raining</option>
                                <option value="Windy">Windy</option>
                                <option value="Hot">Hot</option>
                                <option value="Cold">Cold</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Response Actions -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Response Actions</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-area-secured">
                            Area Secured/Isolated
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-evacuation">
                            Evacuation Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-source-stopped">
                            Source of Release Stopped
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-absorbent-used">
                            Absorbent Material Applied
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-storm-drain-protected">
                            Storm Drains Protected
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-contained">
                            Spill Contained
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-cleanup-complete">
                            Clean-up Completed
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-specialist-requested">
                            Hazmat Specialist Requested
                        </label>
                    </div>
                    
                    <!-- Cleanup Method -->
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Primary Cleanup Method:
                            <select name="hazmat-cleanup-method" style="width: 150px;">
                                <option value="">Select Method</option>
                                <option value="Absorbent Pads">Absorbent Pads</option>
                                <option value="Kitty Litter">Kitty Litter</option>
                                <option value="Sand">Sand</option>
                                <option value="Commercial Absorbent">Commercial Absorbent</option>
                                <option value="Vacuum Truck">Vacuum Truck</option>
                                <option value="Shovel/Manual">Shovel/Manual</option>
                                <option value="Water Wash">Water Wash</option>
                                <option value="Professional Service">Professional Service</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Disposal Method:
                            <select name="hazmat-disposal-method" style="width: 130px;">
                                <option value="">Select Method</option>
                                <option value="Municipal Pickup">Municipal Pickup</option>
                                <option value="Hazmat Facility">Hazmat Facility</option>
                                <option value="Contractor Removed">Contractor Removed</option>
                                <option value="On-Site Storage">On-Site Storage</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-dep-notified">
                            DEP Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-police-notified">
                            Police Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-dpw-notified">
                            DPW Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-health-dept-notified">
                            Health Department Notified
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-contractor-called">
                            Cleanup Contractor Called
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-insurance-notified">
                            Insurance Company Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="hazmat-property-owner-notified">
                            Property Owner Notified
                        </label>
                    </div>
                    
                    <!-- Personnel Information -->
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Responsible Party Name:
                            <input type="text" name="hazmat-responsible-party" style="width: 150px;">
                        </label>
                        <label>
                            Contact Phone:
                            <input type="tel" name="hazmat-responsible-phone" style="width: 120px;" placeholder="(000) 000-0000">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Cleanup Company:
                            <input type="text" name="hazmat-cleanup-company" style="width: 150px;">
                        </label>
                        <label>
                            Company Contact:
                            <input type="tel" name="hazmat-cleanup-phone" style="width: 120px;" placeholder="(000) 000-0000">
                        </label>
                    </div>
                    
                    <!-- Additional Information -->
                    <div style="margin-bottom: 0.5em;">
                        <strong style="text-decoration: underline;">Additional Information</strong>
                    </div>
                    <div style="font-style: italic; font-size: 0.9em; color: #666; margin-bottom: 0.5em;">
                        Include details about extent of contamination, injuries, property damage, and any special circumstances
                    </div>
                    <label>
                        Action Taken:<br>
                        <textarea name="hazmat-action-taken" rows="3" cols="50" placeholder="Describe response actions, cleanup efforts, and any special procedures followed..."></textarea>
                    </label>
                    <label style="margin-top: 0.5em;">
                        Notes:<br>
                        <textarea name="hazmat-notes" rows="3" cols="50" placeholder="Additional observations, follow-up actions needed, or other relevant information..."></textarea>
                    </label>
                </fieldset>

                <!-- Landing Zone Details (hidden by default) -->
                <fieldset id="landing-zone-section" style="display:none;">
                    <legend>Landing Zone Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Landing Zone Safety Requirements
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Ensure 100x100 ft minimum landing zone with no overhead obstacles. Maintain 150 ft radius security perimeter.
                        </div>
                    </div>
                    

                    

                    
                    <!-- Aircraft Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Aircraft Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Number of Aircraft:
                            <input type="number" name="landing-zone-num-helicopters" id="landing-zone-num-helicopters" min="1" max="5" style="width: 60px;" inputmode="numeric">
                        </label>
                    </div>
                    
                    <div id="landing-zone-helicopters-container"></div>
                    
                    <!-- Ground Operations -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Ground Operations</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Ground Contact Unit:
                            <input type="text" name="landing-zone-ground-contact" style="width: 120px;" placeholder="Unit Number">
                        </label>
                        <label>
                            Radio Frequency:
                            <select name="landing-zone-frequency" style="width: 150px;">
                                <option value="">Select Frequency</option>
                                <option value="Helo 1">Helo 1</option>
                                <option value="Helo 2">Helo 2</option>
                                <option value="Helo 4 (Medcom 400)">Helo 4 (Medcom 400)</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Operations -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Flight Operations</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; align-items: center; flex-wrap: wrap; margin-bottom: 1em;">
                        <label>
                            Purpose:
                            <select name="landing-zone-purpose" style="width: 150px;">
                                <option value="">Select Purpose</option>
                                <option value="Patient Transport">Patient Transport</option>
                                <option value="Personnel Transport">Personnel Transport</option>
                                <option value="Equipment Delivery">Equipment Delivery</option>
                                <option value="Search & Rescue">Search & Rescue</option>
                                <option value="Fire Suppression">Fire Suppression</option>
                                <option value="Law Enforcement">Law Enforcement</option>
                                <option value="Training">Training</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Additional Information -->
                    <label>
                        Action Taken:<br>
                        <textarea name="landing-zone-action-taken" rows="3" cols="50" style="width: 100%; max-width: 600px;" placeholder="Describe LZ setup, safety measures, flight operations, and any issues encountered..."></textarea>
                    </label>
                    <label style="margin-top: 0.5em;">
                        Notes:<br>
                        <textarea name="landing-zone-notes" rows="3" cols="50" style="width: 100%; max-width: 600px;" placeholder="Additional observations, crew members, patient info, or operational details..."></textarea>
                    </label>
                </fieldset>

                <!-- Motorist Assist/Traffic Control Details (hidden by default) -->
                <fieldset id="motorist-assist-section" style="display:none;">
                    <legend>Motorist Assist/Traffic Control Details</legend>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Location/Intersection:
                            <input type="text" name="motorist-assist-location" style="width: 220px;" placeholder="Address or intersection">
                        </label>
                        <label>
                            Assist Type:
                            <select name="motorist-assist-type" style="width: 150px;">
                                <option value="">Select Type</option>
                                <option value="Disabled Vehicle">Disabled Vehicle</option>
                                <option value="Out of Fuel">Out of Fuel</option>
                                <option value="Flat Tire">Flat Tire</option>
                                <option value="Dead Battery">Dead Battery</option>
                                <option value="Locked Out">Locked Out</option>
                                <option value="Traffic Control">Traffic Control</option>
                                <option value="Accident Assist">Accident Assist</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>

                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Weather Conditions:
                            <select name="motorist-assist-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Overcast">Overcast</option>
                                <option value="Rain">Rain</option>
                                <option value="Snow">Snow</option>
                                <option value="Ice">Ice</option>
                                <option value="Fog">Fog</option>
                            </select>
                        </label>

                        <label>
                            Roadway Type:
                            <select name="motorist-assist-roadway" style="width: 120px;">
                                <option value="">Select Type</option>
                                <option value="City Street">City Street</option>
                                <option value="County Road">County Road</option>
                                <option value="State Highway">State Highway</option>
                                <option value="Interstate">Interstate</option>
                                <option value="Parking Lot">Parking Lot</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Services Provided -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Services Provided</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-jump-start">
                            Jump Start Battery
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-tire-change">
                            Tire Change
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-push-start">
                            Push Start
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-traffic-control">
                            Traffic Control
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-emergency-fuel">
                            Emergency Fuel
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-unlock-vehicle">
                            Unlock Vehicle
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-scene-safety">
                            Scene Safety/Lighting
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-tow-arranged">
                            Tow Truck Arranged
                        </label>
                    </div>
                    
                    <!-- Additional Resources -->
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-police-needed">
                            Police Assistance
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-ems-needed">
                            EMS Assistance
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-doh-notified">
                            DOH Notified
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="motorist-assist-unable-to-assist">
                            Unable to Assist
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Driver Name:
                            <input type="text" name="motorist-assist-driver-name" style="width: 180px;" placeholder="Driver name">
                        </label>
                        <label>
                            Driver Phone:
                            <input type="tel" name="motorist-assist-driver-phone" style="width: 150px;" placeholder="(000) 000-0000">
                        </label>
                        <label>
                            Tow Company:
                            <select name="motorist-assist-tow-company" style="width: 150px;" onchange="toggleTowCompanyOther()">
                                <option value="">Select Company</option>
                                <option value="Goodwill">Goodwill</option>
                                <option value="Hanover">Hanover</option>
                                <option value="Fletcher's">Fletcher's</option>
                                <option value="Gaylock's">Gaylock's</option>
                                <option value="Smith's">Smith's</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label id="motorist-assist-tow-other-label" style="display: none;">
                            Specify Other:
                            <input type="text" name="motorist-assist-tow-other" style="width: 120px;" placeholder="Company name">
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Services Rendered:<br>
                        <textarea name="motorist-assist-services" rows="3" style="width: 100%; max-width: 600px;" placeholder="Describe assistance provided, equipment used, time on scene..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="motorist-assist-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Motorist information, follow-up needed, special circumstances..."></textarea>
                    </label>
                </fieldset>

                <!-- Power Line Down Details (hidden by default) -->
                <fieldset id="power-line-down-section" style="display:none;">
                    <legend>Power Line Down Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Electrical Hazard Warning
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Assume ALL downed power lines are energized. Maintain 35-foot minimum distance. Never touch anything in contact with lines.
                        </div>
                    </div>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Location/Intersection:
                            <input type="text" name="power-line-location" style="width: 220px;" placeholder="Address or intersection">
                        </label>
                        <label>
                            Line Type:
                            <select name="power-line-type" style="width: 150px;">
                                <option value="">Select Type</option>
                                <option value="Primary Distribution">Primary Distribution</option>
                                <option value="Secondary Service">Secondary Service</option>
                                <option value="Transmission">Transmission</option>
                                <option value="Service Drop">Service Drop</option>
                                <option value="Transformer">Transformer</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Cause:
                            <select name="power-line-cause" style="width: 150px;">
                                <option value="">Select Cause</option>
                                <option value="Wind/Storm">Wind/Storm</option>
                                <option value="Tree Contact">Tree Contact</option>
                                <option value="Vehicle Strike">Vehicle Strike</option>
                                <option value="Equipment Failure">Equipment Failure</option>
                                <option value="Construction">Construction</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-utility-notified">
                            Utility Company Notified
                        </label>
                        <label>
                            Weather Conditions:
                            <select name="power-line-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Rain">Rain</option>
                                <option value="Wind">Wind</option>
                                <option value="Storm">Storm</option>
                                <option value="Snow/Ice">Snow/Ice</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Hazard Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Hazard Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-energized">
                            Lines Appear Energized
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-arcing">
                            Arcing/Sparking
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-fire">
                            Fire Involved
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-smoke">
                            Smoke/Burning Smell
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-vehicle-involved">
                            Vehicle in Contact
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-person-involved">
                            Person in Contact
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-structure-damage">
                            Structure Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-tree-involved">
                            Tree Involved
                        </label>
                    </div>
                    
                    <!-- Safety Measures -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Safety Measures</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-area-secured">
                            Area Secured (35 ft min)
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="power-line-road-closed">
                            Road Closed
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-traffic-control">
                            Traffic Control
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-doh-notified">
                            DOH Notified
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-power-outage">
                            Power Outage Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-evacuation">
                            Evacuation Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-injuries">
                            Injuries Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="power-line-ems-needed">
                            EMS Required
                        </label>
                    </div>
                    
                    <!-- Status -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Pole/Equipment #:
                            <input type="text" name="power-line-equipment-number" style="width: 120px;" placeholder="Pole number">
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Actions Taken:<br>
                        <textarea name="power-line-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Safety measures implemented, coordination with utility, scene control..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="power-line-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, witnesses, estimated repair time, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Search and Rescue Details (hidden by default) -->
                <fieldset id="search-and-rescue-section" style="display:none;">
                    <legend>Search and Rescue Details</legend>
                    
                    <!-- Missing Person Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Missing Person Description</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Subject Name:
                            <input type="text" name="search-rescue-subject-name" style="width: 150px;" placeholder="Full Name">
                        </label>
                        <label>
                            Age:
                            <input type="number" name="search-rescue-age" min="0" max="200" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Gender:
                            <select name="search-rescue-gender" style="width: 80px;">
                                <option value="">Select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Height:
                            <input type="text" name="search-rescue-height" style="width: 80px;" placeholder="5'8&quot;">
                        </label>
                        <label>
                            Weight:
                            <input type="number" name="search-rescue-weight" min="0" max="999" style="width: 80px;" inputmode="numeric" placeholder="lbs">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Skin Tone:
                            <select name="search-rescue-skin-color" style="width: 100px;">
                                <option value="">Select</option>
                                <option value="Asian">Asian</option>
                                <option value="Black">Black</option>
                                <option value="Brown">Brown</option>
                                <option value="Olive">Olive</option>
                                <option value="White">White</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Hair Color:
                            <select name="search-rescue-hair-color" style="width: 100px;">
                                <option value="">Select</option>
                                <option value="Bald">Bald</option>
                                <option value="Black">Black</option>
                                <option value="Blonde">Blonde</option>
                                <option value="Brown">Brown</option>
                                <option value="Grey">Grey</option>
                                <option value="Red">Red</option>
                                <option value="White">White</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Eye Color:
                            <select name="search-rescue-eye-color" style="width: 100px;">
                                <option value="">Select</option>
                                <option value="Amber">Amber</option>
                                <option value="Blue">Blue</option>
                                <option value="Brown">Brown</option>
                                <option value="Green">Green</option>
                                <option value="Grey">Grey</option>
                                <option value="Hazel">Hazel</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Last Seen Time:
                            <input type="text" name="search-rescue-last-seen-time" style="width: 80px;" placeholder="HH:MM">
                        </label>
                        <label>
                            Last Seen Date:
                            <input type="date" name="search-rescue-last-seen-date" style="width: 130px;">
                        </label>
                    </div>
                    
                    <!-- Search Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Search Details</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Search Type:
                            <select name="search-rescue-type" style="width: 150px;">
                                <option value="">Select Type</option>
                                <option value="Missing Person">Missing Person</option>
                                <option value="Lost Hiker">Lost Hiker</option>
                                <option value="Alzheimer's/Dementia">Alzheimer's/Dementia</option>
                                <option value="Suicidal Subject">Suicidal Subject</option>
                                <option value="Lost Hunter">Lost Hunter</option>
                                <option value="ATV/UTV Accident">ATV/UTV Accident</option>
                                <option value="Water Rescue">Water Rescue</option>
                                <option value="Overdue Party">Overdue Party</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Search Status:
                            <select name="search-rescue-status" style="width: 120px;">
                                <option value="">Select Status</option>
                                <option value="Active Search">Active Search</option>
                                <option value="Subject Located">Subject Located</option>
                                <option value="Search Suspended">Search Suspended</option>
                                <option value="Transferred">Transferred</option>
                                <option value="Unfounded">Unfounded</option>
                            </select>
                        </label>
                        <label>
                            Weather Conditions:
                            <select name="search-rescue-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Overcast">Overcast</option>
                                <option value="Rain">Rain</option>
                                <option value="Snow">Snow</option>
                                <option value="Fog">Fog</option>
                                <option value="Severe Weather">Severe Weather</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Medical/Mental Status -->
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="search-rescue-medical-condition">
                            Known Medical Condition
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="search-rescue-medication-needed">
                            Medication Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="search-rescue-disoriented">
                            Disoriented/Confused
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="search-rescue-suicidal">
                            Suicidal Ideation
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Clothing Description:<br>
                        <textarea name="search-rescue-clothing" rows="2" style="width: 100%; max-width: 600px;" placeholder="Describe clothing worn when last seen..."></textarea>
                    </label>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Mental State/Medical Conditions:<br>
                        <textarea name="search-rescue-mental-state" rows="2" style="width: 100%; max-width: 600px;" placeholder="Mental state, medical conditions, medications, behavioral concerns..."></textarea>
                    </label>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Last Known Location/Direction of Travel:<br>
                        <textarea name="search-rescue-last-location" rows="2" style="width: 100%; max-width: 600px;" placeholder="Last known location, intended destination, direction of travel..."></textarea>
                    </label>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Assisting Agencies/Resources:<br>
                        <textarea name="search-rescue-agencies" rows="2" style="width: 100%; max-width: 600px;" placeholder="Police, K-9 units, aviation, volunteers, search teams..."></textarea>
                    </label>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Search Actions/Results:<br>
                        <textarea name="search-rescue-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Search areas covered, methods used, results, evidence found..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="search-rescue-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Additional information, family contacts, follow-up actions needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Swift Water Rescue Details (hidden by default) -->
                <fieldset id="swift-water-rescue-section" style="display:none;">
                    <legend>Swift Water Rescue Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Swift Water Safety
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Never enter swift water without proper training and equipment. Maintain downstream safety positions.
                        </div>
                    </div>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Rescue Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Number of Subjects:
                            <input type="number" name="swift-water-num-subjects" min="0" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Number Rescued:
                            <input type="number" name="swift-water-num-rescued" min="0" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Body of Water:
                            <input type="text" name="swift-water-location" style="width: 180px;" placeholder="River, creek, pond">
                        </label>
                        <label>
                            Water Temperature:
                            <input type="number" name="swift-water-temp" min="32" max="100" style="width: 80px;" placeholder="Â°F">
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Current Speed:
                            <select name="swift-water-current" style="width: 120px;">
                                <option value="">Select Current</option>
                                <option value="Slow (0-2 mph)">Slow (0-2 mph)</option>
                                <option value="Moderate (2-4 mph)">Moderate (2-4 mph)</option>
                                <option value="Fast (4-6 mph)">Fast (4-6 mph)</option>
                                <option value="Very Fast (>6 mph)">Very Fast (>6 mph)</option>
                            </select>
                        </label>
                        <label>
                            Water Depth:
                            <select name="swift-water-depth" style="width: 120px;">
                                <option value="">Select Depth</option>
                                <option value="Shallow (<3 ft)">Shallow (<3 ft)</option>
                                <option value="Moderate (3-6 ft)">Moderate (3-6 ft)</option>
                                <option value="Deep (>6 ft)">Deep (>6 ft)</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Weather Conditions:
                            <select name="swift-water-weather" style="width: 120px;">
                                <option value="">Select Weather</option>
                                <option value="Clear">Clear</option>
                                <option value="Overcast">Overcast</option>
                                <option value="Rain">Rain</option>
                                <option value="Storm">Storm</option>
                                <option value="Fog">Fog</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Rescue Methods -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Rescue Methods Used</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-throw-bag">
                            Throw Bag/Rope
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-reach-pole">
                            Reach Pole/Ladder
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-boat-rescue">
                            Boat Rescue
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-swim-rescue">
                            Swim Rescue
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-helicopter">
                            Helicopter Rescue
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-vehicle">
                            Vehicle Assist
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-self-rescue">
                            Self Rescue
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-recovery">
                            Body Recovery
                        </label>
                    </div>
                    
                    <!-- Subject Condition -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Subject Condition</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-hypothermia">
                            Hypothermia Suspected
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-injuries">
                            Visible Injuries
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-unconscious">
                            Unconscious
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="swift-water-fatality">
                            Fatality
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Assisting Agencies:
                            <input type="text" name="swift-water-agency" style="width: 200px;" placeholder="Police, rescue teams, divers">
                        </label>
                        <label>
                            EMS Transport:
                            <select name="swift-water-transport" style="width: 120px;">
                                <option value="">Select</option>
                                <option value="Ground EMS">Ground EMS</option>
                                <option value="Helicopter">Helicopter</option>
                                <option value="Refused">Refused</option>
                                <option value="Not Needed">Not Needed</option>
                            </select>
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Rescue Actions/Timeline:<br>
                        <textarea name="swift-water-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Describe rescue methods used, timeline of events, challenges encountered..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="swift-water-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Environmental conditions, witnesses, equipment used, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Tree Down Details (hidden by default) -->
                <fieldset id="tree-down-section" style="display:none;">
                    <legend>Tree Down Details</legend>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Location/Intersection:
                            <input type="text" name="tree-down-location" style="width: 250px;" placeholder="Address or intersection">
                        </label>
                        <label>
                            Tree Size:
                            <select name="tree-down-size" style="width: 120px;">
                                <option value="">Select Size</option>
                                <option value="Small (<6 inch)">Small (<6")</option>
                                <option value="Medium (6-12 inch)">Medium (6-12")</option>
                                <option value="Large (12-24 inch)">Large (12-24")</option>
                                <option value="Very Large (>24 inch)">Very Large (>24")</option>
                            </select>
                        </label>
                        <label>
                            Cause:
                            <select name="tree-down-cause" style="width: 120px;">
                                <option value="">Select Cause</option>
                                <option value="Wind/Storm">Wind/Storm</option>
                                <option value="Ice/Snow">Ice/Snow</option>
                                <option value="Disease/Rot">Disease/Rot</option>
                                <option value="Age">Age</option>
                                <option value="Vehicle Strike">Vehicle Strike</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Impact Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Impact Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="tree-down-roadway-blocked">
                            Roadway Blocked
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="tree-down-powerline-involvement">
                            Power Lines Involved
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-property-damage">
                            Property Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-vehicle-damage">
                            Vehicle Damage
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-injuries">
                            Injuries Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-entrapment">
                            Person/Vehicle Trapped
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-water-main">
                            Water Main Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-gas-line">
                            Gas Line Damage
                        </label>
                    </div>
                    
                    <!-- Traffic Control -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Traffic Control</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-lane-restriction">
                            Lane Restriction
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-full-closure">
                            Full Road Closure
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-detour-established">
                            Detour Established
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="tree-down-doh-notified">
                            DOH Notified
                        </label>
                    </div>
                    
                    <!-- Resources -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Utility Company Notified:
                            <input type="text" name="tree-down-utility-company" style="width: 180px;" placeholder="Company name">
                        </label>
                        <label>
                            Equipment Used:
                            <select name="tree-down-equipment" style="width: 150px;">
                                <option value="">Select Equipment</option>
                                <option value="Chain Saw">Chain Saw</option>
                                <option value="Bucket Truck">Bucket Truck</option>
                                <option value="Heavy Rescue">Heavy Rescue</option>
                                <option value="Tow Truck">Tow Truck</option>
                                <option value="Public Works">Public Works</option>
                                <option value="Tree Service">Tree Service</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Removal Status:
                            <select name="tree-down-removal-status" style="width: 150px;">
                                <option value="">Select Status</option>
                                <option value="Cleared by FD">Cleared by FD</option>
                                <option value="Referred to Public Works">Referred to Public Works</option>
                                <option value="Referred to Tree Service">Referred to Tree Service</option>
                                <option value="Referred to Utility">Referred to Utility</option>
                                <option value="No Action Needed">No Action Needed</option>
                            </select>
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Actions Taken:<br>
                        <textarea name="tree-down-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Describe removal efforts, equipment used, safety measures..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="tree-down-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Weather conditions, follow-up needed, other agencies involved..."></textarea>
                    </label>
                </fieldset>

                <!-- Utility Pole Fire Details (hidden by default) -->
                <fieldset id="utility-pole-fire-section" style="display:none;">
                    <legend>Utility Pole Fire Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Electrical Fire Hazard
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Do not apply water to energized electrical equipment. Use Class C fire extinguisher or CO2. Maintain safe distance.
                        </div>
                    </div>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Location/Intersection:
                            <input type="text" name="utility-pole-location" style="width: 220px;" placeholder="Address or intersection">
                        </label>
                        <label>
                            Equipment Type:
                            <select name="utility-pole-equipment-type" style="width: 150px;">
                                <option value="">Select Equipment</option>
                                <option value="Utility Pole">Utility Pole</option>
                                <option value="Transformer">Transformer</option>
                                <option value="Power Lines">Power Lines</option>
                                <option value="Switch Gear">Switch Gear</option>
                                <option value="Meter Base">Meter Base</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Fire Size:
                            <select name="utility-pole-fire-size" style="width: 120px;">
                                <option value="">Select Size</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Extinguished">Extinguished</option>
                            </select>
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Utility Company Notified:
                            <input type="text" name="utility-pole-utility-company" style="width: 180px;" placeholder="Company name">
                        </label>
                        <label>
                            ETA:
                            <input type="text" name="utility-pole-eta" style="width: 80px;" placeholder="HH:MM">
                        </label>
                        <label>
                            Pole/Equipment #:
                            <input type="text" name="utility-pole-equipment-number" style="width: 120px;" placeholder="Pole number">
                        </label>
                    </div>
                    
                    <!-- Fire Status -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Status & Suppression</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="utility-pole-power-secured">
                            Power Secured by Utility
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="utility-pole-fire-suppressed">
                            Fire Suppressed
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-still-burning">
                            Still Burning
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-self-extinguished">
                            Self Extinguished
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-class-c-used">
                            Class C Extinguisher Used
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-co2-used">
                            CO2 Extinguisher Used
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-water-applied">
                            Water Applied (After De-energized)
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-foam-applied">
                            Foam Applied
                        </label>
                    </div>
                    
                    <!-- Impact Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Impact Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-power-outage">
                            Power Outage Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-property-damage">
                            Property Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-vegetation-fire">
                            Vegetation Fire
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-structure-threat">
                            Structure Threatened
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-road-closure">
                            Road Closure Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-evacuation">
                            Evacuation Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-injuries">
                            Injuries Reported
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-pole-environmental-concern">
                            Environmental Concern
                        </label>
                    </div>
                    
                    <!-- Status -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Fire Cause:
                            <select name="utility-pole-fire-cause" style="width: 150px;">
                                <option value="">Select Cause</option>
                                <option value="Equipment Failure">Equipment Failure</option>
                                <option value="Overload">Overload</option>
                                <option value="Tree Contact">Tree Contact</option>
                                <option value="Weather">Weather</option>
                                <option value="Animal Contact">Animal Contact</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Affected Customers:
                            <input type="number" name="utility-pole-affected-customers" min="0" style="width: 80px;" placeholder="Count">
                        </label>
                        <label>
                            Estimated Repair Time:
                            <input type="text" name="utility-pole-repair-time" style="width: 100px;" placeholder="Hours">
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Suppression Actions:<br>
                        <textarea name="utility-pole-suppression-actions" rows="3" style="width: 100%; max-width: 600px;" placeholder="Fire suppression methods, equipment used, coordination with utility company..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="utility-pole-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Weather conditions, witnesses, environmental impact, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Utility Problem (Gas/Water Leak) Details (hidden by default) -->
                <fieldset id="utility-problem-section" style="display:none;">
                    <legend>Utility Problem (Gas/Water Leak) Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #e65100; font-weight: bold; margin-bottom: 0.5em;">
                            âš ï¸ Utility Emergency Safety
                        </div>
                        <div style="font-size: 0.9em; color: #e65100;">
                            Gas leaks are explosive hazards. Eliminate ignition sources. Water leaks may undermine structures.
                        </div>
                    </div>
                    
                    <!-- Incident Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Utility Emergency Details</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Location/Intersection:
                            <input type="text" name="utility-problem-location" style="width: 200px;" placeholder="Address or intersection">
                        </label>
                        <label>
                            Utility Type:
                            <select name="utility-problem-type" style="width: 120px;">
                                <option value="">Select Type</option>
                                <option value="Natural Gas">Natural Gas</option>
                                <option value="Propane">Propane</option>
                                <option value="Water Main">Water Main</option>
                                <option value="Sewer">Sewer</option>
                                <option value="Gas Appliance">Gas Appliance</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Leak Severity:
                            <select name="utility-problem-severity" style="width: 120px;">
                                <option value="">Select Severity</option>
                                <option value="Minor">Minor</option>
                                <option value="Moderate">Moderate</option>
                                <option value="Major">Major</option>
                                <option value="Emergency">Emergency</option>
                            </select>
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Utility Company Notified:
                            <input type="text" name="utility-problem-utility-company" style="width: 180px;" placeholder="Company name">
                        </label>
                        <label>
                            ETA:
                            <input type="text" name="utility-problem-eta" style="width: 80px;" placeholder="HH:MM">
                        </label>
                        <label>
                            Cause:
                            <select name="utility-problem-cause" style="width: 150px;">
                                <option value="">Select Cause</option>
                                <option value="Excavation Damage">Excavation Damage</option>
                                <option value="Corrosion">Corrosion</option>
                                <option value="Vehicle Strike">Vehicle Strike</option>
                                <option value="Equipment Failure">Equipment Failure</option>
                                <option value="Weather Related">Weather Related</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Safety Measures -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Safety Measures Implemented</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="utility-problem-area-evacuated">
                            Area Evacuated
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="utility-problem-ignition-sources">
                            Ignition Sources Eliminated
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-gas-meter-shut">
                            Gas Meter Shut Off
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-water-valve-shut">
                            Water Valve Shut Off
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-traffic-control">
                            Traffic Control Established
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-air-monitoring">
                            Air Monitoring Conducted
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-structures-checked">
                            Nearby Structures Checked
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-police-notified">
                            Police Notified
                        </label>
                    </div>
                    
                    <!-- Environmental Impact -->
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-property-damage">
                            Property Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-environmental-concern">
                            Environmental Concern
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-service-outage">
                            Service Outage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="utility-problem-injuries">
                            Injuries Reported
                        </label>
                    </div>
                    
                    <!-- Gas Detection (for gas leaks) -->
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Gas Detector Reading:
                            <input type="text" name="utility-problem-gas-reading" style="width: 100px;" placeholder="% LEL or PPM">
                        </label>
                        <label>
                            Wind Direction:
                            <select name="utility-problem-wind" style="width: 100px;">
                                <option value="">Select</option>
                                <option value="N">North</option>
                                <option value="NE">Northeast</option>
                                <option value="E">East</option>
                                <option value="SE">Southeast</option>
                                <option value="S">South</option>
                                <option value="SW">Southwest</option>
                                <option value="W">West</option>
                                <option value="NW">Northwest</option>
                            </select>
                        </label>
                        <label>
                            Repair Status:
                            <select name="utility-problem-repair-status" style="width: 150px;">
                                <option value="">Select Status</option>
                                <option value="Utility Responding">Utility Responding</option>
                                <option value="Temporary Repair">Temporary Repair</option>
                                <option value="Permanent Repair">Permanent Repair</option>
                                <option value="Service Restored">Service Restored</option>
                                <option value="Ongoing">Ongoing</option>
                            </select>
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Actions Taken:<br>
                        <textarea name="utility-problem-action-taken" rows="3" style="width: 100%; max-width: 600px;" placeholder="Describe response actions, safety measures, utility coordination..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="utility-problem-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Weather conditions, evacuation details, follow-up actions needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Vehicle Fire Details (hidden by default) -->
                <fieldset id="vehicle-fire-section" style="display:none;">
                    <legend>Vehicle Fire Details</legend>
                    
                    <!-- Safety Warning -->
                    <div style="background-color: #ffebee; border: 1px solid #f44336; border-radius: 4px; padding: 10px; margin-bottom: 1em;">
                        <div style="color: #c62828; font-weight: bold; margin-bottom: 0.5em;">
                            ðŸš—ðŸ”¥ Vehicle Fire Safety Reminder
                        </div>
                        <div style="font-size: 0.9em; color: #c62828;">
                            Approach from uphill/upwind when possible. Be aware of potential tire explosions, fuel tanks, hybrid batteries, and magnesium components. Establish traffic control and scene safety first.
                        </div>
                    </div>
                    
                    <!-- Incident Classification -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Incident Classification</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="vehicle-fire-type" value="Engine Compartment"> Engine Compartment
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="vehicle-fire-type" value="Passenger Compartment"> Passenger Compartment
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="vehicle-fire-type" value="Fully Involved"> Fully Involved
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="radio" name="vehicle-fire-type" value="Cargo/Bed"> Cargo/Bed
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-collision"> Collision Related
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-occupied"> Vehicle Occupied
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-entrapment"> Occupant Entrapment
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-injuries"> Injuries
                        </label>
                    </div>
                    
                    <!-- Vehicle Information -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Vehicle Information</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Number of Vehicles:
                            <input type="number" name="vehicle-fire-num-vehicles" id="vehicle-fire-num-vehicles" min="1" max="10" style="width: 60px;" inputmode="numeric">
                        </label>
                        <label>
                            Vehicle Type:
                            <select name="vehicle-fire-vehicle-type" style="width: 140px;">
                                <option value="">Select Type</option>
                                <option value="Passenger Car">Passenger Car</option>
                                <option value="SUV">SUV</option>
                                <option value="Pickup Truck">Pickup Truck</option>
                                <option value="Commercial Truck">Commercial Truck</option>
                                <option value="Motorcycle">Motorcycle</option>
                                <option value="Bus">Bus</option>
                                <option value="RV/Motorhome">RV/Motorhome</option>
                                <option value="Heavy Equipment">Heavy Equipment</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Fuel Type:
                            <select name="vehicle-fire-fuel-type" style="width: 120px;">
                                <option value="">Select Fuel</option>
                                <option value="Gasoline">Gasoline</option>
                                <option value="Diesel">Diesel</option>
                                <option value="Hybrid">Hybrid</option>
                                <option value="Electric">Electric</option>
                                <option value="CNG">CNG</option>
                                <option value="Propane">Propane</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Dynamic vehicle fields container -->
                    <div id="vehicle-fire-vehicles-container"></div>
                    
                    <!-- Fire Origin and Cause -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Fire Origin & Cause</strong>
                    </div>
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Suspected Origin:
                            <select name="vehicle-fire-origin" style="width: 160px;">
                                <option value="">Select Origin</option>
                                <option value="Engine Compartment">Engine Compartment</option>
                                <option value="Exhaust System">Exhaust System</option>
                                <option value="Electrical System">Electrical System</option>
                                <option value="Fuel System">Fuel System</option>
                                <option value="Brakes">Brakes</option>
                                <option value="Tires/Wheels">Tires/Wheels</option>
                                <option value="Cargo Area">Cargo Area</option>
                                <option value="Passenger Compartment">Passenger Compartment</option>
                                <option value="External">External</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                        <label>
                            Suspected Cause:
                            <select name="vehicle-fire-cause" style="width: 160px;">
                                <option value="">Select Cause</option>
                                <option value="Mechanical Failure">Mechanical Failure</option>
                                <option value="Electrical Failure">Electrical Failure</option>
                                <option value="Fuel Leak">Fuel Leak</option>
                                <option value="Overheating">Overheating</option>
                                <option value="Collision">Collision</option>
                                <option value="Arson">Arson</option>
                                <option value="Backfire">Backfire</option>
                                <option value="Hot Exhaust">Hot Exhaust</option>
                                <option value="Smoking Materials">Smoking Materials</option>
                                <option value="Unknown">Unknown</option>
                                <option value="Under Investigation">Under Investigation</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Hazards and Special Considerations -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Hazards & Special Considerations</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="vehicle-fire-hazmat"> HazMat/Dangerous Cargo
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="vehicle-fire-hybrid-electric"> Hybrid/Electric Vehicle
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-propane-tank"> Propane Tank
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-fuel-spill"> Fuel Spill
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-magnesium"> Magnesium Components
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-traffic-hazard"> Traffic Hazard
                        </label>
                    </div>
                    
                    <!-- Damage Assessment -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Damage Assessment</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-total-loss">
                            Total Loss
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-engine-damage">
                            Engine Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-interior-damage">
                            Interior Damage
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-exterior-damage">
                            Exterior Damage
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Estimated Damage ($):
                            <input type="number" name="vehicle-fire-damage-value" min="0" step="any" style="width: 120px;" inputmode="numeric">
                        </label>
                        <label>
                            Salvage Value ($):
                            <input type="number" name="vehicle-fire-salvage-value" min="0" step="any" style="width: 120px;" inputmode="numeric">
                        </label>
                    </div>
                    
                    <!-- Towing and Recovery -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Towing & Recovery</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-towing-required"> Towing Required
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-heavy-duty-tow"> Heavy Duty Tow
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-hazmat-cleanup"> HazMat Cleanup
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Tow Company:
                            <select name="vehicle-fire-tow-company" style="width: 160px;">
                                <option value="">Select Company</option>
                                <option value="Goodwill">Goodwill</option>
                                <option value="Fletcher's">Fletcher's</option>
                                <option value="Hanover">Hanover</option>
                                <option value="Smith's">Smith's</option>
                                <option value="Gaylock's">Gaylock's</option>
                                <option value="Duba's">Duba's</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Notifications -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Notifications Made</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="vehicle-fire-police-notified"> Law Enforcement
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em; font-weight: bold;">
                            <input type="checkbox" name="vehicle-fire-ems-notified"> EMS/Ambulance
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-dot-notified"> DOT/Highway Dept
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-fire-marshal"> Fire Marshal
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-utility-notified"> Utility Companies
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="vehicle-fire-environmental"> Environmental Agency
                        </label>
                    </div>
                    
                    <label style="margin-bottom: 1em; display: block;">
                        Suppression Strategy/Tactics:<br>
                        <textarea name="vehicle-fire-tactics" rows="3" style="width: 100%; max-width: 600px;" placeholder="Attack methods, water application, foam usage, traffic control, exposure protection..."></textarea>
                    </label>
                    
                    <label>
                        Additional Notes:<br>
                        <textarea name="vehicle-fire-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Scene conditions, special hazards encountered, lessons learned, follow-up needed..."></textarea>
                    </label>
                </fieldset>

                <!-- Other Call Type Details (hidden by default) -->
                <fieldset id="other-section" style="display:none;">
                    <legend>Other Call Type Details</legend>
                    
                    <!-- Call Classification -->
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Call Classification:
                            <select name="other-classification" style="width: 200px;">
                                <option value="">Select Classification</option>
                                <option value="Public Service">Public Service</option>
                                <option value="Mutual Aid">Mutual Aid</option>
                                <option value="Training">Training Exercise</option>
                                <option value="Standby">Standby/Coverage</option>
                                <option value="Investigation">Investigation</option>
                                <option value="Inspection">Inspection</option>
                                <option value="Equipment Check">Equipment Check</option>
                                <option value="Water Supply">Water Supply Issue</option>
                                <option value="Utility Emergency">Utility Emergency</option>
                                <option value="Weather Related">Weather Related</option>
                                <option value="Special Event">Special Event</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                        <label>
                            Priority Level:
                            <select name="other-priority" style="width: 120px;">
                                <option value="">Select</option>
                                <option value="Emergency">Emergency</option>
                                <option value="Urgent">Urgent</option>
                                <option value="Routine">Routine</option>
                                <option value="Non-Emergency">Non-Emergency</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Description and Location -->
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-start; margin-bottom: 1em;">
                        <label style="flex: 1; min-width: 300px;">
                            Incident Description:
                            <input type="text" name="other-description" style="width: 100%;" placeholder="Brief description of the incident/call">
                        </label>
                        <label style="flex: 1; min-width: 200px;">
                            Specific Location/Address:
                            <input type="text" name="other-location" style="width: 100%;" placeholder="Detailed location information">
                        </label>
                    </div>
                    
                    <!-- Outside Agencies -->
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1em;">
                        <label>
                            Outside Agencies:
                            <input type="text" name="other-agencies" style="width: 300px;" placeholder="Police, EMS, Utilities, etc.">
                        </label>
                    </div>
                    
                    <!-- Conditions and Hazards -->
                    <div style="margin-bottom: 1em;">
                        <strong style="text-decoration: underline;">Conditions/Hazards Present</strong>
                    </div>
                    <div style="display: flex; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-weather-factor"> Weather Factor
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-traffic-hazard"> Traffic Hazard
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-power-lines"> Power Lines
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-structural-concern"> Structural Concern
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-environmental"> Environmental Hazard
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3em;">
                            <input type="checkbox" name="other-crowd-control"> Crowd Control Needed
                        </label>
                    </div>
                    
                    <!-- Action Taken -->
                    <label style="display: block; margin-bottom: 1em;">
                        Action Taken:<br>
                        <textarea name="other-action-taken" rows="3" style="width: 100%; max-width: 600px;" placeholder="Detailed description of actions taken, equipment used, assistance provided..."></textarea>
                    </label>
                    
                    <!-- Outcome and Follow-up -->
                    <div style="display: flex; gap: 2em; flex-wrap: wrap; align-items: flex-start; margin-bottom: 1em;">
                        <label style="flex: 1; min-width: 250px;">
                            Outcome/Resolution:
                            <select name="other-outcome" style="width: 100%;">
                                <option value="">Select Outcome</option>
                                <option value="Resolved on Scene">Resolved on Scene</option>
                                <option value="Referred to Other Agency">Referred to Other Agency</option>
                                <option value="No Action Required">No Action Required</option>
                                <option value="Ongoing Investigation">Ongoing Investigation</option>
                                <option value="Follow-up Required">Follow-up Required</option>
                                <option value="Unable to Locate">Unable to Locate</option>
                                <option value="False Alarm">False Alarm</option>
                                <option value="Cancelled En Route">Cancelled En Route</option>
                            </select>
                        </label>
                        <label style="flex: 1; min-width: 200px;">
                            Property Damage:
                            <select name="other-property-damage" style="width: 100%;">
                                <option value="">Select</option>
                                <option value="None">None</option>
                                <option value="Minor">Minor</option>
                                <option value="Moderate">Moderate</option>
                                <option value="Major">Major</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                        </label>
                    </div>
                    
                    <!-- Additional Notes -->
                    <label style="display: block; margin-bottom: 1em;">
                        Additional Notes & Follow-up:<br>
                        <textarea name="other-notes" rows="3" style="width: 100%; max-width: 600px;" placeholder="Additional observations, recommendations, follow-up actions needed, lessons learned..."></textarea>
                    </label>
                </fieldset>
                <div id="call-type-dynamic-section"></div>
                <fieldset>
                    <legend>Second Call Type (optional)</legend>
                    <div style="display: flex; gap: 1em; align-items: flex-end; flex-wrap: wrap;">
                        <label for="call-type-2" style="min-width: 140px;">
                            Select Second Call Type:
                        </label>
                        <select id="call-type-2" name="call-type-2" style="min-width: 260px;">
                            <option value="">None</option>
                            <option value="Landing Zone">Landing Zone</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </fieldset>
                <div id="secondary-call-type-section"></div>
                <div class="photo-upload-section" style="margin-top:1em;">
                    <label>
                        Attach Photos:
                        <input type="file" name="photos-main" id="photos-main" class="photo-input" accept="image/*" multiple>
                    </label>
                    <div class="photo-preview"></div>
                </div>
                <br>
                <button type="submit">Submit</button>
                <button type="button" id="download-report">Download Report</button>
                <div style="font-weight:bold; margin-top:0.7em;">
                    If attaching pictures, download report as a PDF, then share via E-Mail.
                </div>
            </form>
            <p id="message"></p>
        </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
    </script>
    <script>
let isSubmitting = false;

document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');

    // Apparatus assignment logic must be present above this block!
    // apparatusAssignments, apparatusList, personnelList, etc.

    // Map call type values to their section IDs
    const timeInputs = document.querySelectorAll('input[name="alarm"], input[name="responding"], input[name="on-scene"], input[name="in-service"], input[name="ems-arrival-time"]');
        
        timeInputs.forEach(input => {
            input.addEventListener('input', function() {
                formatTimeInput(this);
            });
            
            input.addEventListener('keydown', function(e) {
                // Allow backspace, delete, tab, escape, enter
                if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||
                    // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                    (e.keyCode === 65 && e.ctrlKey === true) ||
                    (e.keyCode === 67 && e.ctrlKey === true) ||
                    (e.keyCode === 86 && e.ctrlKey === true) ||
                    (e.keyCode === 88 && e.ctrlKey === true)) {
                    return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
                // Limit input to 4 digits (plus colon)
                if (this.value.replace(/[^\d]/g, '').length >= 4) {
                    e.preventDefault();
                }
            });
        });
    
    const callTypeSectionMap = {
        "Structure Fire": "structure-fire-section",
        "Motor Vehicle Collision": "mvc-section",
        "ATV Accident/Trail Rescue": "atv-section",
        "Brush Fire": "brush-fire-section",
        "EMS Assist/1st Response": "ems-section",
        "Electrical Fire": "electrical-fire-section",
        "Fire Alarm": "fire-alarm-section",
        "Fire Investigation": "fire-investigation-section",
        "Illegal Burn": "illegal-burn-section",
        "HazMat": "hazmat-section",
        "Landing Zone": "landing-zone-section",
        "Motorist Assist/Traffic Control": "motorist-assist-section",
        "Power Line Down": "power-line-down-section",
        "Search and Rescue": "search-and-rescue-section",
        "Swift Water Rescue": "swift-water-rescue-section",
        "Tree Down": "tree-down-section",
        "Utility Pole Fire": "utility-pole-fire-section",
        "Utility Problem (Gas/Water Leak)": "utility-problem-section",
        "Vehicle Fire": "vehicle-fire-section",
        "Other": "other-section"
    };
// --- Personnel Bank Logic ---
    const personnelSelect = document.getElementById('personnel');
    const insertPersonnelBtn = document.getElementById('insert-personnel');
    const personnelList = document.getElementById('personnel-list');
    const personnelCount = document.getElementById('personnel-count');

    function formatTimeInput(input) {
            let value = input.value.replace(/[^\d]/g, ''); // Remove non-digits
            
            if (value.length >= 2) {
                let hours = value.substring(0, 2);
                let minutes = value.substring(2, 4);
                
                // Validate and adjust hours
                if (parseInt(hours) > 23) {
                    hours = '23';
                }
                
                // Validate and adjust minutes
                if (minutes && parseInt(minutes) > 59) {
                    minutes = '59';
                }
                
                // Format the display
                if (value.length <= 2) {
                    input.value = hours;
                } else {
                    input.value = hours + ':' + minutes;
                }
            } else {
                input.value = value;
            }
        }
       
    function updatePersonnelCount() {
        personnelCount.textContent = personnelList.children.length;
    }

    function updatePersonnelRolesDropdowns() {
        const names = Array.from(personnelList.children).map(li => li.firstChild.textContent.trim());
        ['incident-commander', 'safety-officer', 'first-unit'].forEach(id => {
            const select = document.getElementById(id);
            const currentValue = select.value;
            select.innerHTML = '<option value="">Select...</option>';
            names.forEach(name => {
                const opt = document.createElement('option');
                opt.value = name;
                opt.textContent = name;
                select.appendChild(opt);
            });
            if (names.includes(currentValue)) {
                select.value = currentValue;
            }
        });
    }

    insertPersonnelBtn.addEventListener('click', () => {
        const selected = Array.from(personnelSelect.selectedOptions).map(opt => opt.value);
        const existingNames = Array.from(personnelList.children).map(li => li.firstChild.textContent.trim());
        selected.forEach(name => {
            if (!existingNames.includes(name)) {
                const li = document.createElement('li');
                li.textContent = name;

                // Button container
                const btnContainer = document.createElement('div');
                btnContainer.style.display = 'flex';
                btnContainer.style.justifyContent = 'center';
                btnContainer.style.marginTop = '0.5em';

                // Remove button
                const removeBtn = document.createElement('button');
                removeBtn.type = 'button';
                removeBtn.textContent = 'Remove';
                removeBtn.addEventListener('click', () => {
                    li.remove();
                    updatePersonnelCount();
                    updatePersonnelRolesDropdowns();
                    updateApparatusAssignmentsOnPersonnelChange();
                });
                btnContainer.appendChild(removeBtn);

                li.appendChild(document.createElement('br'));
                li.appendChild(btnContainer);
                personnelList.appendChild(li);
            }
        });
        updatePersonnelCount();
        updatePersonnelRolesDropdowns();
        updateApparatusAssignmentsOnPersonnelChange();
    });

    // --- Apparatus Bank Logic ---
    const apparatusSelect = document.getElementById('apparatus');
    const insertApparatusBtn = document.getElementById('insert-apparatus');
    const apparatusList = document.getElementById('apparatus-list');
    const engineCount = document.getElementById('engine-count');
    const tankerCount = document.getElementById('tanker-count');
    const rescueCount = document.getElementById('rescue-count');
    const atvCount = document.getElementById('atv-count');

    function updateApparatusCounts() {
        let engines = 0, tankers = 0, rescues = 0, atvs = 0;
        Array.from(apparatusList.children).forEach(li => {
            const name = li.firstChild.textContent.trim();
            if (name.startsWith('Engine')) engines++;
            else if (name.startsWith('Tanker')) tankers++;
            else if (name.startsWith('Rescue')) rescues++;
            else if (name.startsWith('ATV')) atvs++;
        });
        engineCount.textContent = engines;
        tankerCount.textContent = tankers;
        rescueCount.textContent = rescues;
        atvCount.textContent = atvs;
    }

    // --- Apparatus Assignment Logic ---
    let apparatusAssignments = {};
    let currentAssignApparatus = null;
    let tempCrew = [];

    function getAssignedPersonnel(excludeApparatus = null) {
        const assigned = new Set();
        Object.entries(apparatusAssignments).forEach(([app, assignment]) => {
            if (app !== excludeApparatus) {
                if (assignment.driver) assigned.add(assignment.driver);
                if (assignment.crew && assignment.crew.length) {
                    assignment.crew.forEach(name => assigned.add(name));
                }
            }
        });
        return assigned;
    }

    function openAssignSection(app) {
        currentAssignApparatus = app;
        document.getElementById('assign-apparatus-name').textContent = app;
        const isPOV = app === "POV";
        document.getElementById('driver-label').style.display = isPOV ? 'none' : '';
        document.getElementById('crew-label').childNodes[0].nodeValue = isPOV ? 'Responding Personnel:' : 'Crew:';
        // Populate driver and crew selects
        const personnelNames = Array.from(personnelList.children).map(li => li.firstChild.textContent.trim());
        const assignedPersonnel = getAssignedPersonnel(app);
        const assignDriver = document.getElementById('assign-driver');
        const assignCrew = document.getElementById('assign-crew');
        assignDriver.innerHTML = '<option value="">Select...</option>';
        if (!isPOV) {
            personnelNames.forEach(name => {
                if (!assignedPersonnel.has(name) || (apparatusAssignments[app] && apparatusAssignments[app].driver === name)) {
                    const opt = document.createElement('option');
                    opt.value = name;
                    opt.textContent = name;
                    if (apparatusAssignments[app] && apparatusAssignments[app].driver === name) opt.selected = true;
                    assignDriver.appendChild(opt);
                }
            });
        }
        tempCrew = apparatusAssignments[app] && apparatusAssignments[app].crew ? [...apparatusAssignments[app].crew] : [];
        renderCrewList();
        populateCrewSelect();
        document.getElementById('apparatus-assign-section').style.display = 'block';
    }
    document.getElementById('structure-fire-vehicle-involved').addEventListener('change', function() {
        const container = document.getElementById('structure-fire-vehicles-container');
        container.innerHTML = '';
        if (this.checked) {
            // Create number input for vehicles
            const numDiv = document.createElement('div');
            numDiv.style.marginBottom = '0.5em';
            const numLabel = document.createElement('label');
            numLabel.textContent = 'Number of Vehicles Involved: ';
            const numInput = document.createElement('input');
            numInput.type = 'number';
            numInput.min = 1;
            numInput.style.width = '60px';
            numInput.id = 'structure-fire-num-vehicles';
            numInput.name = 'structure-fire-num-vehicles';
            numLabel.appendChild(numInput);
            numDiv.appendChild(numLabel);
            container.appendChild(numDiv);

            // Container for vehicle fieldsets
            const vehiclesDiv = document.createElement('div');
            vehiclesDiv.id = 'structure-fire-vehicles-list';
            container.appendChild(vehiclesDiv);

            numInput.addEventListener('input', function() {
                vehiclesDiv.innerHTML = '';
                const num = parseInt(this.value, 10);
                if (isNaN(num) || num < 1) return;
                for (let i = 1; i <= num; i++) {
                // Create a fieldset for each vehicle
                const vehicleFieldset = document.createElement('fieldset');
                vehicleFieldset.className = `vehicle-fieldset vehicle-${i}`;
                const legend = document.createElement('legend');
                legend.textContent = `Vehicle ${i}`;
                vehicleFieldset.appendChild(legend);

                // Inline row for Year, Make, Model
                const inlineRow = document.createElement('div');
                inlineRow.style.display = 'flex';
                inlineRow.style.gap = '1em';
                inlineRow.style.flexWrap = 'wrap';
                inlineRow.style.alignItems = 'flex-end';

                // Year
                let label = document.createElement('label');
                label.textContent = 'Year: ';
                let input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-year`;
                input.style.width = '60px';
                input.inputMode = 'numeric';
                label.appendChild(input);
                inlineRow.appendChild(label);

                // Make
                label = document.createElement('label');
                label.textContent = 'Make: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-make`;
                input.style.width = '80px';
                label.appendChild(input);
                inlineRow.appendChild(label);

                // Model
                label = document.createElement('label');
                label.textContent = 'Model: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-model`;
                input.style.width = '100px';
                label.appendChild(input);
                inlineRow.appendChild(label);

                vehicleFieldset.appendChild(inlineRow);

                // VIN Number and License Plate on the same line
                const vinPlateRow = document.createElement('div');
                vinPlateRow.style.display = 'flex';
                vinPlateRow.style.gap = '1em';
                vinPlateRow.style.flexWrap = 'wrap';

                // VIN Number
                label = document.createElement('label');
                label.textContent = 'VIN Number: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-vin`;
                input.size = 17;
                input.maxLength = 17;
                input.style.width = '160px';
                label.appendChild(input);
                vinPlateRow.appendChild(label);

                // License Plate
                label = document.createElement('label');
                label.textContent = 'License Plate: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-license-plate`;
                label.appendChild(input);
                vinPlateRow.appendChild(label);

                vehicleFieldset.appendChild(vinPlateRow);

                // Driver Fieldset
                const driverFieldset = document.createElement('fieldset');
                driverFieldset.className = 'driver-fieldset';
                const driverLegend = document.createElement('legend');
                driverLegend.textContent = 'Driver Information';
                driverFieldset.appendChild(driverLegend);

                label = document.createElement('label');
                label.textContent = 'Driver Name: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-driver-name`;
                label.appendChild(input);
                driverFieldset.appendChild(label);

                // Driver Address, City, State, Zip on the same line
                const driverAddrRow = document.createElement('div');
                driverAddrRow.style.display = 'flex';
                driverAddrRow.style.gap = '1em';
                driverAddrRow.style.flexWrap = 'wrap';

                // Address
                label = document.createElement('label');
                label.textContent = 'Address: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-driver-address`;
                input.style.width = '140px';
                label.appendChild(input);
                driverAddrRow.appendChild(label);

                // City
                label = document.createElement('label');
                label.textContent = 'City: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-driver-city`;
                input.style.width = '100px';
                label.appendChild(input);
                driverAddrRow.appendChild(label);

                // State
                label = document.createElement('label');
                label.textContent = 'State: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-driver-state`;
                input.maxLength = 2;
                input.style.width = '40px';
                label.appendChild(input);
                driverAddrRow.appendChild(label);

                // Zip
                label = document.createElement('label');
                label.textContent = 'Zip: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-driver-zip`;
                input.maxLength = 10;
                input.style.width = '70px';
                label.appendChild(input);
                driverAddrRow.appendChild(label);

                driverFieldset.appendChild(driverAddrRow);

                // Not Owner Checkbox
                const notOwnerRow = document.createElement('div');
                notOwnerRow.style.display = 'flex';
                notOwnerRow.style.alignItems = 'center';
                notOwnerRow.style.margin = '0.5em 0';

                const notOwnerLabel = document.createElement('label');
                notOwnerLabel.style.display = 'flex';
                notOwnerLabel.style.alignItems = 'center';
                notOwnerLabel.style.gap = '0.3em';

                const notOwnerCheckbox = document.createElement('input');
                notOwnerCheckbox.type = 'checkbox';
                notOwnerCheckbox.name = `structure-fire-vehicle-${i}-driver-not-owner`;

                notOwnerLabel.appendChild(notOwnerCheckbox);
                notOwnerLabel.appendChild(document.createTextNode('Driver is not Owner'));
                notOwnerRow.appendChild(notOwnerLabel);
                driverFieldset.appendChild(notOwnerRow);

                // Owner Information subsection (hidden by default)
                const ownerFieldset = document.createElement('fieldset');
                ownerFieldset.className = 'owner-fieldset';
                ownerFieldset.style.display = 'none';
                const ownerLegend = document.createElement('legend');
                ownerLegend.textContent = 'Owner Information';
                ownerFieldset.appendChild(ownerLegend);

                // Owner Name
                label = document.createElement('label');
                label.textContent = 'Owner Name: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-owner-name`;
                label.appendChild(input);
                ownerFieldset.appendChild(label);

                // Owner Address, City, State, Zip on the same line
                const ownerAddrRow = document.createElement('div');
                ownerAddrRow.style.display = 'flex';
                ownerAddrRow.style.gap = '1em';
                ownerAddrRow.style.flexWrap = 'wrap';

                // Address
                label = document.createElement('label');
                label.textContent = 'Address: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-owner-address`;
                input.style.width = '140px';
                label.appendChild(input);
                ownerAddrRow.appendChild(label);

                // City
                label = document.createElement('label');
                label.textContent = 'City: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-owner-city`;
                input.style.width = '100px';
                label.appendChild(input);
                ownerAddrRow.appendChild(label);

                // State
                label = document.createElement('label');
                label.textContent = 'State: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-owner-state`;
                input.maxLength = 2;
                input.style.width = '40px';
                label.appendChild(input);
                ownerAddrRow.appendChild(label);

                // Zip
                label = document.createElement('label');
                label.textContent = 'Zip: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-owner-zip`;
                input.maxLength = 10;
                input.style.width = '70px';
                input.inputMode = 'numeric';
                label.appendChild(input);
                ownerAddrRow.appendChild(label);

                ownerFieldset.appendChild(ownerAddrRow);

                // Show/hide owner info when checkbox is toggled
                notOwnerCheckbox.addEventListener('change', function() {
                    ownerFieldset.style.display = this.checked ? '' : 'none';
                });

                driverFieldset.appendChild(ownerFieldset);

                vehicleFieldset.appendChild(driverFieldset);

                // Insurance Fieldset
                const insuranceFieldset = document.createElement('fieldset');
                insuranceFieldset.className = 'insurance-fieldset';
                const insuranceLegend = document.createElement('legend');
                insuranceLegend.textContent = 'Insurance Information';
                insuranceFieldset.appendChild(insuranceLegend);

                label = document.createElement('label');
                label.textContent = 'Insurance Company: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-company`;
                label.appendChild(input);
                insuranceFieldset.appendChild(label);

                // Policy Number and NAIC Number on the same line
                const policyNaicRow = document.createElement('div');
                policyNaicRow.style.display = 'flex';
                policyNaicRow.style.gap = '1em';
                policyNaicRow.style.flexWrap = 'wrap';

                // Policy Number
                label = document.createElement('label');
                label.textContent = 'Policy Number: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-policy-number`;
                label.appendChild(input);
                policyNaicRow.appendChild(label);

                // NAIC Number
                label = document.createElement('label');
                label.textContent = 'NAIC Number: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-naic`;
                label.appendChild(input);
                policyNaicRow.appendChild(label);

                insuranceFieldset.appendChild(policyNaicRow);

                label = document.createElement('label');
                label.textContent = 'Insurance Phone Number: ';
                input = document.createElement('input');
                input.type = 'tel';
                input.name = `structure-fire-vehicle-${i}-insurance-phone`;
                label.appendChild(input);
                insuranceFieldset.appendChild(label);

                // Insurance Address, City, State, Zip on the same line
                const insuranceAddrRow = document.createElement('div');
                insuranceAddrRow.style.display = 'flex';
                insuranceAddrRow.style.gap = '1em';
                insuranceAddrRow.style.flexWrap = 'wrap';

                // Insurance Address
                label = document.createElement('label');
                label.textContent = 'Insurance Address: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-address`;
                input.style.width = '140px';
                label.appendChild(input);
                insuranceAddrRow.appendChild(label);

                // Insurance City
                label = document.createElement('label');
                label.textContent = 'City: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-city`;
                input.style.width = '100px';
                label.appendChild(input);
                insuranceAddrRow.appendChild(label);

                // Insurance State
                label = document.createElement('label');
                label.textContent = 'State: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-state`;
                input.maxLength = 2;
                input.style.width = '40px';
                label.appendChild(input);
                insuranceAddrRow.appendChild(label);

                // Insurance Zip
                label = document.createElement('label');
                label.textContent = 'Zip: ';
                input = document.createElement('input');
                input.type = 'text';
                input.name = `structure-fire-vehicle-${i}-insurance-zip`;
                input.maxLength = 10;
                input.style.width = '70px';
                input.inputMode = 'numeric';
                label.appendChild(input);
                insuranceAddrRow.appendChild(label);

                insuranceFieldset.appendChild(insuranceAddrRow);

                vehicleFieldset.appendChild(insuranceFieldset);

                // Incident checkboxes row (use flex for horizontal alignment)
                const incidentRow = document.createElement('div');
                incidentRow.style.display = 'flex';
                incidentRow.style.gap = '1.5em';
                incidentRow.style.alignItems = 'center';
                incidentRow.style.margin = '0.5em 0';

                // Helper for each checkbox
                function makeCheckbox(name, text) {
                    const label = document.createElement('label');
                    label.style.display = 'flex';
                    label.style.alignItems = 'center';
                    label.style.gap = '0.3em';
                    const input = document.createElement('input');
                    input.type = 'checkbox';
                    input.name = name;
                    label.appendChild(input);
                    label.appendChild(document.createTextNode(text));
                    return label;
                }

                incidentRow.appendChild(makeCheckbox(`structure-fire-vehicle-${i}-injuries`, 'Injuries'));
                incidentRow.appendChild(makeCheckbox(`structure-fire-vehicle-${i}-entrapment`, 'Entrapment'));
                incidentRow.appendChild(makeCheckbox(`structure-fire-vehicle-${i}-ejection`, 'Ejection'));
                incidentRow.appendChild(makeCheckbox(`structure-fire-vehicle-${i}-fatalities`, 'Fatalities'));

                vehicleFieldset.appendChild(incidentRow);

                // Notes for the vehicle (below insurance info)
                let notesLabel = document.createElement('label');
                notesLabel.textContent = 'Notes: ';
                let notesTextarea = document.createElement('textarea');
                notesTextarea.name = `structure-fire-vehicle-${i}-notes`;
                notesTextarea.rows = 2;
                notesTextarea.cols = 40;
                notesLabel.appendChild(notesTextarea);
                vehicleFieldset.appendChild(notesLabel);

                vehiclesDiv.appendChild(vehicleFieldset);
                }
            });
        }
    });
    function populateCrewSelect() {
        const personnelNames = Array.from(personnelList.children).map(li => li.firstChild.textContent.trim());
        const assignedPersonnel = getAssignedPersonnel(currentAssignApparatus);
        const assignDriver = document.getElementById('assign-driver');
        const assignCrew = document.getElementById('assign-crew');
        assignCrew.innerHTML = '';
        personnelNames.forEach(name => {
            if (
                name !== assignDriver.value &&
                !tempCrew.includes(name) &&
                (!assignedPersonnel.has(name) || (apparatusAssignments[currentAssignApparatus] && apparatusAssignments[currentAssignApparatus].crew.includes(name)))
            ) {
                const opt = document.createElement('option');
                opt.value = name;
                opt.textContent = name;
                assignCrew.appendChild(opt);
            }
        });
    }
    // Preview for the single photo upload input
    document.getElementById('photos-main').addEventListener('change', function() {
        const previewDiv = this.closest('.photo-upload-section').querySelector('.photo-preview');
        previewDiv.innerHTML = '';
        Array.from(this.files).forEach(file => {
            if (!file.type.startsWith('image/')) return;
            const img = document.createElement('img');
            img.style.maxWidth = '80px';
            img.style.maxHeight = '80px';
            img.style.margin = '0.2em';
            img.src = URL.createObjectURL(file);
            previewDiv.appendChild(img);
        });
    });
    document.getElementById('assign-driver').addEventListener('change', populateCrewSelect);

    document.getElementById('add-crew-member').addEventListener('click', () => {
        const assignCrew = document.getElementById('assign-crew');
        const selected = Array.from(assignCrew.selectedOptions).map(opt => opt.value);
        selected.forEach(name => {
            if (name && !tempCrew.includes(name)) {
                tempCrew.push(name);
            }
        });
        renderCrewList();
        populateCrewSelect();
    });

    function renderCrewList() {
        const crewList = document.getElementById('crew-list');
        crewList.innerHTML = '';
        tempCrew.forEach(name => {
            const li = document.createElement('li');
            li.textContent = name + ' ';
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.textContent = 'Remove';
            removeBtn.addEventListener('click', () => {
                tempCrew = tempCrew.filter(n => n !== name);
                renderCrewList();
                populateCrewSelect();
            });
            li.appendChild(removeBtn);
            crewList.appendChild(li);
        });
    }

    document.getElementById('save-assignment').addEventListener('click', () => {
        const assignDriver = document.getElementById('assign-driver');
        apparatusAssignments[currentAssignApparatus] = {
            driver: assignDriver ? assignDriver.value : '',
            crew: [...tempCrew]
        };
        document.getElementById('apparatus-assign-section').style.display = 'none';
        currentAssignApparatus = null;
        tempCrew = [];
        renderApparatusAssignments();
    });

    document.getElementById('cancel-assignment').addEventListener('click', () => {
        document.getElementById('apparatus-assign-section').style.display = 'none';
        currentAssignApparatus = null;
        tempCrew = [];
    });

    function renderApparatusAssignments() {
        Array.from(apparatusList.children).forEach(li => {
            const app = li.firstChild.textContent.trim();
            const assignment = apparatusAssignments[app];
            // Remove any previous assignment display
            let assignmentSpan = li.querySelector('.assignment-span');
            if (assignmentSpan) assignmentSpan.remove();

            if (assignment) {
                let text = '';
                if (app !== "POV" && assignment.driver) {
                    text += ` | Driver: ${assignment.driver}`;
                }
                if (assignment.crew && assignment.crew.length) {
                    text += ` | Crew: ${assignment.crew.join(', ')}`;
                }
                assignmentSpan = document.createElement('span');
                assignmentSpan.className = 'assignment-span';
                assignmentSpan.style.fontStyle = 'italic';
                assignmentSpan.style.marginLeft = '0.5em';
                assignmentSpan.textContent = text;
                const btnContainer = li.querySelector('div');
                if (btnContainer) {
                    li.insertBefore(assignmentSpan, btnContainer);
                } else {
                    li.appendChild(assignmentSpan);
                }
            }
        });
    }

    function updateApparatusAssignmentsOnPersonnelChange() {
        // Remove assignments for personnel no longer in the bank
        const personnelNames = Array.from(personnelList.children).map(li => li.firstChild.textContent.trim());
        Object.keys(apparatusAssignments).forEach(app => {
            const assignment = apparatusAssignments[app];
            if (assignment.driver && !personnelNames.includes(assignment.driver)) {
                assignment.driver = '';
            }
            if (assignment.crew) {
                assignment.crew = assignment.crew.filter(name => personnelNames.includes(name));
            }
        });
        renderApparatusAssignments();
    }

    insertApparatusBtn.addEventListener('click', () => {
        const selected = Array.from(apparatusSelect.selectedOptions).map(opt => opt.value);
        const existing = Array.from(apparatusList.children).map(li => li.firstChild.textContent.trim());
        selected.forEach(app => {
            if (!existing.includes(app)) {
                const li = document.createElement('li');
                li.textContent = app;

                // Button container
                const btnContainer = document.createElement('div');
                btnContainer.style.display = 'flex';
                btnContainer.style.gap = '0.5em';
                btnContainer.style.marginTop = '0.5em';

                // Assign button
                const assignBtn = document.createElement('button');
                assignBtn.type = 'button';
                assignBtn.textContent = 'Assign';
                assignBtn.addEventListener('click', () => openAssignSection(app));
                btnContainer.appendChild(assignBtn);

                // Remove button
                const removeBtn = document.createElement('button');
                removeBtn.type = 'button';
                removeBtn.textContent = 'Remove';
                removeBtn.addEventListener('click', () => {
                    li.remove();
                    delete apparatusAssignments[app];
                    updateApparatusCounts();
                    renderApparatusAssignments();
                });
                btnContainer.appendChild(removeBtn);

                li.appendChild(document.createElement('br'));
                li.appendChild(btnContainer);
                apparatusList.appendChild(li);
            }
        });
        updateApparatusCounts();
        renderApparatusAssignments();
    });

    // --- Dynamic Section Show/Hide Logic ---
    document.getElementById('call-type').addEventListener('change', function() {
        const callType = this.value;
        // Hide all sections
        Object.values(callTypeSectionMap).forEach(id => {
            const el = document.getElementById(id);
            if (el) el.style.display = 'none';
        });
        // Show the selected section
        if (callTypeSectionMap[callType]) {
            const section = document.getElementById(callTypeSectionMap[callType]);
            if (section) section.style.display = '';
        }
    });
    document.getElementById('call-type-2').addEventListener('change', function() {
        const callType2 = this.value;
        const allTypeSectionMap = {
            "Landing Zone": "landing-zone-section",
            "Other": "other-section"
        };

        // Remove any previous secondary section
        const secondaryContainer = document.getElementById('secondary-call-type-section');
        secondaryContainer.innerHTML = '';

        // Don't show if none or same as primary
        const primaryType = document.getElementById('call-type').value;
        if (!callType2 || callType2 === primaryType) return;

        // Clone the section and append it to the secondary container
        const sectionId = allTypeSectionMap[callType2];
        if (sectionId) {
            const originalSection = document.getElementById(sectionId);
            if (originalSection) {
                // Clone the node (deep clone)
                const clone = originalSection.cloneNode(true);
                clone.style.display = '';

                // Optionally, add a heading
                const heading = document.createElement('legend');
                heading.textContent = 'Second Call Type Details';
                if (clone.querySelector('legend')) {
                    clone.querySelector('legend').textContent = `Second Call Type: ${callType2} Details`;
                } else {
                    clone.insertBefore(heading, clone.firstChild);
                }

                // --- Copy dynamic containers if present ---
                // Landing Zone
                if (callType2 === "Landing Zone") {
                    const origHeli = originalSection.querySelector('#landing-zone-helicopters-container');
                    const cloneHeli = clone.querySelector('#landing-zone-helicopters-container');
                    if (origHeli && cloneHeli) {
                        cloneHeli.innerHTML = origHeli.innerHTML;
                    }
                }
                secondaryContainer.appendChild(clone);
                if (callType2 === "Landing Zone") {
                const lzNumHelis = clone.querySelector('#landing-zone-num-helicopters');
                const lzHelisContainer = clone.querySelector('#landing-zone-helicopters-container');
                if (lzNumHelis && lzHelisContainer) {
                    lzNumHelis.addEventListener('input', function() {
                        lzHelisContainer.innerHTML = '';
                        const num = parseInt(this.value, 10);
                        if (isNaN(num) || num < 1) return;
                        for (let i = 1; i <= num; i++) {
                            const heliFieldset = document.createElement('fieldset');
                            heliFieldset.className = `vehicle-fieldset vehicle-${i}`;
                            const legend = document.createElement('legend');
                            legend.textContent = `Helicopter ${i}`;
                            heliFieldset.appendChild(legend);

                            // Call Sign dropdown
                            let label = document.createElement('label');
                            label.textContent = 'Helicopter Call Sign: ';
                            let callSignSelect = document.createElement('select');
                            callSignSelect.name = `landing-zone-helicopter-${i}-call-sign`;
                            callSignSelect.id = `landing-zone-helicopter-${i}-call-sign`;
                            callSignSelect.style.width = '140px';
                            callSignSelect.innerHTML = `
                                <option value="">Select Call Sign</option>
                                <option value="Air Evac 85">Air Evac 85</option>
                                <option value="Air Evac 116">Air Evac 116</option>
                                <option value="Air Evac 121">Air Evac 121</option>
                                <option value="HealthNet 7">HealthNet 7</option>
                                <option value="Other">Other</option>
                            `;
                            callSignSelect.addEventListener('change', function() {
                                const otherInput = document.getElementById(`landing-zone-helicopter-${i}-call-sign-other`);
                                if (this.value === 'Other') {
                                    otherInput.style.display = 'inline-block';
                                } else {
                                    otherInput.style.display = 'none';
                                    otherInput.value = '';
                                }
                            });
                            label.appendChild(callSignSelect);
                            
                            // Other call sign input (hidden by default)
                            let otherInput = document.createElement('input');
                            otherInput.type = 'text';
                            otherInput.name = `landing-zone-helicopter-${i}-call-sign-other`;
                            otherInput.id = `landing-zone-helicopter-${i}-call-sign-other`;
                            otherInput.style.width = '120px';
                            otherInput.style.marginLeft = '5px';
                            otherInput.style.display = 'none';
                            otherInput.placeholder = 'Enter call sign';
                            label.appendChild(otherInput);
                            
                            heliFieldset.appendChild(label);

                            // Patient Name
                            label = document.createElement('label');
                            label.textContent = 'Patient Name (if applicable): ';
                            input = document.createElement('input');
                            input.type = 'text';
                            input.name = `landing-zone-helicopter-${i}-patient`;
                            label.appendChild(input);
                            heliFieldset.appendChild(label);

                            // Destination
                            label = document.createElement('label');
                            label.textContent = 'Destination of Transfer: ';
                            input = document.createElement('input');
                            input.type = 'text';
                            input.name = `landing-zone-helicopter-${i}-destination`;
                            label.appendChild(input);
                            heliFieldset.appendChild(label);

                            // Landing Time
                            label = document.createElement('label');
                            label.textContent = 'Landing Time: ';
                            input = document.createElement('input');
                            input.type = 'text';
                            input.name = `landing-zone-helicopter-${i}-landing-time`;
                            input.style.width = '80px';
                            input.placeholder = 'HH:MM';
                            label.appendChild(input);
                            heliFieldset.appendChild(label);

                            // Departure Time
                            label = document.createElement('label');
                            label.textContent = 'Departure Time: ';
                            input = document.createElement('input');
                            input.type = 'text';
                            input.name = `landing-zone-helicopter-${i}-departure-time`;
                            input.style.width = '80px';
                            input.placeholder = 'HH:MM';
                            label.appendChild(input);
                            heliFieldset.appendChild(label);

                            lzHelisContainer.appendChild(heliFieldset);
                        }
                    });
                }
            }
            }
        }
    });
    // Show/hide owner/insurance info for Structure Fire
    document.getElementById('occupant-rents').addEventListener('change', function() {
        document.getElementById('owner-info-section').style.display = this.checked ? '' : 'none';
    });
    document.getElementById('insurance-checkbox').addEventListener('change', function() {
        document.getElementById('insurance-info-section').style.display = this.checked ? '' : 'none';
    });
    document.getElementById('level-of-origin').addEventListener('change', function() {
        document.getElementById('level-of-origin-other').style.display =
        this.value === 'Other' ? '' : 'none';
    });

    // MVC Extrication technique dropdown
    const mvcExtricationCheckbox = document.getElementById('mvc-extrication-checkbox');
    if (mvcExtricationCheckbox) {
        mvcExtricationCheckbox.addEventListener('change', toggleMVCExtricationTechnique);
    }

    // ...inside document.addEventListener('DOMContentLoaded', function() { ... })
    const atvHmtCheckbox = document.getElementById('atv-hmt-checkbox');
    const atvHmtSection = document.getElementById('atv-hmt-section');
    if (atvHmtCheckbox && atvHmtSection) {
        atvHmtCheckbox.addEventListener('change', function() {
            atvHmtSection.style.display = this.checked ? '' : 'none';
        });
    }

    // Helper to collect filled fields from a section
    function collectFilledFieldsFromSection(section) {
        let fields = [];
        if (!section) return fields;
        
        // First, collect regular fields that are direct children (not in nested fieldsets)
        const directControls = Array.from(section.querySelectorAll('input, select, textarea')).filter(
            el => {
                // Only include elements that aren't inside nested fieldsets
                const parentFieldset = el.closest('fieldset');
                const isInNestedFieldset = parentFieldset !== section && (
                    parentFieldset.classList.contains('vehicle-fieldset') || 
                    parentFieldset.classList.contains('subsection-fieldset')
                );
                
                // Also exclude vehicle-related inputs that are dynamically created
                const isVehicleField = el.name && (
                    el.name.includes('mvc-vehicle-') || 
                    el.name.includes('atv-vehicle-') ||
                    el.name.includes('structure-fire-vehicle-') ||
                    el.name.includes('vehicle-fire-vehicle-') ||
                    el.name.includes('landing-zone-helicopter-')
                );
                
                return !isInNestedFieldset && !isVehicleField;
            }
        );
        
        const structureTypeRadios = section.querySelectorAll('input[type="radio"][name="structure-use"]');
        if (structureTypeRadios.length) {
            const checked = Array.from(structureTypeRadios).find(r => r.checked);
            if (checked) {
                fields.push(`Structure Use: ${checked.value}`);
            }
        }
        
        directControls.forEach(el => {
            if (
                el.tagName === 'OPTION' ||
                el.tagName === 'BUTTON' ||
                el.tagName === 'FIELDSET' ||
                (el.type === "radio" && el.name === "structure-use")
            ) return;
            if (
                (el.type === "checkbox" && el.checked) ||
                (el.type === "radio" && el.checked) ||
                ((el.type !== "checkbox" && el.type !== "radio") && el.value && el.value.trim() !== "")
            ) {
                let label = "";
                if (el.labels && el.labels.length > 0) {
                    label = el.labels[0].innerText.split('\n')[0].replace(/:$/, '').trim();
                } else {
                    label = el.name;
                }
                let value;
                if (el.tagName === "SELECT") {
                    value = el.options[el.selectedIndex]?.text || el.value;
                } else {
                    value = el.type === "checkbox" ? "YES" : el.value;
                }
                fields.push(`${label}: ${value}`);
            }
        });
        
        // Handle subsection fieldsets (like HMT Trail Details)
        const subsectionFieldsets = section.querySelectorAll('fieldset.subsection-fieldset');
        subsectionFieldsets.forEach(subsectionFieldset => {
            // Only include if it's visible (not display:none)
            if (subsectionFieldset.style.display !== 'none') {
                const legend = subsectionFieldset.querySelector('legend');
                if (legend) {
                    fields.push(`\n--- ${legend.textContent} ---`);
                }
                
                const subsectionFields = collectFieldsFromElement(subsectionFieldset);
                fields = fields.concat(subsectionFields);
            }
        });
        
        // Handle vehicle fieldsets
        const vehicleFieldsets = section.querySelectorAll('fieldset.vehicle-fieldset');
        vehicleFieldsets.forEach(vehicleFieldset => {
            const legend = vehicleFieldset.querySelector('legend');
            if (legend) {
                fields.push(`\n--- ${legend.textContent} ---`);
            }
            
            const vehicleFields = collectFieldsFromElement(vehicleFieldset);
            fields = fields.concat(vehicleFields);
        });
        
        return fields;
    }

    // Helper function to collect fields from any element
    function collectFieldsFromElement(element) {
        let fields = [];
        const controls = Array.from(element.querySelectorAll('input, select, textarea')).filter(
            el => el.tagName !== 'OPTION'
        );
        
        const structureTypeRadios = element.querySelectorAll('input[type="radio"][name="structure-use"]');
        if (structureTypeRadios.length) {
            const checked = Array.from(structureTypeRadios).find(r => r.checked);
            if (checked) {
                fields.push(`Structure Use: ${checked.value}`);
            }
        }
        
        controls.forEach(el => {
            if (
                el.tagName === 'OPTION' ||
                el.tagName === 'BUTTON' ||
                el.tagName === 'FIELDSET' ||
                (el.type === "radio" && el.name === "structure-use")
            ) return;
            if (
                (el.type === "checkbox" && el.checked) ||
                (el.type === "radio" && el.checked) ||
                ((el.type !== "checkbox" && el.type !== "radio") && el.value && el.value.trim() !== "")
            ) {
                let label = "";
                if (el.labels && el.labels.length > 0) {
                    label = el.labels[0].innerText.split('\n')[0].replace(/:$/, '').trim();
                } else {
                    label = el.name;
                }
                let value;
                if (el.tagName === "SELECT") {
                    value = el.options[el.selectedIndex]?.text || el.value;
                } else {
                    value = el.type === "checkbox" ? "YES" : el.value;
                }
                fields.push(`${label}: ${value}`);
            }
        });
        return fields;
    }
    function getAllPhotoInputsWithLabels() {
        const input = document.getElementById('photos-main');
        if (input && input.files && input.files.length > 0) {
            return [{ input, label: 'Attached Photo(s)' }];
        }
        return [];
    }
    document.getElementById('landing-zone-num-helicopters').addEventListener('input', function() {
        const container = document.getElementById('landing-zone-helicopters-container');
        container.innerHTML = '';
        const num = parseInt(this.value, 10);
        if (isNaN(num) || num < 1) return;
        for (let i = 1; i <= num; i++) {
            const heliFieldset = document.createElement('fieldset');
            heliFieldset.className = `vehicle-fieldset vehicle-${i}`;
            heliFieldset.style.cssText = 'margin-bottom: 1em; padding: 0.5em; border: 1px solid #ccc; border-radius: 4px;';
            const legend = document.createElement('legend');
            legend.textContent = `Aircraft ${i}`;
            heliFieldset.appendChild(legend);

            // Create container div for flex layout
            const containerDiv = document.createElement('div');
            containerDiv.style.cssText = 'display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-bottom: 0.5em;';

            // Aircraft Type
            let label = document.createElement('label');
            label.textContent = 'Aircraft Type: ';
            let select = document.createElement('select');
            select.name = `landing-zone-aircraft-${i}-type`;
            select.style.width = '150px';
            select.innerHTML = `
                <option value="">Select Type</option>
                <option value="EMS Helicopter">EMS Helicopter</option>
                <option value="Law Enforcement">Law Enforcement</option>
                <option value="Search & Rescue">Search & Rescue</option>
                <option value="Military">Military</option>
                <option value="News/Media">News/Media</option>
                <option value="Private">Private</option>
                <option value="Other">Other</option>
            `;
            label.appendChild(select);
            containerDiv.appendChild(label);

            // Call Sign dropdown
            label = document.createElement('label');
            label.textContent = 'Call Sign: ';
            let callSignSelect = document.createElement('select');
            callSignSelect.name = `landing-zone-aircraft-${i}-call-sign`;
            callSignSelect.id = `landing-zone-aircraft-${i}-call-sign`;
            callSignSelect.style.width = '140px';
            callSignSelect.innerHTML = `
                <option value="">Select Call Sign</option>
                <option value="Air Evac 85">Air Evac 85</option>
                <option value="Air Evac 116">Air Evac 116</option>
                <option value="Air Evac 121">Air Evac 121</option>
                <option value="HealthNet 7">HealthNet 7</option>
                <option value="Other">Other</option>
            `;
            callSignSelect.addEventListener('change', function() {
                const otherInput = document.getElementById(`landing-zone-aircraft-${i}-call-sign-other`);
                if (this.value === 'Other') {
                    otherInput.style.display = 'inline-block';
                } else {
                    otherInput.style.display = 'none';
                    otherInput.value = '';
                }
            });
            label.appendChild(callSignSelect);
            
            // Other call sign input (hidden by default)
            let otherInput = document.createElement('input');
            otherInput.type = 'text';
            otherInput.name = `landing-zone-aircraft-${i}-call-sign-other`;
            otherInput.id = `landing-zone-aircraft-${i}-call-sign-other`;
            otherInput.style.width = '120px';
            otherInput.style.marginLeft = '5px';
            otherInput.style.display = 'none';
            otherInput.placeholder = 'Enter call sign';
            label.appendChild(otherInput);
            
            containerDiv.appendChild(label);

            heliFieldset.appendChild(containerDiv);

            // Second row for patient and destination
            const containerDiv2 = document.createElement('div');
            containerDiv2.style.cssText = 'display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end;';

            // Patient Name
            label = document.createElement('label');
            label.textContent = 'Patient Name (if applicable): ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `landing-zone-aircraft-${i}-patient`;
            input.style.width = '180px';
            label.appendChild(input);
            containerDiv2.appendChild(label);

            // Destination
            label = document.createElement('label');
            label.textContent = 'Destination: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `landing-zone-aircraft-${i}-destination`;
            input.style.width = '180px';
            input.placeholder = 'Hospital/Location';
            label.appendChild(input);
            containerDiv2.appendChild(label);

            heliFieldset.appendChild(containerDiv2);

            // Third row for times
            const containerDiv3 = document.createElement('div');
            containerDiv3.style.cssText = 'display: flex; gap: 1.5em; flex-wrap: wrap; align-items: flex-end; margin-top: 0.5em;';

            // Landing Time
            label = document.createElement('label');
            label.textContent = 'Landing Time: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `landing-zone-aircraft-${i}-landing-time`;
            input.style.width = '80px';
            input.placeholder = 'HH:MM';
            label.appendChild(input);
            containerDiv3.appendChild(label);

            // Departure Time
            label = document.createElement('label');
            label.textContent = 'Departure Time: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `landing-zone-aircraft-${i}-departure-time`;
            input.style.width = '80px';
            input.placeholder = 'HH:MM';
            label.appendChild(input);
            containerDiv3.appendChild(label);

            heliFieldset.appendChild(containerDiv3);
            container.appendChild(heliFieldset);
        }
    });
    
    // --- SUBMIT HANDLER ---
    form.addEventListener('submit', function (e) {
        isSubmitting = true;
        e.preventDefault();
        const submitBtn = form.querySelector('button[type="submit"]');
        if (submitBtn) submitBtn.disabled = true;
        document.getElementById('message').textContent = 'Sending email...';

        let filledFields = [];

        // 1. Run Details (Call Number, Date, Times, method of alarm) ---
        const runNumberSuffix = document.getElementById('run-number-suffix').value || '';
        const runNumberPrefix = document.getElementById('run-number-prefix') ? document.getElementById('run-number-prefix').textContent : '';
        const runNumber = (runNumberPrefix + runNumberSuffix).trim();
        const date = form.elements['date'] ? form.elements['date'].value : '';
        const alarm = form.elements['alarm'] ? form.elements['alarm'].value : '';
        const responding = form.elements['responding'] ? form.elements['responding'].value : '';
        const onScene = form.elements['on-scene'] ? form.elements['on-scene'].value : '';
        const inService = form.elements['in-service'] ? form.elements['in-service'].value : '';
        const methodOfAlarmSelect = document.getElementById('method-of-alarm');
        let methodOfAlarmValue = '';
        if (methodOfAlarmSelect && methodOfAlarmSelect.value) {
            methodOfAlarmValue = methodOfAlarmSelect.options[methodOfAlarmSelect.selectedIndex].text;
        }

        filledFields.push('--- Run Details ---');
        if (runNumber) filledFields.push(`Run Number: ${runNumber}`);
        if (date) filledFields.push(`Date: ${date}`);
        if (alarm) filledFields.push(`Alarm Time: ${alarm}`);
        if (responding) filledFields.push(`Responding Time: ${responding}`);
        if (onScene) filledFields.push(`On Scene Time: ${onScene}`);
        if (inService) filledFields.push(`In Service Time: ${inService}`);
        if (methodOfAlarmValue) filledFields.push(`Method of Alarm: ${methodOfAlarmValue}`);

        // 2. Incident Location (fieldset 2)
        filledFields.push('\n--- Incident Location ---');
        filledFields = filledFields.concat(collectFilledFieldsFromSection(form.querySelector('fieldset:nth-of-type(2)')));

        // 3. Responding Personnel
        filledFields.push('\n--- Responding Personnel ---');
        Array.from(document.getElementById('personnel-list').children).forEach(li => {
            filledFields.push(li.firstChild.textContent.trim());
        });

        // 4. Incident Commander, Safety Officer, First Unit (with hard character limit for label)
        const roleFields = [
            { id: 'incident-commander', label: 'Incident Commander' },
            { id: 'safety-officer', label: 'Safety Officer' },
            { id: 'first-unit', label: 'First Unit On Scene' }
        ];
        const maxRoleLabelLength = 22; // adjust as needed for alignment

        filledFields.push('\n--- Command & First Unit ---');
            roleFields.forEach(role => {
                const el = document.getElementById(role.id);
                if (el && el.value && el.value.trim() !== "") {
                    filledFields.push(`${role.label}: ${el.value}`);
                }
            });

        // 5. Responding Apparatus count
        filledFields.push('\n--- Responding Apparatus Count ---');
        filledFields.push(`Engines: ${document.getElementById('engine-count').textContent}`);
        filledFields.push(`Tankers: ${document.getElementById('tanker-count').textContent}`);
        filledFields.push(`Rescues: ${document.getElementById('rescue-count').textContent}`);
        filledFields.push(`ATVs: ${document.getElementById('atv-count').textContent}`);

        // 6. Responding Apparatus details (with driver/crew)
        filledFields.push('\n--- Responding Apparatus Details ---');
        Array.from(document.getElementById('apparatus-list').children).forEach(li => {
            let line = li.firstChild.textContent.trim();
            const assignmentSpan = li.querySelector('.assignment-span');
            if (assignmentSpan) {
                line += assignmentSpan.textContent;
            }
            filledFields.push(line);
            filledFields.push('-');
            
        });

        // 7. Selected Call Type and Details
        const callType = form.elements['call-type'].value;
        if (callType) {
            filledFields.push(`\n--- Call Type ---`);
            filledFields.push(callType);
            if (callTypeSectionMap[callType]) {
                filledFields.push(`\n--- ${callType} Details ---`);
                const section = document.getElementById(callTypeSectionMap[callType]);
                filledFields = filledFields.concat(collectFilledFieldsFromSection(section));
            }
        }
        const callType2 = form.elements['call-type-2'].value;
        if (callType2 && callTypeSectionMap[callType2]) {
            filledFields.push(`\n--- Second Call Type ---`);
            filledFields.push(callType2);
            filledFields.push(`\n--- ${callType2} Details ---`);
            const secondaryContainer = document.getElementById('secondary-call-type-section');
            const section2 = secondaryContainer.querySelector('fieldset');
            if (section2) {
                filledFields = filledFields.concat(collectFilledFieldsFromSection(section2));
            }
        }    
        // Remove blank lines
        filledFields = filledFields.filter(line => line && line.trim() !== '');

        // --- Mailto logic ---
        const subjectText = `Delbarton VFD Incident Report${date ? ' - ' + date : ''}${callType ? ' - ' + callType : ''}`;
        const subject = encodeURIComponent(subjectText);
        const body = encodeURIComponent(filledFields.join('\n'));
        let mailto = `mailto:dvfd247@gmail.com,delbarton239@yahoo.com,delbartonvfd@gmail.com?subject=${subject}&body=${body}`;

        window.location.href = mailto;

        document.getElementById('message').textContent = 'Your email app should now open. If not, please check your device settings.';
        if (submitBtn) submitBtn.disabled = false;
        isSubmitting = false;
    });

    // --- PDF HANDLER ---
    document.getElementById('download-report').addEventListener('click', function () {
        let filledFields = [];

        // 1. Run Details (Call Number, Date, Times, Method of Alarm) ---
        const runNumberSuffix = document.getElementById('run-number-suffix').value || '';
        const runNumberPrefix = document.getElementById('run-number-prefix') ? document.getElementById('run-number-prefix').textContent : '';
        const runNumber = (runNumberPrefix + runNumberSuffix).trim();
        const date = form.elements['date'] ? form.elements['date'].value : '';
        const alarm = form.elements['alarm'] ? form.elements['alarm'].value : '';
        const responding = form.elements['responding'] ? form.elements['responding'].value : '';
        const onScene = form.elements['on-scene'] ? form.elements['on-scene'].value : '';
        const inService = form.elements['in-service'] ? form.elements['in-service'].value : '';

        filledFields.push('--- Run Details ---');
        if (runNumber) filledFields.push(`Run Number           : ${runNumber}`);
        if (date) filledFields.push(`Date                 : ${date}`);
        if (alarm) filledFields.push(`Alarm Time           : ${alarm}`);
        if (responding) filledFields.push(`Responding Time      : ${responding}`);
        if (onScene) filledFields.push(`On Scene Time        : ${onScene}`);
        if (inService) filledFields.push(`In Service Time      : ${inService}`);

        // Method of Alarm (with hard character limit for label) ---
        const methodOfAlarmSelect = document.getElementById('method-of-alarm');
        let methodOfAlarmValue = '';
        if (methodOfAlarmSelect && methodOfAlarmSelect.value) {
            methodOfAlarmValue = methodOfAlarmSelect.options[methodOfAlarmSelect.selectedIndex].text;
        }
        // Set label to max 20 chars, pad with spaces if shorter
        let methodOfAlarmLabel = 'Method of Alarm';
        const maxLabelLength = 20;
        if (methodOfAlarmLabel.length > maxLabelLength) {
            methodOfAlarmLabel = methodOfAlarmLabel.substring(0, maxLabelLength);
        } else {
            methodOfAlarmLabel = methodOfAlarmLabel.padEnd(maxLabelLength, ' ');
        }
        filledFields.push(`${methodOfAlarmLabel}: ${methodOfAlarmValue}`);

        // 2. Incident Location (fieldset 2)
        filledFields.push('\n--- Incident Location ---');
        filledFields = filledFields.concat(collectFilledFieldsFromSection(form.querySelector('fieldset:nth-of-type(2)')));

        // 3. Responding Personnel
        filledFields.push('\n--- Responding Personnel ---');
        Array.from(document.getElementById('personnel-list').children).forEach(li => {
            filledFields.push(li.firstChild.textContent.trim());
        });

        // 4. Incident Commander, Safety Officer, First Unit (with hard character limit for label)
        const roleFields = [
            { id: 'incident-commander', label: 'Incident Commander' },
            { id: 'safety-officer', label: 'Safety Officer' },
            { id: 'first-unit', label: 'First Unit On Scene' }
        ];
        const maxRoleLabelLength = 22; // adjust as needed for alignment

        filledFields.push('\n--- Command & First Unit ---');
        roleFields.forEach(role => {
            const el = document.getElementById(role.id);
            if (el && el.value && el.value.trim() !== "") {
                let roleLabel = role.label;
                if (roleLabel.length > maxRoleLabelLength) {
                    roleLabel = roleLabel.substring(0, maxRoleLabelLength);
                } else {
                    roleLabel = roleLabel.padEnd(maxRoleLabelLength, ' ');
                }
                filledFields.push(`${roleLabel}: ${el.value}`);
            }
        });

        // 5. Responding Apparatus count
        filledFields.push('\n--- Responding Apparatus Count ---');
        filledFields.push(`Engines: ${document.getElementById('engine-count').textContent}`);
        filledFields.push(`Tankers: ${document.getElementById('tanker-count').textContent}`);
        filledFields.push(`Rescues: ${document.getElementById('rescue-count').textContent}`);
        filledFields.push(`ATVs: ${document.getElementById('atv-count').textContent}`);

        // 6. Responding Apparatus details (with driver/crew)
        filledFields.push('\n--- Responding Apparatus Details ---');
        Array.from(document.getElementById('apparatus-list').children).forEach(li => {
            let line = li.firstChild.textContent.trim();
            const assignmentSpan = li.querySelector('.assignment-span');
            if (assignmentSpan) {
                line += assignmentSpan.textContent;
            }
            filledFields.push(line);
            filledFields.push('-');
        });

        // 7. Selected Call Type and Details
        const callType = form.elements['call-type'].value;
        if (callType) {
            filledFields.push(`\n--- Call Type ---`);
            filledFields.push(callType);
            if (callTypeSectionMap[callType]) {
                filledFields.push(`\n--- ${callType} Details ---`);
                const section = document.getElementById(callTypeSectionMap[callType]);
                filledFields = filledFields.concat(collectFilledFieldsFromSection(section));
            }
        }
        // ...after first call type details...
        const callType2 = form.elements['call-type-2'].value;
        if (callType2 && callTypeSectionMap[callType2]) {
            filledFields.push(`\n--- Second Call Type ---`);
            filledFields.push(callType2);
            filledFields.push(`\n--- ${callType2} Details ---`);
            const secondaryContainer = document.getElementById('secondary-call-type-section');
            const section2 = secondaryContainer.querySelector('fieldset');
            if (section2) {
                filledFields = filledFields.concat(collectFilledFieldsFromSection(section2));
            }
        }

        // Remove blank lines
        filledFields = filledFields.filter(line => line && line.trim() !== '');

        // Generate PDF
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(14);
        doc.text("Delbarton VFD Incident Report", 10, 15);
        doc.setFontSize(10);
        let y = 25;
        filledFields.forEach(line => {
            if (y > 280) {
                doc.addPage();
                y = 15;
            }
            doc.text(line, 10, y);
            y += 7;
        });
        // --- Add images at the bottom ---
        // 4x6 inches max (portrait: 288x432pt, landscape: 432x288pt)
        const maxW = 120, maxH = 90;
        const photoInputs = getAllPhotoInputsWithLabels();
        let addImagePromises = [];
        photoInputs.forEach(({input, label}) => {
            if (y > 250) { doc.addPage(); y = 15; }
            doc.setFontSize(12);
            doc.text(label, 10, y);
            y += 8;
            Array.from(input.files).forEach(file => {
                const promise = new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            let width = img.width;
                            let height = img.height;
                            // Scale down to fit within 4x6 or 6x4 inches
                            const wRatio = maxW / width;
                            const hRatio = maxH / height;
                            const scale = Math.min(wRatio, hRatio, 1);
                            width = width * scale;
                            height = height * scale;
                            if (y + height > 280) { doc.addPage(); y = 15; }
                            doc.addImage(e.target.result, 'JPEG', 10, y, width, height);
                            y += height + 5;
                            resolve();
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
                addImagePromises.push(promise);
            });
        });
        Promise.all(addImagePromises).then(() => {
        doc.save("incident-report.pdf");
    });
        document.getElementById('message').textContent = 'PDF generated successfully!';
    });
});
    // Show/hide the Structure Fire Details section based on selection

    document.getElementById('occupant-rents').addEventListener('change', function() {
        document.getElementById('owner-info-section').style.display = this.checked ? '' : 'none';
    });
    document.getElementById('insurance-checkbox').addEventListener('change', function() {
        document.getElementById('insurance-info-section').style.display = this.checked ? '' : 'none';
    });

    // For MVC
    document.getElementById('mvc-num-vehicles').addEventListener('input', function() {
    const container = document.getElementById('mvc-vehicles-container');
    container.innerHTML = '';
    const num = parseInt(this.value, 10);
    if (isNaN(num) || num < 1) return;
    for (let i = 1; i <= num; i++) {
        // Create a fieldset for each vehicle
        const vehicleFieldset = document.createElement('fieldset');
        vehicleFieldset.className = `vehicle-fieldset vehicle-${i}`;
        const legend = document.createElement('legend');
        legend.textContent = `Vehicle ${i}`;
        vehicleFieldset.appendChild(legend);

        // Inline row for Year, Make, Model
        const inlineRow = document.createElement('div');
        inlineRow.style.display = 'flex';
        inlineRow.style.gap = '1em';
        inlineRow.style.flexWrap = 'wrap';
        inlineRow.style.alignItems = 'flex-end';

        // Year
        let label = document.createElement('label');
        label.textContent = 'Year: ';
        let input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-year`;
        input.style.width = '60px';
        input.inputMode = 'numeric';
        label.appendChild(input);
        inlineRow.appendChild(label);

        // Make
        label = document.createElement('label');
        label.textContent = 'Make: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-make`;
        input.style.width = '80px';
        label.appendChild(input);
        inlineRow.appendChild(label);

        // Model
        label = document.createElement('label');
        label.textContent = 'Model: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-model`;
        input.style.width = '100px';
        label.appendChild(input);
        inlineRow.appendChild(label);

        vehicleFieldset.appendChild(inlineRow);

        // VIN Number and License Plate on the same line
        const vinPlateRow = document.createElement('div');
        vinPlateRow.style.display = 'flex';
        vinPlateRow.style.gap = '1em';
        vinPlateRow.style.flexWrap = 'wrap';

        // VIN Number
        label = document.createElement('label');
        label.textContent = 'VIN Number: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-vin`;
        input.size = 17;
        input.maxLength = 17;
        input.style.width = '160px';
        label.appendChild(input);
        vinPlateRow.appendChild(label);

        // License Plate
        label = document.createElement('label');
        label.textContent = 'License Plate: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-license-plate`;
        label.appendChild(input);
        vinPlateRow.appendChild(label);

        vehicleFieldset.appendChild(vinPlateRow);

        // Driver Fieldset
        const driverFieldset = document.createElement('fieldset');
        driverFieldset.className = 'driver-fieldset';
        const driverLegend = document.createElement('legend');
        driverLegend.textContent = 'Driver Information';
        driverFieldset.appendChild(driverLegend);

        label = document.createElement('label');
        label.textContent = 'Driver Name: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-driver-name`;
        label.appendChild(input);
        driverFieldset.appendChild(label);

        // Driver Address, City, State, Zip on the same line
        const driverAddrRow = document.createElement('div');
        driverAddrRow.style.display = 'flex';
        driverAddrRow.style.gap = '1em';
        driverAddrRow.style.flexWrap = 'wrap';

        // Address
        label = document.createElement('label');
        label.textContent = 'Address: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-driver-address`;
        input.style.width = '140px';
        label.appendChild(input);
        driverAddrRow.appendChild(label);

        // City
        label = document.createElement('label');
        label.textContent = 'City: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-driver-city`;
        input.style.width = '100px';
        label.appendChild(input);
        driverAddrRow.appendChild(label);

        // State
        label = document.createElement('label');
        label.textContent = 'State: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-driver-state`;
        input.maxLength = 2;
        input.style.width = '40px';
        label.appendChild(input);
        driverAddrRow.appendChild(label);

        // Zip
        label = document.createElement('label');
        label.textContent = 'Zip: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-driver-zip`;
        input.maxLength = 10;
        input.style.width = '70px';
        label.appendChild(input);
        driverAddrRow.appendChild(label);

        driverFieldset.appendChild(driverAddrRow);

        // Not Owner Checkbox
        const notOwnerRow = document.createElement('div');
        notOwnerRow.style.display = 'flex';
        notOwnerRow.style.alignItems = 'center';
        notOwnerRow.style.margin = '0.5em 0';

        const notOwnerLabel = document.createElement('label');
        notOwnerLabel.style.display = 'flex';
        notOwnerLabel.style.alignItems = 'center';
        notOwnerLabel.style.gap = '0.3em';

        const notOwnerCheckbox = document.createElement('input');
        notOwnerCheckbox.type = 'checkbox';
        notOwnerCheckbox.name = `mvc-vehicle-${i}-driver-not-owner`;

        notOwnerLabel.appendChild(notOwnerCheckbox);
        notOwnerLabel.appendChild(document.createTextNode('Driver is not Owner'));
        notOwnerRow.appendChild(notOwnerLabel);
        driverFieldset.appendChild(notOwnerRow);

        // Owner Information subsection (hidden by default)
        const ownerFieldset = document.createElement('fieldset');
        ownerFieldset.className = 'owner-fieldset';
        ownerFieldset.style.display = 'none';
        const ownerLegend = document.createElement('legend');
        ownerLegend.textContent = 'Owner Information';
        ownerFieldset.appendChild(ownerLegend);

        // Owner Name
        label = document.createElement('label');
        label.textContent = 'Owner Name: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-owner-name`;
        label.appendChild(input);
        ownerFieldset.appendChild(label);

        // Owner Address, City, State, Zip on the same line
        const ownerAddrRow = document.createElement('div');
        ownerAddrRow.style.display = 'flex';
        ownerAddrRow.style.gap = '1em';
        ownerAddrRow.style.flexWrap = 'wrap';

        // Address
        label = document.createElement('label');
        label.textContent = 'Address: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-owner-address`;
        input.style.width = '140px';
        label.appendChild(input);
        ownerAddrRow.appendChild(label);

        // City
        label = document.createElement('label');
        label.textContent = 'City: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-owner-city`;
        input.style.width = '100px';
        label.appendChild(input);
        ownerAddrRow.appendChild(label);

        // State
        label = document.createElement('label');
        label.textContent = 'State: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-owner-state`;
        input.maxLength = 2;
        input.style.width = '40px';
        label.appendChild(input);
        ownerAddrRow.appendChild(label);

        // Zip
        label = document.createElement('label');
        label.textContent = 'Zip: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-owner-zip`;
        input.maxLength = 10;
        input.style.width = '70px';
        input.inputMode = 'numeric';
        label.appendChild(input);
        ownerAddrRow.appendChild(label);

        ownerFieldset.appendChild(ownerAddrRow);

        // Show/hide owner info when checkbox is toggled
        notOwnerCheckbox.addEventListener('change', function() {
            ownerFieldset.style.display = this.checked ? '' : 'none';
        });

        driverFieldset.appendChild(ownerFieldset);

        vehicleFieldset.appendChild(driverFieldset);

        // Insurance Fieldset
        const insuranceFieldset = document.createElement('fieldset');
        insuranceFieldset.className = 'insurance-fieldset';
        const insuranceLegend = document.createElement('legend');
        insuranceLegend.textContent = 'Insurance Information';
        insuranceFieldset.appendChild(insuranceLegend);

        label = document.createElement('label');
        label.textContent = 'Insurance Company: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-company`;
        label.appendChild(input);
        insuranceFieldset.appendChild(label);

        // Policy Number and NAIC Number on the same line
        const policyNaicRow = document.createElement('div');
        policyNaicRow.style.display = 'flex';
        policyNaicRow.style.gap = '1em';
        policyNaicRow.style.flexWrap = 'wrap';

        // Policy Number
        label = document.createElement('label');
        label.textContent = 'Policy Number: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-policy-number`;
        label.appendChild(input);
        policyNaicRow.appendChild(label);

        // NAIC Number
        label = document.createElement('label');
        label.textContent = 'NAIC Number: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-naic`;
        label.appendChild(input);
        policyNaicRow.appendChild(label);

        insuranceFieldset.appendChild(policyNaicRow);

        label = document.createElement('label');
        label.textContent = 'Insurance Phone Number: ';
        input = document.createElement('input');
        input.type = 'tel';
        input.name = `mvc-vehicle-${i}-insurance-phone`;
        label.appendChild(input);
        insuranceFieldset.appendChild(label);

        // Insurance Address, City, State, Zip on the same line
        const insuranceAddrRow = document.createElement('div');
        insuranceAddrRow.style.display = 'flex';
        insuranceAddrRow.style.gap = '1em';
        insuranceAddrRow.style.flexWrap = 'wrap';

        // Insurance Address
        label = document.createElement('label');
        label.textContent = 'Insurance Address: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-address`;
        input.style.width = '140px';
        label.appendChild(input);
        insuranceAddrRow.appendChild(label);

        // Insurance City
        label = document.createElement('label');
        label.textContent = 'City: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-city`;
        input.style.width = '100px';
        label.appendChild(input);
        insuranceAddrRow.appendChild(label);

        // Insurance State
        label = document.createElement('label');
        label.textContent = 'State: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-state`;
        input.maxLength = 2;
        input.style.width = '40px';
        label.appendChild(input);
        insuranceAddrRow.appendChild(label);

        // Insurance Zip
        label = document.createElement('label');
        label.textContent = 'Zip: ';
        input = document.createElement('input');
        input.type = 'text';
        input.name = `mvc-vehicle-${i}-insurance-zip`;
        input.maxLength = 10;
        input.style.width = '70px';
        input.inputMode = 'numeric';
        label.appendChild(input);
        insuranceAddrRow.appendChild(label);

        insuranceFieldset.appendChild(insuranceAddrRow);

        vehicleFieldset.appendChild(insuranceFieldset);

        // Incident checkboxes row (use flex for horizontal alignment)
        const incidentRow = document.createElement('div');
        incidentRow.style.display = 'flex';
        incidentRow.style.gap = '1.5em';
        incidentRow.style.alignItems = 'center';
        incidentRow.style.margin = '0.5em 0';

        // Helper for each checkbox
        function makeCheckbox(name, text) {
            const label = document.createElement('label');
            label.style.display = 'flex';
            label.style.alignItems = 'center';
            label.style.gap = '0.3em';
            const input = document.createElement('input');
            input.type = 'checkbox';
            input.name = name;
            label.appendChild(input);
            label.appendChild(document.createTextNode(text));
            return label;
        }

        incidentRow.appendChild(makeCheckbox(`mvc-vehicle-${i}-injuries`, 'Injuries'));
        incidentRow.appendChild(makeCheckbox(`mvc-vehicle-${i}-entrapment`, 'Entrapment'));
        incidentRow.appendChild(makeCheckbox(`mvc-vehicle-${i}-ejection`, 'Ejection'));
        incidentRow.appendChild(makeCheckbox(`mvc-vehicle-${i}-fatalities`, 'Fatalities'));

        vehicleFieldset.appendChild(incidentRow);

        // Notes for the vehicle (below insurance info)
        let notesLabel = document.createElement('label');
        notesLabel.textContent = 'Notes: ';
        let notesTextarea = document.createElement('textarea');
        notesTextarea.name = `mvc-vehicle-${i}-notes`;
        notesTextarea.rows = 2;
        notesTextarea.cols = 40;
        notesLabel.appendChild(notesTextarea);
        vehicleFieldset.appendChild(notesLabel);

        container.appendChild(vehicleFieldset);
        }
    });

    // For ATV
    document.getElementById('atv-num-vehicles').addEventListener('input', function() {
        const container = document.getElementById('atv-vehicles-container');
        container.innerHTML = '';
        const num = parseInt(this.value, 10);
        if (isNaN(num) || num < 1) return;
        for (let i = 1; i <= num; i++) {
            // Create a fieldset for each ATV
            const atvFieldset = document.createElement('fieldset');
            atvFieldset.className = `vehicle-fieldset vehicle-${i}`;
            const legend = document.createElement('legend');
            legend.textContent = `Vehicle ${i}`;
            atvFieldset.appendChild(legend);

            // Inline row for Year, Make, Model
            const inlineRow = document.createElement('div');
            inlineRow.style.display = 'flex';
            inlineRow.style.gap = '1em';
            inlineRow.style.flexWrap = 'wrap';
            inlineRow.style.alignItems = 'flex-end';

            // Year
            let label = document.createElement('label');
            label.textContent = 'Year: ';
            let input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-year`;
            input.style.width = '60px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            inlineRow.appendChild(label);

            // Make
            label = document.createElement('label');
            label.textContent = 'Make: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-make`;
            input.style.width = '80px';
            label.appendChild(input);
            inlineRow.appendChild(label);

            // Model
            label = document.createElement('label');
            label.textContent = 'Model: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-model`;
            input.style.width = '100px';
            label.appendChild(input);
            inlineRow.appendChild(label);

            atvFieldset.appendChild(inlineRow);

            // VIN Number row
            const vinRow = document.createElement('div');
            vinRow.style.marginTop = '0.5em';
            label = document.createElement('label');
            label.textContent = 'VIN Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-${i}-vin`;
            input.size = 17;
            input.maxLength = 17;
            input.style.width = '160px';
            label.appendChild(input);
            vinRow.appendChild(label);
            atvFieldset.appendChild(vinRow);

            // Driver Fieldset
            const driverFieldset = document.createElement('fieldset');
            driverFieldset.className = 'driver-fieldset';
            const driverLegend = document.createElement('legend');
            driverLegend.textContent = 'Driver Information';
            driverFieldset.appendChild(driverLegend);

            label = document.createElement('label');
            label.textContent = 'Driver Name: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-driver-name`;
            label.appendChild(input);
            driverFieldset.appendChild(label);

            // Driver Address, City, State, Zip on the same line
            const driverAddrRow = document.createElement('div');
            driverAddrRow.style.display = 'flex';
            driverAddrRow.style.gap = '1em';
            driverAddrRow.style.flexWrap = 'wrap';

            // Address
            label = document.createElement('label');
            label.textContent = 'Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-driver-address`;
            input.style.width = '140px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-driver-city`;
            input.style.width = '100px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-driver-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-driver-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            driverFieldset.appendChild(driverAddrRow);

            // Not Owner Checkbox
            const notOwnerRow = document.createElement('div');
            notOwnerRow.style.display = 'flex';
            notOwnerRow.style.alignItems = 'center';
            notOwnerRow.style.margin = '0.5em 0';

            const notOwnerLabel = document.createElement('label');
            notOwnerLabel.style.display = 'flex';
            notOwnerLabel.style.alignItems = 'center';
            notOwnerLabel.style.gap = '0.3em';

            const notOwnerCheckbox = document.createElement('input');
            notOwnerCheckbox.type = 'checkbox';
            notOwnerCheckbox.name = `atv-vehicle-${i}-driver-not-owner`; // or mvc-vehicle, etc.

            notOwnerLabel.appendChild(notOwnerCheckbox);
            notOwnerLabel.appendChild(document.createTextNode('Driver is not Owner'));
            notOwnerRow.appendChild(notOwnerLabel);
            driverFieldset.appendChild(notOwnerRow);

            // Owner Information subsection (hidden by default)
            const ownerFieldset = document.createElement('fieldset');
            ownerFieldset.className = 'owner-fieldset';
            ownerFieldset.style.display = 'none';
            const ownerLegend = document.createElement('legend');
            ownerLegend.textContent = 'Owner Information';
            ownerFieldset.appendChild(ownerLegend);

            // Owner Name
            label = document.createElement('label');
            label.textContent = 'Owner Name: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-owner-name`;
            label.appendChild(input);
            ownerFieldset.appendChild(label);

            // Owner Address, City, State, Zip on the same line
            const ownerAddrRow = document.createElement('div');
            ownerAddrRow.style.display = 'flex';
            ownerAddrRow.style.gap = '1em';
            ownerAddrRow.style.flexWrap = 'wrap';

            // Address
            label = document.createElement('label');
            label.textContent = 'Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-owner-address`;
            input.style.width = '140px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-owner-city`;
            input.style.width = '100px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-owner-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-owner-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            ownerFieldset.appendChild(ownerAddrRow);

            // Show/hide owner info when checkbox is toggled
            notOwnerCheckbox.addEventListener('change', function() {
                ownerFieldset.style.display = this.checked ? '' : 'none';
            });

            driverFieldset.appendChild(ownerFieldset);

            atvFieldset.appendChild(driverFieldset);

            // Insurance Fieldset
            const insuranceFieldset = document.createElement('fieldset');
            insuranceFieldset.className = 'insurance-fieldset';
            const insuranceLegend = document.createElement('legend');
            insuranceLegend.textContent = 'Insurance Information';
            insuranceFieldset.appendChild(insuranceLegend);

            label = document.createElement('label');
            label.textContent = 'Insurance Company: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-company`;
            label.appendChild(input);
            insuranceFieldset.appendChild(label);

            // Policy Number and NAIC Number on the same line
            const policyNaicRow = document.createElement('div');
            policyNaicRow.style.display = 'flex';
            policyNaicRow.style.gap = '1em';
            policyNaicRow.style.flexWrap = 'wrap';

            // Policy Number
            label = document.createElement('label');
            label.textContent = 'Policy Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-policy-number`;
            label.appendChild(input);
            policyNaicRow.appendChild(label);

            // NAIC Number
            label = document.createElement('label');
            label.textContent = 'NAIC Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-naic`;
            label.appendChild(input);
            policyNaicRow.appendChild(label);

            insuranceFieldset.appendChild(policyNaicRow);

            label = document.createElement('label');
            label.textContent = 'Insurance Phone Number: ';
            input = document.createElement('input');
            input.type = 'tel';
            input.name = `atv-vehicle-${i}-insurance-phone`;
            label.appendChild(input);
            insuranceFieldset.appendChild(label);

            // Insurance Address, City, State, Zip on the same line
            const insuranceAddrRow = document.createElement('div');
            insuranceAddrRow.style.display = 'flex';
            insuranceAddrRow.style.gap = '1em';
            insuranceAddrRow.style.flexWrap = 'wrap';

            // Insurance Address
            label = document.createElement('label');
            label.textContent = 'Insurance Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-address`;
            input.style.width = '140px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-city`;
            input.style.width = '100px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `atv-vehicle-${i}-insurance-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            insuranceFieldset.appendChild(insuranceAddrRow);

            atvFieldset.appendChild(insuranceFieldset);

            // Incident checkboxes row
            const incidentRow = document.createElement('div');
            incidentRow.style.display = 'flex';
            incidentRow.style.gap = '1.5em';
            incidentRow.style.alignItems = 'center';
            incidentRow.style.margin = '0.5em 0';

            // Helper for each checkbox
            function makeCheckbox(name, text) {
                const label = document.createElement('label');
                label.style.display = 'flex';
                label.style.alignItems = 'center';
                label.style.gap = '0.3em';
                const input = document.createElement('input');
                input.type = 'checkbox';
                input.name = name;
                label.appendChild(input);
                label.appendChild(document.createTextNode(text));
                return label;
            }

            incidentRow.appendChild(makeCheckbox(`atv-vehicle-${i}-injuries`, 'Injuries'));
            incidentRow.appendChild(makeCheckbox(`atv-vehicle-${i}-entrapment`, 'Entrapment'));
            incidentRow.appendChild(makeCheckbox(`atv-vehicle-${i}-ejection`, 'Ejection'));
            incidentRow.appendChild(makeCheckbox(`atv-vehicle-${i}-fatalities`, 'Fatalities'));

            atvFieldset.appendChild(incidentRow);

            // Notes for the vehicle (below insurance info)
            let notesLabel = document.createElement('label');
            notesLabel.textContent = 'Notes: ';
            let notesTextarea = document.createElement('textarea');
            notesTextarea.name = `atv-vehicle-${i}-notes`;
            notesTextarea.rows = 2;
            notesTextarea.cols = 40;
            notesLabel.appendChild(notesTextarea);
            atvFieldset.appendChild(notesLabel);

            container.appendChild(atvFieldset);
        }
    });

    // For Vehicle Fire
    document.getElementById('vehicle-fire-num-vehicles').addEventListener('input', function() {
        const container = document.getElementById('vehicle-fire-vehicles-container');
        container.innerHTML = '';
        const num = parseInt(this.value, 10);
        if (isNaN(num) || num < 1) return;
        // ...inside your vehicle fire event handler...
        for (let i = 1; i <= num; i++) {
            // Create a fieldset for each vehicle
            const fireVehicleFieldset = document.createElement('fieldset');
            fireVehicleFieldset.className = `vehicle-fieldset vehicle-${i}`;
            const legend = document.createElement('legend');
            legend.textContent = `Vehicle ${i}`;
            fireVehicleFieldset.appendChild(legend);

            // Inline row for Year, Make, Model
            const inlineRow = document.createElement('div');
            inlineRow.style.display = 'flex';
            inlineRow.style.gap = '1em';
            inlineRow.style.flexWrap = 'wrap';
            inlineRow.style.alignItems = 'flex-end';

            // Year
            let label = document.createElement('label');
            label.textContent = 'Year: ';
            let input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-year`;
            input.style.width = '60px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            inlineRow.appendChild(label);

            // Make
            label = document.createElement('label');
            label.textContent = 'Make: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-make`;
            input.style.width = '80px';
            label.appendChild(input);
            inlineRow.appendChild(label);

            // Model
            label = document.createElement('label');
            label.textContent = 'Model: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-model`;
            input.style.width = '100px';
            label.appendChild(input);
            inlineRow.appendChild(label);

            fireVehicleFieldset.appendChild(inlineRow);

            // VIN Number and License Plate on the same line
            const vinPlateRow = document.createElement('div');
            vinPlateRow.style.display = 'flex';
            vinPlateRow.style.gap = '1em';
            vinPlateRow.style.flexWrap = 'wrap';

            // VIN Number
            label = document.createElement('label');
            label.textContent = 'VIN Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-vin`;
            input.size = 17;
            input.maxLength = 17;
            input.style.width = '160px';
            label.appendChild(input);
            vinPlateRow.appendChild(label);

            // License Plate
            label = document.createElement('label');
            label.textContent = 'License Plate: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-license-plate`;
            label.appendChild(input);
            vinPlateRow.appendChild(label);

            fireVehicleFieldset.appendChild(vinPlateRow);

            // Driver Fieldset
            const driverFieldset = document.createElement('fieldset');
            driverFieldset.className = 'driver-fieldset';
            const driverLegend = document.createElement('legend');
            driverLegend.textContent = 'Driver Information';
            driverFieldset.appendChild(driverLegend);

            label = document.createElement('label');
            label.textContent = 'Driver Name: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-driver-name`;
            label.appendChild(input);
            driverFieldset.appendChild(label);

            // Driver Address, City, State, Zip on the same line
            const driverAddrRow = document.createElement('div');
            driverAddrRow.style.display = 'flex';
            driverAddrRow.style.gap = '1em';
            driverAddrRow.style.flexWrap = 'wrap';

            // Address
            label = document.createElement('label');
            label.textContent = 'Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-driver-address`;
            input.style.width = '140px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-driver-city`;
            input.style.width = '100px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-driver-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            // Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-driver-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            label.appendChild(input);
            driverAddrRow.appendChild(label);

            driverFieldset.appendChild(driverAddrRow);

            // Not Owner Checkbox
            const notOwnerRow = document.createElement('div');
            notOwnerRow.style.display = 'flex';
            notOwnerRow.style.alignItems = 'center';
            notOwnerRow.style.margin = '0.5em 0';

            const notOwnerLabel = document.createElement('label');
            notOwnerLabel.style.display = 'flex';
            notOwnerLabel.style.alignItems = 'center';
            notOwnerLabel.style.gap = '0.3em';

            const notOwnerCheckbox = document.createElement('input');
            notOwnerCheckbox.type = 'checkbox';
            notOwnerCheckbox.name = `vehicle-fire-vehicle-${i}-driver-not-owner`;

            notOwnerLabel.appendChild(notOwnerCheckbox);
            notOwnerLabel.appendChild(document.createTextNode('Driver is not Owner'));
            notOwnerRow.appendChild(notOwnerLabel);
            driverFieldset.appendChild(notOwnerRow);

            // Owner Information subsection (hidden by default)
            const ownerFieldset = document.createElement('fieldset');
            ownerFieldset.className = 'owner-fieldset';
            ownerFieldset.style.display = 'none';
            const ownerLegend = document.createElement('legend');
            ownerLegend.textContent = 'Owner Information';
            ownerFieldset.appendChild(ownerLegend);

            // Owner Name
            label = document.createElement('label');
            label.textContent = 'Owner Name: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-owner-name`;
            label.appendChild(input);
            ownerFieldset.appendChild(label);

            // Owner Address, City, State, Zip on the same line
            const ownerAddrRow = document.createElement('div');
            ownerAddrRow.style.display = 'flex';
            ownerAddrRow.style.gap = '1em';
            ownerAddrRow.style.flexWrap = 'wrap';

            // Address
            label = document.createElement('label');
            label.textContent = 'Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-owner-address`;
            input.style.width = '140px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-owner-city`;
            input.style.width = '100px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-owner-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            // Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-owner-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            ownerAddrRow.appendChild(label);

            ownerFieldset.appendChild(ownerAddrRow);

            // Show/hide owner info when checkbox is toggled
            notOwnerCheckbox.addEventListener('change', function() {
                ownerFieldset.style.display = this.checked ? '' : 'none';
            });

            driverFieldset.appendChild(ownerFieldset);

            fireVehicleFieldset.appendChild(driverFieldset);

            // Insurance Fieldset
            const insuranceFieldset = document.createElement('fieldset');
            insuranceFieldset.className = 'insurance-fieldset';
            const insuranceLegend = document.createElement('legend');
            insuranceLegend.textContent = 'Insurance Information';
            insuranceFieldset.appendChild(insuranceLegend);

            label = document.createElement('label');
            label.textContent = 'Insurance Company: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-company`;
            label.appendChild(input);
            insuranceFieldset.appendChild(label);

            // Policy Number and NAIC Number on the same line
            const policyNaicRow = document.createElement('div');
            policyNaicRow.style.display = 'flex';
            policyNaicRow.style.gap = '1em';
            policyNaicRow.style.flexWrap = 'wrap';

            // Policy Number
            label = document.createElement('label');
            label.textContent = 'Policy Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-policy-number`;
            label.appendChild(input);
            policyNaicRow.appendChild(label);

            // NAIC Number
            label = document.createElement('label');
            label.textContent = 'NAIC Number: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-naic`;
            label.appendChild(input);
            policyNaicRow.appendChild(label);

            insuranceFieldset.appendChild(policyNaicRow);

            label = document.createElement('label');
            label.textContent = 'Insurance Phone Number: ';
            input = document.createElement('input');
            input.type = 'tel';
            input.name = `vehicle-fire-vehicle-${i}-insurance-phone`;
            label.appendChild(input);
            insuranceFieldset.appendChild(label);

            // Insurance Address, City, State, Zip on the same line
            const insuranceAddrRow = document.createElement('div');
            insuranceAddrRow.style.display = 'flex';
            insuranceAddrRow.style.gap = '1em';
            insuranceAddrRow.style.flexWrap = 'wrap';

            // Insurance Address
            label = document.createElement('label');
            label.textContent = 'Insurance Address: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-address`;
            input.style.width = '140px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance City
            label = document.createElement('label');
            label.textContent = 'City: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-city`;
            input.style.width = '100px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance State
            label = document.createElement('label');
            label.textContent = 'State: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-state`;
            input.maxLength = 2;
            input.style.width = '40px';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            // Insurance Zip
            label = document.createElement('label');
            label.textContent = 'Zip: ';
            input = document.createElement('input');
            input.type = 'text';
            input.name = `vehicle-fire-vehicle-${i}-insurance-zip`;
            input.maxLength = 10;
            input.style.width = '70px';
            input.inputMode = 'numeric';
            label.appendChild(input);
            insuranceAddrRow.appendChild(label);

            insuranceFieldset.appendChild(insuranceAddrRow);

            fireVehicleFieldset.appendChild(insuranceFieldset);

            // Incident checkboxes row (use flex for horizontal alignment)
            const incidentRow = document.createElement('div');
            incidentRow.style.display = 'flex';
            incidentRow.style.gap = '1.5em';
            incidentRow.style.alignItems = 'center';
            incidentRow.style.margin = '0.5em 0';

            // Helper for each checkbox
            function makeCheckbox(name, text) {
                const label = document.createElement('label');
                label.style.display = 'flex';
                label.style.alignItems = 'center';
                label.style.gap = '0.3em';
                const input = document.createElement('input');
                input.type = 'checkbox';
                input.name = name;
                label.appendChild(input);
                label.appendChild(document.createTextNode(text));
                return label;
            }

            incidentRow.appendChild(makeCheckbox(`vehicle-fire-vehicle-${i}-injuries`, 'Injuries'));
            incidentRow.appendChild(makeCheckbox(`vehicle-fire-vehicle-${i}-entrapment`, 'Entrapment'));
            incidentRow.appendChild(makeCheckbox(`vehicle-fire-vehicle-${i}-fatalities`, 'Fatalities'));

            fireVehicleFieldset.appendChild(incidentRow);

            // Amount of Water Used
            label = document.createElement('label');
            label.textContent = 'Amount of Water Used (gallons): ';
            input = document.createElement('input');
            input.type = 'number';
            input.name = `vehicle-fire-vehicle-${i}-water-used`;
            input.min = 0;
            input.step = 'any';
            label.appendChild(input);
            fireVehicleFieldset.appendChild(label);

            // Foam Used Checkbox
            const foamLabel = document.createElement('label');
            foamLabel.style.display = 'flex';
            foamLabel.style.alignItems = 'center';
            foamLabel.style.gap = '0.3em';
            const foamCheckbox = document.createElement('input');
            foamCheckbox.type = 'checkbox';
            foamCheckbox.name = `vehicle-fire-vehicle-${i}-foam-used`;
            foamLabel.appendChild(foamCheckbox);
            foamLabel.appendChild(document.createTextNode('Foam Used'));
            fireVehicleFieldset.appendChild(foamLabel);

            // Notes for the vehicle (below insurance info)
            let notesLabel = document.createElement('label');
            notesLabel.textContent = 'Notes: ';
            let notesTextarea = document.createElement('textarea');
            notesTextarea.name = `vehicle-fire-vehicle-${i}-notes`;
            notesTextarea.rows = 2;
            notesTextarea.cols = 40;
            notesLabel.appendChild(notesTextarea);
            fireVehicleFieldset.appendChild(notesLabel);

            container.appendChild(fireVehicleFieldset);
        }
    });

    // GPS Location functionality
    document.getElementById('get-current-location').addEventListener('click', function() {
        if ("geolocation" in navigator) {
            this.textContent = "Getting Location...";
            this.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude.toFixed(6);
                    const lng = position.coords.longitude.toFixed(6);
                    
                    document.querySelector('input[name="gps-latitude"]').value = lat;
                    document.querySelector('input[name="gps-longitude"]').value = lng;
                    
                    const button = document.getElementById('get-current-location');
                    button.textContent = "Location Captured";
                    button.style.background = "#388e3c";
                    
                    setTimeout(() => {
                        button.textContent = "Get Current Location";
                        button.style.background = "#b71c1c";
                        button.disabled = false;
                    }, 2000);
                },
                function(error) {
                    const button = document.getElementById('get-current-location');
                    button.textContent = "Location Error";
                    button.style.background = "#d32f2f";
                    
                    let errorMessage = "Unable to get location: ";
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += "Permission denied";
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += "Position unavailable";
                            break;
                        case error.TIMEOUT:
                            errorMessage += "Request timeout";
                            break;
                        default:
                            errorMessage += "Unknown error";
                            break;
                    }
                    
                    alert(errorMessage);
                    
                    setTimeout(() => {
                        button.textContent = "Get Current Location";
                        button.style.background = "#b71c1c";
                        button.disabled = false;
                    }, 2000);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    });

    // ATV GPS Location functionality
    document.getElementById('get-atv-gps').addEventListener('click', function() {
        if ("geolocation" in navigator) {
            this.textContent = "Getting Location...";
            this.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude.toFixed(6);
                    const lng = position.coords.longitude.toFixed(6);
                    
                    // Format as "Lat, Long" for the ATV coordinates field
                    document.getElementById('atv-gps-coords').value = `${lat}, ${lng}`;
                    
                    const button = document.getElementById('get-atv-gps');
                    button.textContent = "Location Captured";
                    button.style.background = "#388e3c";
                    
                    setTimeout(() => {
                        button.textContent = "Get GPS Location";
                        button.style.background = "";
                        button.disabled = false;
                    }, 2000);
                },
                function(error) {
                    const button = document.getElementById('get-atv-gps');
                    button.textContent = "Location Error";
                    button.style.background = "#d32f2f";
                    
                    let errorMessage = "Unable to get GPS location: ";
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += "Permission denied";
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += "Position unavailable";
                            break;
                        case error.TIMEOUT:
                            errorMessage += "Request timeout";
                            break;
                        default:
                            errorMessage += "Unknown error";
                            break;
                    }
                    
                    alert(errorMessage);
                    
                    setTimeout(() => {
                        button.textContent = "Get GPS Location";
                        button.style.background = "";
                        button.disabled = false;
                    }, 2000);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    });

    // Brush Fire - Extinguished Fire checkbox functionality
    document.getElementById('brush-fire-extinguished').addEventListener('change', function() {
        const gallonsSection = document.getElementById('brush-fire-gallons-section');
        const gallonsInput = document.getElementById('brush-fire-gallons-input');
        const methodSelect = document.getElementById('brush-fire-extinguishment-method');
        
        if (this.checked) {
            gallonsSection.style.display = 'block';
        } else {
            gallonsSection.style.display = 'none';
            gallonsInput.style.display = 'none';
            // Clear both inputs when hiding
            methodSelect.value = '';
            document.querySelector('input[name="brush-fire-gallons-used"]').value = '';
        }
    });

    // Brush Fire - Extinguishment Method dropdown functionality
    document.getElementById('brush-fire-extinguishment-method').addEventListener('change', function() {
        const gallonsInput = document.getElementById('brush-fire-gallons-input');
        
        if (this.value === 'Water' || this.value === 'Foam') {
            gallonsInput.style.display = 'block';
        } else {
            gallonsInput.style.display = 'none';
            // Clear gallons input when hiding
            document.querySelector('input[name="brush-fire-gallons-used"]').value = '';
        }
    });

    // EMS - Nature of Call dropdown functionality
    function toggleEMSNatureOther() {
        const dropdown = document.querySelector('select[name="ems-nature-dropdown"]');
        const otherLabel = document.getElementById('ems-nature-other-label');
        const otherInput = document.querySelector('input[name="ems-nature-other"]');
        const fallHeightLabel = document.getElementById('ems-fall-height-label');
        const fallHeightInput = document.querySelector('input[name="ems-fall-height"]');
        
        // Handle "Other" selection
        if (dropdown.value === 'Other') {
            otherLabel.style.display = 'block';
        } else {
            otherLabel.style.display = 'none';
            otherInput.value = '';
        }
        
        // Handle "Fall" selection
        if (dropdown.value === 'Fall') {
            fallHeightLabel.style.display = 'block';
        } else {
            fallHeightLabel.style.display = 'none';
            fallHeightInput.value = '';
        }
    }

    // EMS - Patient Disposition functionality
    function toggleEMSTransport() {
        const dispositionSelect = document.querySelector('select[name="ems-disposition"]');
        const transportLabel = document.getElementById('ems-transport-destination-label');
        const transportInput = document.querySelector('input[name="ems-transport-destination"]');
        
        if (dispositionSelect.value === 'Transported by EMS') {
            transportLabel.style.display = 'block';
        } else {
            transportLabel.style.display = 'none';
            transportInput.value = '';
        }
    }

    // EMS - Agency Other functionality
    function toggleEMSAgencyOther() {
        const agencySelect = document.querySelector('select[name="ems-agency"]');
        const otherLabel = document.getElementById('ems-agency-other-label');
        const otherInput = document.querySelector('input[name="ems-agency-other"]');
        
        if (agencySelect.value === 'Other') {
            otherLabel.style.display = 'block';
        } else {
            otherLabel.style.display = 'none';
            otherInput.value = '';
        }
    }

    // Fire Alarm - Alarm Type Other functionality
    function toggleFireAlarmOther() {
        const alarmTypeSelect = document.querySelector('select[name="fire-alarm-type"]');
        const otherLabel = document.getElementById('fire-alarm-type-other-label');
        const otherInput = document.querySelector('input[name="fire-alarm-type-other"]');
        
        if (alarmTypeSelect.value === 'Other') {
            otherLabel.style.display = 'block';
        } else {
            otherLabel.style.display = 'none';
            otherInput.value = '';
        }
    }

    function toggleElectricalFireOther() {
        const equipmentTypeSelect = document.querySelector('select[name="electrical-fire-equipment-type"]');
        const otherLabel = document.getElementById('electrical-fire-equipment-other-label');
        const otherInput = document.querySelector('input[name="electrical-fire-equipment-other"]');
        
        if (equipmentTypeSelect.value === 'Other') {
            otherLabel.style.display = 'block';
        } else {
            otherLabel.style.display = 'none';
            otherInput.value = '';
        }
    }

    function toggleLevelOfOriginOther() {
        const levelSelect = document.querySelector('select[name="level-of-origin"]');
        const otherInput = document.getElementById('level-of-origin-other');
        
        if (levelSelect.value === 'Other') {
            otherInput.style.display = 'inline-block';
        } else {
            otherInput.style.display = 'none';
            otherInput.value = '';
        }
    }

    function toggleTowCompanyOther() {
        const towCompanySelect = document.querySelector('select[name="motorist-assist-tow-company"]');
        const otherLabel = document.getElementById('motorist-assist-tow-other-label');
        const otherInput = document.querySelector('input[name="motorist-assist-tow-other"]');
        
        if (towCompanySelect.value === 'Other') {
            otherLabel.style.display = 'inline-block';
        } else {
            otherLabel.style.display = 'none';
            otherInput.value = '';
        }
    }

    // MVC Extrication functions
    function toggleMVCExtricationTechnique() {
        const extricationCheckbox = document.getElementById('mvc-extrication-checkbox');
        const techniqueSection = document.getElementById('mvc-extrication-technique-section');
        
        if (extricationCheckbox.checked) {
            techniqueSection.style.display = 'block';
        } else {
            techniqueSection.style.display = 'none';
            // Reset the technique selection and other field
            document.getElementById('mvc-extrication-technique').value = '';
            document.getElementById('mvc-extrication-other').style.display = 'none';
            document.getElementById('mvc-extrication-other').value = '';
        }
    }

    function toggleMVCExtricationOther() {
        const techniqueSelect = document.getElementById('mvc-extrication-technique');
        const otherInput = document.getElementById('mvc-extrication-other');
        
        if (techniqueSelect.value === 'Other') {
            otherInput.style.display = 'inline-block';
        } else {
            otherInput.style.display = 'none';
            otherInput.value = '';
        }
    }

    // Phone number formatting for EMS patient phone
    document.addEventListener('DOMContentLoaded', function() {
        const phoneInput = document.querySelector('input[name="ems-patient-phone"]');
        if (phoneInput) {
            phoneInput.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                if (value.length >= 6) {
                    value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
                }
                this.value = value;
            });
        }

        // Phone number formatting for EMS emergency contact phone
        const emergencyPhoneInput = document.querySelector('input[name="ems-emergency-contact-phone"]');
        if (emergencyPhoneInput) {
            emergencyPhoneInput.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                if (value.length >= 6) {
                    value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
                }
                this.value = value;
            });
        }

        // Auto-calculate patient age if not provided (simple helper)
        const ageInput = document.querySelector('input[name="ems-patient-age"]');
        if (ageInput) {
            ageInput.addEventListener('blur', function() {
                if (this.value && (this.value < 0 || this.value > 120)) {
                    alert('Please enter a valid age between 0 and 120.');
                    this.focus();
                }
            });
        }
    });

    // Comprehensive ERG Database - 200+ Most Common Hazmat Materials
    const completeERGDatabase = {
        
        "1001": { name: "Acetylene, dissolved", guide: "116", placard: "2", fireHazards: "EXTREMELY FLAMMABLE GAS! May explode if heated. Container may explode in heat of fire.", healthHazards: "May cause asphyxiation. Extremely cold gas may cause burns or frostbite.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind and uphill. Consider evacuation for 800 meters if tank involved in fire.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped. Use water spray to cool containers.", largeSpillEvacuation: "Large spill (semi-truck): 800m initial, 1600m if fire. Tank car: 800m initial, 3200m if fire." },
        "1002": { name: "Air, compressed", guide: "121", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Move container from fire area if safe to do so." },
        "1003": { name: "Air, refrigerated liquid", guide: "120", placard: "2", fireHazards: "Non-flammable but supports combustion. Container may explode in heat of fire.", healthHazards: "Contact with liquid may cause severe frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Keep unauthorized personnel away.", responseGuidance: "Use water spray to warm liquid spills. Do not direct water at spill or source of leak." },
        "1005": { name: "Ammonia, anhydrous", guide: "125", placard: "2", fireHazards: "May ignite combustibles. Container may explode in heat of fire.", healthHazards: "TOXIC! Inhalation causes severe respiratory injury. Contact causes severe burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container.", largeSpillEvacuation: "Large spill (semi-truck): 800m downwind, 300m other directions. Tank car: 1600m downwind, 800m other directions." },
        "1008": { name: "Boron trifluoride", guide: "125", placard: "2", fireHazards: "Non-flammable but supports combustion. Container may explode in heat of fire.", healthHazards: "TOXIC! Contact causes severe burns. Inhalation causes severe respiratory injury.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: consider evacuation for 800 meters.", responseGuidance: "Use water spray to reduce vapors. Keep upwind of spill." },
        "1009": { name: "Bromotrifluoromethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers. Move container from fire area if safe." },
        "1010": { name: "Butadienes, stabilized", guide: "116P", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May polymerize explosively. Container may explode in heat.", healthHazards: "May cause irritation. Vapor may cause dizziness or suffocation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1011": { name: "Butane", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire. Vapor travels to ignition source.", healthHazards: "Contact with liquid may cause burns or frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1012": { name: "Butylene", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire.", healthHazards: "Contact with liquid may cause burns or frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1013": { name: "Carbon dioxide", guide: "120", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers. Move container from fire area if safe." },
        "1016": { name: "Carbon monoxide", guide: "119", placard: "2", fireHazards: "FLAMMABLE GAS! Container may explode in heat of fire.", healthHazards: "EXTREMELY TOXIC! Even small amounts can be fatal. Odorless.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area immediately. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1017": { name: "Chlorine", guide: "124", placard: "2", fireHazards: "Non-flammable but supports combustion. Container may explode in heat of fire.", healthHazards: "TOXIC! Inhalation causes severe respiratory injury. Contact causes severe burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Do NOT use water on substance. Use water spray to reduce vapors.", largeSpillEvacuation: "Large spill (semi-truck): 800m downwind, 300m other directions. Tank car: 3200m downwind, 800m other directions. If fire: 11km+ all directions." },
        "1018": { name: "Chlorodifluoromethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1020": { name: "Chloropentafluoroethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1021": { name: "Chlorotetrafluoroethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1022": { name: "Chlorotrifluoromethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1023": { name: "Coal gas", guide: "119", placard: "2", fireHazards: "FLAMMABLE GAS! Container may explode in heat of fire.", healthHazards: "TOXIC! May cause death or serious injury. Contains carbon monoxide.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1026": { name: "Cyanogen", guide: "119", placard: "2", fireHazards: "FLAMMABLE GAS! Container may explode in heat of fire.", healthHazards: "EXTREMELY TOXIC! Even small amounts may be fatal. Causes chemical asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area immediately. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1027": { name: "Cyclopropane", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire.", healthHazards: "May cause asphyxiation. Contact with liquid may cause frostbite.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1028": { name: "Dichlorodifluoromethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1029": { name: "Dichlorofluoromethane", guide: "126", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause irritation. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1030": { name: "Difluoroethane", guide: "115", placard: "2", fireHazards: "FLAMMABLE GAS! Container may explode in heat of fire.", healthHazards: "May cause asphyxiation. Contact with liquid may cause frostbite.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1038": { name: "Ethylene, refrigerated liquid", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May explode if heated. Lighter than air.", healthHazards: "Contact with liquid may cause severe frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1040": { name: "Ethylene oxide", guide: "119P", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May explode when heated. May polymerize explosively.", healthHazards: "TOXIC! May cause cancer. Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1045": { name: "Fluorine", guide: "124", placard: "2", fireHazards: "Strong oxidizer! Will cause most materials to burn vigorously.", healthHazards: "EXTREMELY TOXIC AND CORROSIVE! May be fatal if inhaled. Causes severe burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Do NOT use water on substance. Use water spray to reduce vapors." },
        "1049": { name: "Hydrogen", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May explode in confined area. Lighter than air.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid may cause frostbite.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if large leak.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1050": { name: "Hydrogen chloride, anhydrous", guide: "125", placard: "2", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "TOXIC! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container." },
        "1052": { name: "Hydrogen fluoride, anhydrous", guide: "125", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "EXTREMELY TOXIC AND CORROSIVE! May be fatal if inhaled. Causes severe burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container." },
        "1052": { name: "Hydrogen fluoride, anhydrous", guide: "125", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "EXTREMELY TOXIC AND CORROSIVE! May be fatal if inhaled. Causes severe burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container." },
        "1053": { name: "Hydrogen sulfide", guide: "117", placard: "2", fireHazards: "FLAMMABLE GAS! Container may explode in heat of fire.", healthHazards: "EXTREMELY TOXIC! Even small amounts may be fatal. Causes paralysis of smell.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area immediately. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1065": { name: "Neon", guide: "121", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to cool containers." },
        "1072": { name: "Oxygen", guide: "122", placard: "2", fireHazards: "Strong oxidizer! Will increase intensity of fire. May cause fire to flare up.", healthHazards: "Non-toxic but supports combustion. Contact with liquid may cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT use water on substance." },
        "1073": { name: "Oxygen, refrigerated liquid", guide: "122", placard: "2", fireHazards: "Strong oxidizer! Will increase intensity of fire dramatically.", healthHazards: "Contact with liquid causes severe frostbite. May cause asphyxiation in confined spaces.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Remove ignition sources.", responseGuidance: "Use water spray to warm spills. Do NOT direct water at spill." },
        "1075": { name: "Petroleum gases, liquefied", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire. Vapor may travel to ignition source and flash back.", healthHazards: "Contact with liquefied gas may cause burns and/or frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved in fire.", responseGuidance: "Do NOT extinguish leaking gas fire unless leak can be stopped. Use water spray to cool containers." },
        "1076": { name: "Phosgene", guide: "125", placard: "2", fireHazards: "Non-flammable gas.", healthHazards: "EXTREMELY TOXIC! May be fatal if inhaled. Delayed effects may occur.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Keep upwind of spill.", largeSpillEvacuation: "Large spill (semi-truck): 800m downwind, 300m other directions. Tank car: 3200m downwind, 800m other directions." },
        "1077": { name: "Propylene", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire.", healthHazards: "Contact with liquid may cause burns or frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if tank involved.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1090": { name: "Acetone", guide: "127", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Will be easily ignited. Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May cause central nervous system effects.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1093": { name: "Acrylonitrile, stabilized", guide: "131P", placard: "3", fireHazards: "FLAMMABLE LIQUID! May polymerize explosively when heated.", healthHazards: "TOXIC! May be fatal if inhaled. Causes burns. May cause cancer.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use alcohol-resistant foam, dry chemical, or CO2. Water may be ineffective." },
        "1098": { name: "Allyl alcohol", guide: "131", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! May be fatal if inhaled or absorbed through skin. Causes burns.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use alcohol-resistant foam, dry chemical, or CO2. Water may be ineffective." },
        "1105": { name: "Pentanol", guide: "129", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "1108": { name: "Pentene", guide: "128", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1114": { name: "Benzene", guide: "130", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Vapors may form explosive mixtures with air.", healthHazards: "TOXIC! May cause cancer. May cause blood disorders. Absorption through skin.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1120": { name: "Butanol", guide: "129", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "1123": { name: "Butyl acetates", guide: "129", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to eyes and respiratory tract.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1128": { name: "Furfural", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. May affect respiratory tract.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1133": { name: "Adhesives", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to skin and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1145": { name: "Cyclohexane", guide: "128", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1158": { name: "Diisopropylamine", guide: "132", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "CORROSIVE! Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use alcohol-resistant foam, dry chemical, or CO2." },
        "1169": { name: "Extracts, aromatic, liquid", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2." },
        "1170": { name: "Ethanol", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames. May produce irritating vapors.", healthHazards: "May cause irritation to eyes and respiratory tract. Central nervous system effects with large exposures.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2. Water may be ineffective on fire. Prevent runoff." },
        "1173": { name: "Ethyl acetate", guide: "129", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1188": { name: "Ethylene glycol monomethyl ether", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. May affect blood and nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "1193": { name: "Ethyl methyl ketone", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "1198": { name: "Formaldehyde solution", guide: "132", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! May cause cancer. Causes burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use alcohol-resistant foam, dry chemical, or CO2." },
        "1202": { name: "Diesel fuel", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames. May produce irritating, toxic and/or corrosive gases.", healthHazards: "Inhalation may cause respiratory irritation. Skin contact may cause irritation. Ingestion may cause gastrointestinal irritation.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray to cool containers. Use foam, dry chemical, or CO2 for fires. Prevent runoff from entering sewers or waterways." },
        "1203": { name: "Gasoline", guide: "128", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Will be easily ignited by heat, sparks or flames. Vapors may form explosive mixtures with air. May travel to source of ignition and flash back.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May affect the nervous system. Aspiration may cause chemical pneumonia or pulmonary edema.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Evacuate spill area. Keep upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray to disperse vapors, cool containers. Use foam for large fires. Do NOT use water on spill.", largeSpillEvacuation: "Large spill (semi-truck): 300m all directions. Tank car: 800m all directions. If fire: 1600m all directions." },
        "1219": { name: "Isopropanol", guide: "129", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to eyes and respiratory tract. May cause central nervous system depression.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "1230": { name: "Methanol", guide: "131", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! May be fatal if swallowed or inhaled. May cause blindness. Absorbed through skin.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, alcohol-resistant foam, dry chemical, or CO2." },
        "1263": { name: "Paint", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective." },
        "1267": { name: "Petroleum crude oil", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. Aspiration may cause chemical pneumonia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1268": { name: "Petroleum distillates, n.o.s.", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. Aspiration may cause chemical pneumonia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1294": { name: "Toluene", guide: "130", placard: "3", fireHazards: "FLAMMABLE LIQUID! Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1307": { name: "Xylenes", guide: "130", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May affect the nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1479": { name: "Oxidizing solid, n.o.s.", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "May cause irritation. May be harmful if swallowed.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1482": { name: "Permanganates, inorganic, n.o.s.", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "CORROSIVE! Causes severe burns. May cause methemoglobinemia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1489": { name: "Potassium dichromate", guide: "141", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated.", healthHazards: "TOXIC! May cause cancer. Causes burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers." },
        "1491": { name: "Potassium permanganate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "CORROSIVE! Causes severe burns. May cause methemoglobinemia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1492": { name: "Potassium persulfate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "May cause burns. May cause respiratory sensitization.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers." },
        "1493": { name: "Silver nitrate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated.", healthHazards: "CORROSIVE! Causes severe burns. May cause blue-gray discoloration of skin.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers." },
        "1494": { name: "Sodium bromate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "TOXIC! May cause severe kidney damage. May be fatal if swallowed.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers." },
        "1495": { name: "Sodium chlorate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "May cause burns. May cause methemoglobinemia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1496": { name: "Sodium chlorite", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "CORROSIVE! Causes burns. May release toxic chlorine dioxide gas.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1498": { name: "Sodium nitrate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated.", healthHazards: "May cause irritation to skin and eyes. Harmful if swallowed.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "1500": { name: "Sodium nitrite", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated.", healthHazards: "TOXIC! May cause methemoglobinemia. May be fatal if swallowed.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers." },
        "1556": { name: "Arsenical compound, liquid, n.o.s.", guide: "151", placard: "6", fireHazards: "May be flammable. Runoff may create fire or explosion hazard.", healthHazards: "EXTREMELY TOXIC! May be fatal if inhaled, swallowed or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff from entering sewers." },
        "1557": { name: "Arsenical compound, solid, n.o.s.", guide: "151", placard: "6", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "EXTREMELY TOXIC! May be fatal if inhaled, swallowed or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Prevent runoff." },
        "1564": { name: "Barium compound, n.o.s.", guide: "154", placard: "6", fireHazards: "May ignite combustibles. Fire may produce toxic gases.", healthHazards: "TOXIC! May cause paralysis and cardiac arrest. Harmful if swallowed.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff from entering sewers." },
        "1566": { name: "Beryllium compound, n.o.s.", guide: "154", placard: "6", fireHazards: "May ignite combustibles. Fire may produce toxic gases.", healthHazards: "EXTREMELY TOXIC! May cause cancer and lung disease. May be fatal if inhaled.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff from entering sewers." },
        "1569": { name: "Bromoacetone", guide: "159", placard: "6", fireHazards: "Flammable liquid. May be ignited by heat, sparks or flames.", healthHazards: "EXTREMELY TOXIC! Causes severe burns. May be fatal if inhaled. Lachrymatory.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Use foam, dry chemical, or CO2." },
        "1572": { name: "Cacodylic acid", guide: "151", placard: "6", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "TOXIC! May cause cancer. Harmful if inhaled or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff from entering sewers." },
        "1573": { name: "Calcium arsenate", guide: "151", placard: "6", fireHazards: "Non-flammable. Fire may produce toxic gases.", healthHazards: "EXTREMELY TOXIC! May cause cancer. May be fatal if inhaled or swallowed.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Prevent runoff." },
        "1574": { name: "Calcium arsenite", guide: "151", placard: "6", fireHazards: "Non-flammable. Fire may produce toxic gases.", healthHazards: "EXTREMELY TOXIC! May cause cancer. May be fatal if inhaled or swallowed.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Prevent runoff." },
        "1578": { name: "Chloronitrobenzenes", guide: "152", placard: "6", fireHazards: "Flammable solid. May be ignited by friction, heat or flames.", healthHazards: "TOXIC! May be fatal if inhaled or absorbed through skin. May cause methemoglobinemia.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray, foam, dry chemical, or CO2. Cool containers with water." },
        "1715": { name: "Acetic anhydride", guide: "137", placard: "8", fireHazards: "May ignite combustibles. Reacts violently with water producing heat.", healthHazards: "CORROSIVE! Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use dry chemical or CO2. Do NOT use water on spill." },
        "1718": { name: "Butyl acid phosphate", guide: "154", placard: "8", fireHazards: "May ignite combustibles.", healthHazards: "CORROSIVE! Causes severe burns to skin and eyes.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to reduce vapors." },
        "1722": { name: "Allyl chloroformate", guide: "155", placard: "6", fireHazards: "Flammable liquid. May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! Causes severe burns. May be fatal if inhaled.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Use foam, dry chemical, or CO2." },
        "1725": { name: "Aluminum bromide, anhydrous", guide: "137", placard: "8", fireHazards: "May ignite combustibles. Reacts violently with water producing heat and toxic gases.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Do NOT use water. Use dry chemical or CO2." },
        "1726": { name: "Aluminum chloride, anhydrous", guide: "137", placard: "8", fireHazards: "May ignite combustibles. Reacts violently with water producing heat and toxic gases.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Do NOT use water. Use dry chemical or CO2." },
        "1727": { name: "Ammonium hydrogen sulfate", guide: "154", placard: "8", fireHazards: "May ignite combustibles.", healthHazards: "CORROSIVE! Causes severe burns. May release toxic gases when heated.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to reduce vapors." },
        "1728": { name: "Ammonium polysulfide", guide: "154", placard: "8", fireHazards: "May ignite combustibles. May release toxic hydrogen sulfide gas.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors." },
        "1731": { name: "Antimony pentachloride", guide: "137", placard: "8", fireHazards: "May ignite combustibles. Reacts violently with water producing heat and toxic gases.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Do NOT use water. Use dry chemical or CO2." },
        "1732": { name: "Antimony pentafluoride", guide: "137", placard: "8", fireHazards: "May ignite combustibles. Reacts violently with water producing heat and toxic gases.", healthHazards: "EXTREMELY TOXIC AND CORROSIVE! Causes severe burns. May be fatal if inhaled.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Do NOT use water. Use dry chemical or CO2." },
        "1754": { name: "Chlorosulfonic acid", guide: "137", placard: "8", fireHazards: "Non-flammable but may ignite combustibles. Reacts violently with water producing heat and toxic gases.", healthHazards: "EXTREMELY CORROSIVE! Causes severe burns. Toxic vapors may be fatal.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Do NOT use water. Use dry chemical or CO2. Prevent contact with water." },
        "1760": { name: "Corrosive liquid, n.o.s.", guide: "154", placard: "8", fireHazards: "May ignite combustibles. Runoff may create fire or explosion hazard.", healthHazards: "CORROSIVE! Causes severe burns to skin and eyes. May be harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Neutralize spill with appropriate agent." },
        "1789": { name: "Hydrochloric acid", guide: "157", placard: "8", fireHazards: "Non-flammable but may ignite combustibles. Runoff may create fire hazard.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container." },
        "1790": { name: "Hydrofluoric acid", guide: "157", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "EXTREMELY CORROSIVE AND TOXIC! Causes severe burns. May be fatal if inhaled.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container." },
        "1824": { name: "Sodium hydroxide solution", guide: "154", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "CORROSIVE! Causes severe burns to skin and eyes.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to reduce vapors. Neutralize spill with appropriate acid." },
        "1830": { name: "Sulfuric acid", guide: "157", placard: "8", fireHazards: "Non-flammable but may ignite combustibles. Reacts violently with water.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Do NOT get water inside container.", largeSpillEvacuation: "Large spill (semi-truck): 300m all directions. Tank car: 800m all directions." },
        "1832": { name: "Sulfuric acid, spent", guide: "157", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "CORROSIVE! Causes severe burns. Toxic vapors may be released.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to reduce vapors." },
        "1863": { name: "Fuel, aviation, turbine engine", guide: "128", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. Aspiration may cause chemical pneumonia.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1866": { name: "Resin solution", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation to skin and respiratory tract.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2." },
        "1888": { name: "Chloroform", guide: "151", placard: "6", fireHazards: "Non-flammable but may form flammable vapor-air mixtures.", healthHazards: "TOXIC! May cause cancer. Harmful if inhaled or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff." },
        "1903": { name: "Disinfectant, liquid, corrosive, n.o.s.", guide: "154", placard: "8", fireHazards: "May ignite combustibles. Runoff may create fire hazard.", healthHazards: "CORROSIVE! Causes severe burns to skin and eyes. May be harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray to reduce vapors. Neutralize spill with appropriate agent." },
        "1924": { name: "Allyl isothiocyanate, stabilized", guide: "155", placard: "6", fireHazards: "Flammable liquid. May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! Causes severe burns to skin and eyes. Harmful if inhaled.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Use foam, dry chemical, or CO2." },
        "1942": { name: "Ammonium nitrate", guide: "140", placard: "5.1", fireHazards: "Strong oxidizer! Will increase intensity of fire. May explode when heated or contaminated.", healthHazards: "May cause irritation. May be harmful if swallowed.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Flood with water if possible." },
        "1950": { name: "Aerosols", guide: "126", placard: "2", fireHazards: "FLAMMABLE GAS/LIQUID! Container may explode in heat of fire.", healthHazards: "Contents under pressure. May cause frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT puncture or incinerate." },
        "1966": { name: "Hydrogen, refrigerated liquid", guide: "120", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May explode if ignited in confined area. Lighter than air.", healthHazards: "Contact with liquid causes severe frostbite. May cause asphyxiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if large leak.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped. Use water spray to warm spills." },
        "1971": { name: "Natural gas", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! May explode if ignited in confined area. Lighter than air.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid may cause frostbite.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if large leak.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped." },
        "1978": { name: "Propane", guide: "115", placard: "2", fireHazards: "EXTREMELY FLAMMABLE! Container may explode in heat of fire. Vapor may travel to source of ignition and flash back.", healthHazards: "Contact with liquefied gas may cause burns, severe injury and/or frostbite. May cause asphyxiation in confined spaces.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind and uphill. Consider evacuation for 800 meters (1/2 mile) in all directions if tank is involved in fire.", responseGuidance: "Do NOT extinguish a leaking gas fire unless leak can be stopped. Use water spray to cool containers. Stop leak if possible without risk.", largeSpillEvacuation: "Large spill (semi-truck): 800m all directions. Tank car: 1600m all directions. If fire: tank car evacuation 3200m+ all directions." },
        "1987": { name: "Alcohols, n.o.s.", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames. Vapors may form explosive mixtures with air.", healthHazards: "May cause irritation to skin, eyes and respiratory tract. May cause central nervous system depression.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2. Water may be ineffective on fire." },
        "1999": { name: "Tars, liquid", guide: "130", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "May cause irritation. May affect respiratory system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2." },
        "2014": { name: "Hydrogen peroxide, aqueous solution", guide: "140", placard: "5.1", fireHazards: "May explode from heat or contamination. Strong oxidizer - increases fire intensity.", healthHazards: "Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area. Remove ignition sources.", responseGuidance: "Use water spray to cool containers. Do NOT get water inside container." },
        "2015": { name: "Hydrogen peroxide, stabilized", guide: "140", placard: "5.1", fireHazards: "May explode from heat or contamination. Strong oxidizer.", healthHazards: "Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area.", responseGuidance: "Use water spray to cool containers." },
        "2056": { name: "Tetrahydrofuran", guide: "127", placard: "3", fireHazards: "HIGHLY FLAMMABLE! Forms explosive peroxides. Vapors may form explosive mixtures.", healthHazards: "May cause irritation. May affect nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2." },
        "2187": { name: "Carbon dioxide, refrigerated liquid", guide: "120", placard: "2", fireHazards: "Non-flammable gas. Container may explode in heat of fire.", healthHazards: "May cause asphyxiation by displacing air. Contact with liquid causes severe frostbite.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to warm liquid spills. Do not direct water at spill." },
        "2218": { name: "Acrylic acid, stabilized", guide: "132P", placard: "8", fireHazards: "FLAMMABLE LIQUID! May polymerize explosively when heated.", healthHazards: "CORROSIVE! Causes severe burns. Harmful if inhaled.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Evacuate area of spill.", responseGuidance: "Use water spray, alcohol-resistant foam. Keep cool to prevent polymerization." },
        "2447": { name: "Phosphorus, white, molten", guide: "136", placard: "4.2", fireHazards: "SPONTANEOUSLY COMBUSTIBLE! Will ignite in air. Burns intensely.", healthHazards: "EXTREMELY TOXIC! Causes severe burns. May be fatal if inhaled or absorbed.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Do NOT use water. Use dry sand or approved Class D extinguishing agent.", largeSpillEvacuation: "Large spill (semi-truck): 800m all directions. Tank car: 1600m all directions. If fire: 3200m+ all directions." },
        "2448": { name: "Sulfur, molten", guide: "133", placard: "4.1", fireHazards: "Flammable solid. May be ignited by friction, heat or flames.", healthHazards: "May cause burns. Produces toxic sulfur dioxide gas when burned.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use water spray, foam, dry chemical, or CO2. Cool containers with water." },
        "2582": { name: "Ferric chloride solution", guide: "154", placard: "8", fireHazards: "Non-flammable but may ignite combustibles.", healthHazards: "CORROSIVE! Causes severe burns to skin and eyes.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area.", responseGuidance: "Use water spray to reduce vapors. Neutralize spill with appropriate base." },
        "2810": { name: "Toxic liquid, organic, n.o.s.", guide: "151", placard: "6", fireHazards: "May be flammable. Runoff may create fire or explosion hazard.", healthHazards: "TOXIC! May be fatal if inhaled, swallowed or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Prevent runoff from entering sewers." },
        "2912": { name: "Radioactive material, low specific activity", guide: "161", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Minimize exposure time. Maximize distance from source.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Avoid breaking packages." },
        "2913": { name: "Radioactive material, surface contaminated objects", guide: "161", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Minimize exposure time. Maximize distance from source.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Avoid breaking packages." },
        "2915": { name: "Radioactive material, Type A package", guide: "161", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Minimize exposure time. Maximize distance from source.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Avoid breaking packages." },
        "2916": { name: "Radioactive material, Type B(U) package", guide: "163", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if package damaged.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Do NOT break packages." },
        "2917": { name: "Radioactive material, Type B(M) package", guide: "163", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if package damaged.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Do NOT break packages." },
        "2918": { name: "Radioactive material, fissile", guide: "165", placard: "7", fireHazards: "Fire may produce radioactive contamination and criticality hazard.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage. Criticality may cause intense radiation.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area immediately. Stay upwind. Large spill: evacuate 800 meters.", responseGuidance: "Use appropriate extinguishing agent. Do NOT use neutron absorbing materials like borated water." },
        "2919": { name: "Radioactive material, transported under special arrangement", guide: "164", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Consider evacuation for 800 meters if package damaged.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Consult shipper or consignee." },
        "2929": { name: "Toxic liquid, flammable, organic, n.o.s.", guide: "131", placard: "6", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames.", healthHazards: "TOXIC! May be fatal if inhaled, swallowed or absorbed through skin.", isolation: "In all directions: 60 meters (200 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Use water spray to reduce vapors. Use foam, dry chemical, or CO2." },
        "2978": { name: "Radioactive material, uranium hexafluoride", guide: "166", placard: "7", fireHazards: "Non-flammable but may ignite combustibles. May release toxic fluorine compounds.", healthHazards: "RADIOACTIVE AND TOXIC! Radiation and chemical poisoning. Forms toxic hydrogen fluoride with moisture.", isolation: "In all directions: 100 meters (330 feet)", protectiveActions: "Evacuate area. Stay upwind. Large spill: evacuate 800 meters downwind.", responseGuidance: "Do NOT use water. Use dry chemical or CO2. Avoid moisture contact." },
        "2982": { name: "Radioactive material, n.o.s.", guide: "162", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Minimize exposure time. Maximize distance from source.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Avoid breaking packages." },
        "3077": { name: "Environmentally hazardous substance, solid, n.o.s.", guide: "171", placard: "9", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "May cause harm to environment and human health.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Prevent environmental contamination.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire." },
        "3082": { name: "Environmentally hazardous substance, liquid, n.o.s.", guide: "171", placard: "9", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "May cause harm to environment and human health.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Prevent environmental contamination.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Prevent runoff." },
        "3257": { name: "Elevated temperature liquid, n.o.s.", guide: "171", placard: "9", fireHazards: "May ignite combustibles. Hot liquid may cause severe burns.", healthHazards: "Contact with hot liquid causes severe burns.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Allow material to cool.", responseGuidance: "Use water spray to cool containers. Do NOT direct water on hot liquid." },
        "3258": { name: "Elevated temperature solid, n.o.s.", guide: "171", placard: "9", fireHazards: "May ignite combustibles. Hot solid may cause severe burns.", healthHazards: "Contact with hot solid causes severe burns.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Allow material to cool.", responseGuidance: "Use water spray to cool containers. Do NOT direct water on hot solid." },
        "3268": { name: "Air bag inflators", guide: "171", placard: "9", fireHazards: "May explode when heated. Fire may produce toxic gases.", healthHazards: "May cause burns from explosion. May release toxic gases.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area if heated.", responseGuidance: "Use water spray to cool. Do NOT approach if heated." },
        "3269": { name: "Polyester resin kit", guide: "127", placard: "3", fireHazards: "FLAMMABLE LIQUID! May be ignited by heat, sparks or flames. May polymerize explosively.", healthHazards: "May cause irritation. May affect respiratory system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Ventilate area. Eliminate ignition sources.", responseGuidance: "Use foam, dry chemical, or CO2. Keep cool to prevent polymerization." },
        "3321": { name: "Radioactive material, low specific activity (LSA-II), non fissile or fissile-excepted", guide: "161", placard: "7", fireHazards: "Fire may produce radioactive contamination.", healthHazards: "Radiation exposure may cause cancer, burns, and genetic damage.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Minimize exposure time. Maximize distance from source.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Avoid breaking packages." },
        "3334": { name: "Aviation regulated liquid, n.o.s.", guide: "171", placard: "9", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "May cause harm to human health depending on specific substance.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Consult shipping papers for specific hazards.", responseGuidance: "Use appropriate extinguishing agent based on specific material." },
        "3335": { name: "Aviation regulated solid, n.o.s.", guide: "171", placard: "9", fireHazards: "May be flammable. Fire may produce toxic gases.", healthHazards: "May cause harm to human health depending on specific substance.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Consult shipping papers for specific hazards.", responseGuidance: "Use appropriate extinguishing agent based on specific material." },
        "3359": { name: "Fumigated transport unit", guide: "171", placard: "9", fireHazards: "May contain flammable fumigant gases.", healthHazards: "TOXIC! May contain lethal concentrations of fumigant gases.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Do NOT enter until properly ventilated.", responseGuidance: "Ventilate thoroughly before entry. Use appropriate breathing apparatus." },
        "3363": { name: "Dangerous goods in machinery", guide: "171", placard: "9", fireHazards: "May contain various dangerous goods with different fire hazards.", healthHazards: "May contain various dangerous goods with different health hazards.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Consult shipping papers for specific hazards.", responseGuidance: "Use appropriate extinguishing agent based on specific dangerous goods present." },
        "3373": { name: "Biological substance, Category B", guide: "158", placard: "6", fireHazards: "Non-flammable. Fire may destroy containment.", healthHazards: "May cause infection. May be contaminated with unknown pathogens.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Avoid contact with spilled material.", responseGuidance: "Use appropriate extinguishing agent for surrounding fire. Disinfect area." },
        "3432": { name: "Polychlorinated biphenyls, solid", guide: "171", placard: "9", fireHazards: "May be flammable. Fire produces extremely toxic gases.", healthHazards: "TOXIC! May cause cancer. May affect liver and nervous system.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Prevent environmental contamination.", responseGuidance: "Use appropriate extinguishing agent. Prevent runoff from entering sewers." },
        "3481": { name: "Lithium ion batteries", guide: "147", placard: "9", fireHazards: "May ignite or explode when damaged, overheated or overcharged. Burns with intense heat.", healthHazards: "Electrolyte may cause burns. Fire produces toxic gases.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area if batteries are damaged and smoking.", responseGuidance: "Use water spray to cool and prevent thermal runaway. Do NOT use CO2 or dry chemical." },
        "3482": { name: "Lithium metal batteries", guide: "147", placard: "9", fireHazards: "May ignite or explode when damaged, overheated or exposed to water. Burns with intense heat.", healthHazards: "Lithium metal reacts violently with water. Fire produces toxic gases.", isolation: "In all directions: 50 meters (150 feet)", protectiveActions: "Stay upwind. Evacuate area if batteries are damaged and smoking.", responseGuidance: "Do NOT use water. Use dry sand, vermiculite or Class D extinguishing agent." },
    }

    // ERG Functions
    function updateERGData() {
        const dropdown = document.getElementById('hazmat-material-type');
        const selectedOption = dropdown.options[dropdown.selectedIndex];
        const unNumber = selectedOption.getAttribute('data-un');
        const guideNumber = selectedOption.getAttribute('data-guide');
        
        // Clear previous data
        clearERGData();
        
        if (unNumber && completeERGDatabase[unNumber]) {
            populateERGInfo(completeERGDatabase[unNumber]);
            document.getElementById('hazmat-un-number').value = 'UN' + unNumber;
            document.getElementById('hazmat-guide-number').value = 'Guide ' + guideNumber;
            document.getElementById('hazmat-material-name').value = completeERGDatabase[unNumber].name;
        } else if (dropdown.value === 'Other') {
            document.getElementById('hazmat-material-other-container').style.display = 'block';
        } else {
            document.getElementById('hazmat-material-other-container').style.display = 'none';
        }
    }

    // Smart Search and Autocomplete Functions for UN Numbers
    let searchTimeout;
    
    function handleUNSearch() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const unInput = document.getElementById('hazmat-un-number');
            const query = unInput.value.trim().toLowerCase();
            
            if (query.length >= 2) {
                showUNSuggestions(query);
            } else {
                hideUNSuggestions();
            }
        }, 300); // Debounce search
    }
    
    function showUNSuggestions(query = '') {
        const suggestionsDiv = document.getElementById('un-suggestions');
        const unInput = document.getElementById('hazmat-un-number');
        
        if (!query && unInput) {
            query = unInput.value.trim().toLowerCase();
        }
        
        if (query.length < 2) {
            hideUNSuggestions();
            return;
        }
        
        const matches = findUNMatches(query);
        
        if (matches.length > 0) {
            renderUNSuggestions(matches.slice(0, 10)); // Limit to 10 results
            suggestionsDiv.style.display = 'block';
        } else {
            hideUNSuggestions();
        }
    }
    
    function hideUNSuggestions() {
        setTimeout(() => {
            const suggestionsDiv = document.getElementById('un-suggestions');
            if (suggestionsDiv) {
                suggestionsDiv.style.display = 'none';
            }
        }, 150); // Small delay to allow for clicks
    }
    
    function findUNMatches(query) {
        const matches = [];
        const queryNum = query.replace(/[^\d]/g, '');
        
        for (const [unNum, data] of Object.entries(completeERGDatabase)) {
            let score = 0;
            const name = data.name.toLowerCase();
            
            // Exact UN number match (highest priority)
            if (unNum === queryNum || ('un' + unNum) === query) {
                score = 1000;
            }
            // UN number starts with query
            else if (unNum.startsWith(queryNum) && queryNum.length > 0) {
                score = 900;
            }
            // UN number contains query digits
            else if (unNum.includes(queryNum) && queryNum.length >= 3) {
                score = 800;
            }
            // Chemical name exact match
            else if (name === query) {
                score = 700;
            }
            // Chemical name starts with query
            else if (name.startsWith(query)) {
                score = 600;
            }
            // Chemical name contains query (word boundary)
            else if (name.includes(' ' + query) || name.includes(query + ' ')) {
                score = 500;
            }
            // Chemical name contains query anywhere
            else if (name.includes(query)) {
                score = 400;
            }
            // Fuzzy match for common misspellings
            else if (fuzzyMatch(name, query)) {
                score = 300;
            }
            
            if (score > 0) {
                matches.push({
                    unNumber: unNum,
                    data: data,
                    score: score,
                    highlightedName: highlightMatch(data.name, query)
                });
            }
        }
        
        // Sort by score (highest first) and then alphabetically
        return matches.sort((a, b) => {
            if (b.score !== a.score) return b.score - a.score;
            return a.data.name.localeCompare(b.data.name);
        });
    }
    
    function fuzzyMatch(text, query) {
        // Simple fuzzy matching for common chemical name patterns
        const fuzzyPatterns = [
            { from: 'ph', to: 'f' },
            { from: 'ine', to: 'een' },
            { from: 'yl', to: 'il' },
            { from: 'tion', to: 'shun' },
            { from: 'ous', to: 'us' }
        ];
        
        let fuzzyText = text.toLowerCase();
        let fuzzyQuery = query.toLowerCase();
        
        fuzzyPatterns.forEach(pattern => {
            fuzzyText = fuzzyText.replace(new RegExp(pattern.from, 'g'), pattern.to);
            fuzzyQuery = fuzzyQuery.replace(new RegExp(pattern.from, 'g'), pattern.to);
        });
        
        return fuzzyText.includes(fuzzyQuery) || fuzzyQuery.includes(fuzzyText);
    }
    
    function highlightMatch(text, query) {
        if (!query || query.length < 2) return text;
        
        const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
        return text.replace(regex, '<strong>$1</strong>');
    }
    
    function escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }
    
    function renderUNSuggestions(matches) {
        const suggestionsDiv = document.getElementById('un-suggestions');
        
        const html = matches.map(match => `
            <div class="un-suggestion-item" 
                 onclick="selectUNSuggestion('${match.unNumber}', '${escapeHtml(match.data.name)}')"
                 style="padding: 8px 12px; cursor: pointer; border-bottom: 1px solid #eee; 
                        display: flex; justify-content: space-between; align-items: center;">
                <div style="flex: 1;">
                    <div style="font-weight: 500; color: #333;">
                        UN${match.unNumber} - ${match.highlightedName}
                    </div>
                    <div style="font-size: 0.8em; color: #666; margin-top: 2px;">
                        Guide ${match.data.guide} â€¢ Placard ${match.data.placard}
                    </div>
                </div>
                <div style="color: #b71c1c; font-weight: bold; font-size: 0.9em;">
                    ${match.data.guide}
                </div>
            </div>
        `).join('');
        
        suggestionsDiv.innerHTML = html;
        
        // Add hover effects
        const items = suggestionsDiv.querySelectorAll('.un-suggestion-item');
        items.forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f5f5f5';
            });
            item.addEventListener('mouseleave', function() {
                this.style.backgroundColor = 'white';
            });
        });
    }
    
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    function selectUNSuggestion(unNumber, materialName) {
        const unInput = document.getElementById('hazmat-un-number');
        const guideInput = document.getElementById('hazmat-guide-number');
        const nameInput = document.getElementById('hazmat-material-name');
        
        // Update input fields
        unInput.value = 'UN' + unNumber;
        guideInput.value = 'Guide ' + completeERGDatabase[unNumber].guide;
        nameInput.value = materialName;
        
        // Populate ERG information
        populateERGInfo(completeERGDatabase[unNumber]);
        
        // Update dropdown to match if possible
        const dropdown = document.getElementById('hazmat-material-type');
        const matchingOption = Array.from(dropdown.options).find(option => 
            option.getAttribute('data-un') === unNumber
        );
        if (matchingOption) {
            dropdown.value = matchingOption.value;
        }
        
        // Hide suggestions
        hideUNSuggestions();
        
        // Remove focus to trigger any blur events
        unInput.blur();
    }
    
    // Enhanced keyboard navigation for suggestions
    function setupUNKeyboardNavigation() {
        const unInput = document.getElementById('hazmat-un-number');
        let selectedIndex = -1;
        
        unInput.addEventListener('keydown', function(e) {
            const suggestionsDiv = document.getElementById('un-suggestions');
            const items = suggestionsDiv.querySelectorAll('.un-suggestion-item');
            
            if (items.length === 0) return;
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
                    updateSelectedSuggestion(items, selectedIndex);
                    break;
                    
                case 'ArrowUp':
                    e.preventDefault();
                    selectedIndex = Math.max(selectedIndex - 1, -1);
                    updateSelectedSuggestion(items, selectedIndex);
                    break;
                    
                case 'Enter':
                    e.preventDefault();
                    if (selectedIndex >= 0 && items[selectedIndex]) {
                        items[selectedIndex].click();
                    } else {
                        lookupUNNumber(); // Fallback to direct lookup
                    }
                    break;
                    
                case 'Escape':
                    hideUNSuggestions();
                    selectedIndex = -1;
                    break;
            }
        });
        
        // Reset selection when suggestions change
        const observer = new MutationObserver(() => {
            selectedIndex = -1;
        });
        
        const suggestionsDiv = document.getElementById('un-suggestions');
        if (suggestionsDiv) {
            observer.observe(suggestionsDiv, { childList: true });
        }
    }
    
    function updateSelectedSuggestion(items, selectedIndex) {
        items.forEach((item, index) => {
            if (index === selectedIndex) {
                item.style.backgroundColor = '#e3f2fd';
                item.style.borderLeft = '3px solid #b71c1c';
            } else {
                item.style.backgroundColor = 'white';
                item.style.borderLeft = 'none';
            }
        });
    }

    function lookupUNNumber() {
        const unInput = document.getElementById('hazmat-un-number');
        let unNumber = unInput.value.replace(/[^\d]/g, ''); // Remove non-digits
        
        if (unNumber && completeERGDatabase[unNumber]) {
            populateERGInfo(completeERGDatabase[unNumber]);
            document.getElementById('hazmat-guide-number').value = 'Guide ' + completeERGDatabase[unNumber].guide;
            document.getElementById('hazmat-material-name').value = completeERGDatabase[unNumber].name;
            
            // Update dropdown to match
            const dropdown = document.getElementById('hazmat-material-type');
            const matchingOption = Array.from(dropdown.options).find(option => 
                option.getAttribute('data-un') === unNumber
            );
            if (matchingOption) {
                dropdown.value = matchingOption.value;
            }
        } else {
            clearERGData();
        }
        
        // Format UN number
        if (unNumber) {
            unInput.value = 'UN' + unNumber;
        }
    }

    function populateERGInfo(ergData) {
        document.getElementById('erg-safety-info').style.display = 'block';
        document.getElementById('erg-fire-hazards').textContent = ergData.fireHazards;
        document.getElementById('erg-health-hazards').textContent = ergData.healthHazards;
        document.getElementById('erg-isolation').textContent = ergData.isolation;
        document.getElementById('erg-protective-actions').textContent = ergData.protectiveActions;
        document.getElementById('erg-response-guidance').textContent = ergData.responseGuidance;
        
        // Show large spill evacuation info if available
        const largeSpillSection = document.getElementById('erg-large-spill-section');
        const largeSpillDiv = document.getElementById('erg-large-spill-evacuation');
        if (ergData.largeSpillEvacuation) {
            largeSpillSection.style.display = 'block';
            largeSpillDiv.textContent = ergData.largeSpillEvacuation;
        } else {
            largeSpillSection.style.display = 'none';
            largeSpillDiv.textContent = '';
        }
    }

    function clearERGData() {
        document.getElementById('erg-safety-info').style.display = 'none';
        document.getElementById('erg-fire-hazards').textContent = '';
        document.getElementById('erg-health-hazards').textContent = '';
        document.getElementById('erg-isolation').textContent = '';
        document.getElementById('erg-protective-actions').textContent = '';
        document.getElementById('erg-response-guidance').textContent = '';
        document.getElementById('erg-large-spill-section').style.display = 'none';
        document.getElementById('erg-large-spill-evacuation').textContent = '';
    }

    // Hazmat - Material Type dropdown functionality (enhanced)
    function toggleHazmatMaterialOther() {
        const dropdown = document.querySelector('select[name="hazmat-material-type"]');
        const otherContainer = document.getElementById('hazmat-material-other-container');
        const otherInput = document.querySelector('input[name="hazmat-material-other"]');
        
        if (dropdown && otherContainer && otherInput) {
            if (dropdown.value === 'Other') {
                otherContainer.style.display = 'block';
                otherInput.required = true;
                clearERGData();
            } else {
                otherContainer.style.display = 'none';
                otherInput.required = false;
                otherInput.value = '';
            }
        }
    }

    // Add event listener for material type dropdown (enhanced)
    const hazmatMaterialTypeSelect = document.querySelector('select[name="hazmat-material-type"]');
    if (hazmatMaterialTypeSelect) {
        hazmatMaterialTypeSelect.addEventListener('change', function() {
            updateERGData();
            toggleHazmatMaterialOther();
        });
    }

    // Hazmat - Release Source dropdown functionality
    function toggleHazmatSourceOther() {
        const dropdown = document.querySelector('select[name="hazmat-release-source"]');
        const otherContainer = document.getElementById('hazmat-source-other-container');
        const otherInput = document.querySelector('input[name="hazmat-source-other"]');
        
        if (dropdown && otherContainer && otherInput) {
            if (dropdown.value === 'Other') {
                otherContainer.style.display = 'block';
                otherInput.required = true;
            } else {
                otherContainer.style.display = 'none';
                otherInput.required = false;
                otherInput.value = '';
            }
        }
    }

    // Add event listener for release source dropdown
    const hazmatReleaseSourceSelect = document.querySelector('select[name="hazmat-release-source"]');
    if (hazmatReleaseSourceSelect) {
        hazmatReleaseSourceSelect.addEventListener('change', toggleHazmatSourceOther);
    }

    // Hazmat - Phone number formatting
    const hazmatPhoneInputs = document.querySelectorAll('input[name="hazmat-responsible-phone"], input[name="hazmat-cleanup-phone"]');
    hazmatPhoneInputs.forEach(input => {
        input.addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            if (value.length >= 6) {
                value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{3})/, '($1) $2');
            } else if (value.length > 0) {
                value = value.replace(/(\d{3})/, '($1)');
            }
            this.value = value;
        });
    });

    // Initialize UN number search keyboard navigation
    setupUNKeyboardNavigation();

    window.addEventListener('beforeunload', function (e) {
        if (!isSubmitting) {
        e.preventDefault();
        e.returnValue = ''; // Required for Chrome to show the dialog
    }
});
</script>
</body>
</html>